!function(e){function t(i){if(s[i])return s[i].exports;var n=s[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var s={};return t.m=e,t.c=s,t.p="",t(0)}([function(e,t,s){"use strict";console.log("GIT VERSION:","5afa4f6"),s(1),s(5),s(7),s(13),window.saveAs=s(14),window.strftime=s(17),window.Sortable=s(18),s(19),s(21),s(23),s(24),s(25),s(26)},function(e,t){},,,,function(e,t){},,function(e,t){},,,,,,function(e,t){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};/**
	 * material-design-lite - Material Design Components in CSS, JS and HTML
	 * @version v1.1.3
	 * @license Apache-2.0
	 * @copyright 2015 Google, Inc.
	 * @link https://github.com/google/material-design-lite
	 */
!function(){function e(e,t){if(e){if(t.element_.classList.contains(t.CssClasses_.MDL_JS_RIPPLE_EFFECT)){var s=document.createElement("span");s.classList.add(t.CssClasses_.MDL_RIPPLE_CONTAINER),s.classList.add(t.CssClasses_.MDL_JS_RIPPLE_EFFECT);var i=document.createElement("span");i.classList.add(t.CssClasses_.MDL_RIPPLE),s.appendChild(i),e.appendChild(s)}e.addEventListener("click",function(s){s.preventDefault();var i=e.href.split("#")[1],n=t.element_.querySelector("#"+i);t.resetTabState_(),t.resetPanelState_(),e.classList.add(t.CssClasses_.ACTIVE_CLASS),n.classList.add(t.CssClasses_.ACTIVE_CLASS)})}}function t(e,t,s,i){function n(){var n=e.href.split("#")[1],a=i.content_.querySelector("#"+n);i.resetTabState_(t),i.resetPanelState_(s),e.classList.add(i.CssClasses_.IS_ACTIVE),a.classList.add(i.CssClasses_.IS_ACTIVE)}if(i.tabBar_.classList.contains(i.CssClasses_.JS_RIPPLE_EFFECT)){var a=document.createElement("span");a.classList.add(i.CssClasses_.RIPPLE_CONTAINER),a.classList.add(i.CssClasses_.JS_RIPPLE_EFFECT);var o=document.createElement("span");o.classList.add(i.CssClasses_.RIPPLE),a.appendChild(o),e.appendChild(a)}e.addEventListener("click",function(t){"#"===e.getAttribute("href").charAt(0)&&(t.preventDefault(),n())}),e.show=n}var i={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};i=function(){function e(e,t){for(var s=0;s<h.length;s++)if(h[s].className===e)return"undefined"!=typeof t&&(h[s]=t),h[s];return!1}function t(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function i(e,s){var i=t(e);return-1!==i.indexOf(s)}function n(t,s){if("undefined"==typeof t&&"undefined"==typeof s)for(var i=0;i<h.length;i++)n(h[i].className,h[i].cssClass);else{var o=t;if("undefined"==typeof s){var r=e(o);r&&(s=r.cssClass)}for(var l=document.querySelectorAll("."+s),c=0;c<l.length;c++)a(l[c],o)}}function a(n,a){if(!("object"==("undefined"==typeof n?"undefined":s(n))&&n instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var o=t(n),r=[];if(a)i(n,a)||r.push(e(a));else{var l=n.classList;h.forEach(function(e){l.contains(e.cssClass)&&-1===r.indexOf(e)&&!i(n,e.className)&&r.push(e)})}for(var c,u=0,d=r.length;d>u;u++){if(c=r[u],!c)throw new Error("Unable to find a registered component for the given class.");o.push(c.className),n.setAttribute("data-upgraded",o.join(","));var f=new c.classConstructor(n);f[_]=c,p.push(f);for(var m=0,v=c.callbacks.length;v>m;m++)c.callbacks[m](n);c.widget&&(n[c.className]=f);var E;"CustomEvent"in window&&"function"==typeof window.CustomEvent?E=new Event("mdl-componentupgraded",{bubbles:!0,cancelable:!1}):(E=document.createEvent("Events"),E.initEvent("mdl-componentupgraded",!0,!0)),n.dispatchEvent(E)}}function o(e){Array.isArray(e)||(e="function"==typeof e.item?Array.prototype.slice.call(e):[e]);for(var t,s=0,i=e.length;i>s;s++)t=e[s],t instanceof HTMLElement&&(a(t),t.children.length>0&&o(t.children))}function r(t){var s="undefined"==typeof t.widget&&"undefined"==typeof t.widget,i=!0;s||(i=t.widget||t.widget);var n={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:i,callbacks:[]};if(h.forEach(function(e){if(e.cssClass===n.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===n.className)throw new Error("The provided className has already been registered")}),t.constructor.prototype.hasOwnProperty(_))throw new Error("MDL component classes must not have "+_+" defined as a property.");var a=e(t.classAsString,n);a||h.push(n)}function l(t,s){var i=e(t);i&&i.callbacks.push(s)}function c(){for(var e=0;e<h.length;e++)n(h[e].className)}function u(e){if(e){var t=p.indexOf(e);p.splice(t,1);var s=e.element_.getAttribute("data-upgraded").split(","),i=s.indexOf(e[_].classAsString);s.splice(i,1),e.element_.setAttribute("data-upgraded",s.join(","));var n;"CustomEvent"in window&&"function"==typeof window.CustomEvent?n=new Event("mdl-componentdowngraded",{bubbles:!0,cancelable:!1}):(n=document.createEvent("Events"),n.initEvent("mdl-componentdowngraded",!0,!0))}}function d(e){var t=function(e){p.filter(function(t){return t.element_===e}).forEach(u)};if(e instanceof Array||e instanceof NodeList)for(var s=0;s<e.length;s++)t(e[s]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");t(e)}}var h=[],p=[],_="mdlComponentConfigInternal_";return{upgradeDom:n,upgradeElement:a,upgradeElements:o,upgradeAllRegistered:c,registerUpgradedCallback:l,register:r,downgradeElements:d}}(),i.ComponentConfigPublic,i.ComponentConfig,i.Component,i.upgradeDom=i.upgradeDom,i.upgradeElement=i.upgradeElement,i.upgradeElements=i.upgradeElements,i.upgradeAllRegistered=i.upgradeAllRegistered,i.registerUpgradedCallback=i.registerUpgradedCallback,i.register=i.register,i.downgradeElements=i.downgradeElements,window.componentHandler=i,window.componentHandler=i,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),i.upgradeAllRegistered()):(i.upgradeElement=function(){},i.register=function(){})}),Date.now||(Date.now=function(){return(new Date).getTime()},Date.now=Date.now);for(var n=["webkit","moz"],a=0;a<n.length&&!window.requestAnimationFrame;++a){var o=n[a];window.requestAnimationFrame=window[o+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o+"CancelAnimationFrame"]||window[o+"CancelRequestAnimationFrame"],window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var r=0;window.requestAnimationFrame=function(e){var t=Date.now(),s=Math.max(r+16,t);return setTimeout(function(){e(r=s)},s-t)},window.cancelAnimationFrame=clearTimeout,window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}var l=function(e){this.element_=e,this.init()};window.MaterialButton=l,l.prototype.Constant_={},l.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},l.prototype.blurHandler_=function(e){e&&this.element_.blur()},l.prototype.disable=function(){this.element_.disabled=!0},l.prototype.disable=l.prototype.disable,l.prototype.enable=function(){this.element_.disabled=!1},l.prototype.enable=l.prototype.enable,l.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},i.register({constructor:l,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0});var c=function(e){this.element_=e,this.init()};window.MaterialCheckbox=c,c.prototype.Constant_={TINY_TIMEOUT:.001},c.prototype.CssClasses_={INPUT:"mdl-checkbox__input",BOX_OUTLINE:"mdl-checkbox__box-outline",FOCUS_HELPER:"mdl-checkbox__focus-helper",TICK_OUTLINE:"mdl-checkbox__tick-outline",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-checkbox__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded"},c.prototype.onChange_=function(e){this.updateClasses_()},c.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},c.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},c.prototype.onMouseUp_=function(e){this.blur_()},c.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},c.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},c.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},c.prototype.checkToggleState=c.prototype.checkToggleState,c.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},c.prototype.checkDisabled=c.prototype.checkDisabled,c.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},c.prototype.disable=c.prototype.disable,c.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},c.prototype.enable=c.prototype.enable,c.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},c.prototype.check=c.prototype.check,c.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},c.prototype.uncheck=c.prototype.uncheck,c.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("span");e.classList.add(this.CssClasses_.BOX_OUTLINE);var t=document.createElement("span");t.classList.add(this.CssClasses_.FOCUS_HELPER);var s=document.createElement("span");if(s.classList.add(this.CssClasses_.TICK_OUTLINE),e.appendChild(s),this.element_.appendChild(t),this.element_.appendChild(e),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(i),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementMouseUp),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},i.register({constructor:c,classAsString:"MaterialCheckbox",cssClass:"mdl-js-checkbox",widget:!0});var u=function(e){this.element_=e,this.init()};window.MaterialIconToggle=u,u.prototype.Constant_={TINY_TIMEOUT:.001},u.prototype.CssClasses_={INPUT:"mdl-icon-toggle__input",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-icon-toggle__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},u.prototype.onChange_=function(e){this.updateClasses_()},u.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},u.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},u.prototype.onMouseUp_=function(e){this.blur_()},u.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},u.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},u.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},u.prototype.checkToggleState=u.prototype.checkToggleState,u.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},u.prototype.checkDisabled=u.prototype.checkDisabled,u.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},u.prototype.disable=u.prototype.disable,u.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},u.prototype.enable=u.prototype.enable,u.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},u.prototype.check=u.prototype.check,u.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},u.prototype.uncheck=u.prototype.uncheck,u.prototype.init=function(){if(this.element_){if(this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.element_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.JS_RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(e),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementOnMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementOnMouseUp),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},i.register({constructor:u,classAsString:"MaterialIconToggle",cssClass:"mdl-js-icon-toggle",widget:!0});var d=function(e){this.element_=e,this.init()};window.MaterialMenu=d,d.prototype.Constant_={TRANSITION_DURATION_SECONDS:.3,TRANSITION_DURATION_FRACTION:.8,CLOSE_TIMEOUT:150},d.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32,UP_ARROW:38,DOWN_ARROW:40},d.prototype.CssClasses_={CONTAINER:"mdl-menu__container",OUTLINE:"mdl-menu__outline",ITEM:"mdl-menu__item",ITEM_RIPPLE_CONTAINER:"mdl-menu__item-ripple-container",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_UPGRADED:"is-upgraded",IS_VISIBLE:"is-visible",IS_ANIMATING:"is-animating",BOTTOM_LEFT:"mdl-menu--bottom-left",BOTTOM_RIGHT:"mdl-menu--bottom-right",TOP_LEFT:"mdl-menu--top-left",TOP_RIGHT:"mdl-menu--top-right",UNALIGNED:"mdl-menu--unaligned"},d.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),this.container_=e;var t=document.createElement("div");t.classList.add(this.CssClasses_.OUTLINE),this.outline_=t,e.insertBefore(t,this.element_);var s=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for"),i=null;s&&(i=document.getElementById(s),i&&(this.forElement_=i,i.addEventListener("click",this.handleForClick_.bind(this)),i.addEventListener("keydown",this.handleForKeyboardEvent_.bind(this))));var n=this.element_.querySelectorAll("."+this.CssClasses_.ITEM);this.boundItemKeydown_=this.handleItemKeyboardEvent_.bind(this),this.boundItemClick_=this.handleItemClick_.bind(this);for(var a=0;a<n.length;a++)n[a].addEventListener("click",this.boundItemClick_),n[a].tabIndex="-1",n[a].addEventListener("keydown",this.boundItemKeydown_);if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT))for(this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),a=0;a<n.length;a++){var o=n[a],r=document.createElement("span");r.classList.add(this.CssClasses_.ITEM_RIPPLE_CONTAINER);var l=document.createElement("span");l.classList.add(this.CssClasses_.RIPPLE),r.appendChild(l),o.appendChild(r),o.classList.add(this.CssClasses_.RIPPLE_EFFECT)}this.element_.classList.contains(this.CssClasses_.BOTTOM_LEFT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_LEFT),this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_RIGHT),this.element_.classList.contains(this.CssClasses_.TOP_LEFT)&&this.outline_.classList.add(this.CssClasses_.TOP_LEFT),this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)&&this.outline_.classList.add(this.CssClasses_.TOP_RIGHT),this.element_.classList.contains(this.CssClasses_.UNALIGNED)&&this.outline_.classList.add(this.CssClasses_.UNALIGNED),e.classList.add(this.CssClasses_.IS_UPGRADED)}},d.prototype.handleForClick_=function(e){if(this.element_&&this.forElement_){var t=this.forElement_.getBoundingClientRect(),s=this.forElement_.parentElement.getBoundingClientRect();this.element_.classList.contains(this.CssClasses_.UNALIGNED)||(this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?(this.container_.style.right=s.right-t.right+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"):this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.bottom=s.bottom-t.top+"px"):this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(this.container_.style.right=s.right-t.right+"px",this.container_.style.bottom=s.bottom-t.top+"px"):(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"))}this.toggle(e)},d.prototype.handleForKeyboardEvent_=function(e){if(this.element_&&this.container_&&this.forElement_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)&&(e.keyCode===this.Keycodes_.UP_ARROW?(e.preventDefault(),t[t.length-1].focus()):e.keyCode===this.Keycodes_.DOWN_ARROW&&(e.preventDefault(),t[0].focus()))}},d.prototype.handleItemKeyboardEvent_=function(e){if(this.element_&&this.container_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");if(t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)){var s=Array.prototype.slice.call(t).indexOf(e.target);if(e.keyCode===this.Keycodes_.UP_ARROW)e.preventDefault(),s>0?t[s-1].focus():t[t.length-1].focus();else if(e.keyCode===this.Keycodes_.DOWN_ARROW)e.preventDefault(),t.length>s+1?t[s+1].focus():t[0].focus();else if(e.keyCode===this.Keycodes_.SPACE||e.keyCode===this.Keycodes_.ENTER){e.preventDefault();var i=new MouseEvent("mousedown");e.target.dispatchEvent(i),i=new MouseEvent("mouseup"),e.target.dispatchEvent(i),e.target.click()}else e.keyCode===this.Keycodes_.ESCAPE&&(e.preventDefault(),this.hide())}}},d.prototype.handleItemClick_=function(e){e.target.hasAttribute("disabled")?e.stopPropagation():(this.closing_=!0,window.setTimeout(function(e){this.hide(),this.closing_=!1}.bind(this),this.Constant_.CLOSE_TIMEOUT))},d.prototype.applyClip_=function(e,t){this.element_.classList.contains(this.CssClasses_.UNALIGNED)?this.element_.style.clip="":this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?this.element_.style.clip="rect(0 "+t+"px 0 "+t+"px)":this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?this.element_.style.clip="rect("+e+"px 0 "+e+"px 0)":this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?this.element_.style.clip="rect("+e+"px "+t+"px "+e+"px "+t+"px)":this.element_.style.clip=""},d.prototype.removeAnimationEndListener_=function(e){e.target.classList.remove(d.prototype.CssClasses_.IS_ANIMATING)},d.prototype.addAnimationEndListener_=function(){this.element_.addEventListener("transitionend",this.removeAnimationEndListener_),this.element_.addEventListener("webkitTransitionEnd",this.removeAnimationEndListener_)},d.prototype.show=function(e){if(this.element_&&this.container_&&this.outline_){var t=this.element_.getBoundingClientRect().height,s=this.element_.getBoundingClientRect().width;this.container_.style.width=s+"px",this.container_.style.height=t+"px",this.outline_.style.width=s+"px",this.outline_.style.height=t+"px";for(var i=this.Constant_.TRANSITION_DURATION_SECONDS*this.Constant_.TRANSITION_DURATION_FRACTION,n=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),a=0;a<n.length;a++){var o=null;o=this.element_.classList.contains(this.CssClasses_.TOP_LEFT)||this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(t-n[a].offsetTop-n[a].offsetHeight)/t*i+"s":n[a].offsetTop/t*i+"s",n[a].style.transitionDelay=o}this.applyClip_(t,s),window.requestAnimationFrame(function(){this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.element_.style.clip="rect(0 "+s+"px "+t+"px 0)",this.container_.classList.add(this.CssClasses_.IS_VISIBLE)}.bind(this)),this.addAnimationEndListener_();var r=function(t){t===e||this.closing_||t.target.parentNode===this.element_||(document.removeEventListener("click",r),this.hide())}.bind(this);document.addEventListener("click",r)}},d.prototype.show=d.prototype.show,d.prototype.hide=function(){if(this.element_&&this.container_&&this.outline_){for(var e=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),t=0;t<e.length;t++)e[t].style.removeProperty("transition-delay");var s=this.element_.getBoundingClientRect(),i=s.height,n=s.width;this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.applyClip_(i,n),this.container_.classList.remove(this.CssClasses_.IS_VISIBLE),this.addAnimationEndListener_()}},d.prototype.hide=d.prototype.hide,d.prototype.toggle=function(e){this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)?this.hide():this.show(e)},d.prototype.toggle=d.prototype.toggle,i.register({constructor:d,classAsString:"MaterialMenu",cssClass:"mdl-js-menu",widget:!0});var h=function(e){this.element_=e,this.init()};window.MaterialProgress=h,h.prototype.Constant_={},h.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},h.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},h.prototype.setProgress=h.prototype.setProgress,h.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},h.prototype.setBuffer=h.prototype.setBuffer,h.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},i.register({constructor:h,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0});var p=function(e){this.element_=e,this.init()};window.MaterialRadio=p,p.prototype.Constant_={TINY_TIMEOUT:.001},p.prototype.CssClasses_={IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded",JS_RADIO:"mdl-js-radio",RADIO_BTN:"mdl-radio__button",RADIO_OUTER_CIRCLE:"mdl-radio__outer-circle",RADIO_INNER_CIRCLE:"mdl-radio__inner-circle",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-radio__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple"},p.prototype.onChange_=function(e){for(var t=document.getElementsByClassName(this.CssClasses_.JS_RADIO),s=0;s<t.length;s++){var i=t[s].querySelector("."+this.CssClasses_.RADIO_BTN);i.getAttribute("name")===this.btnElement_.getAttribute("name")&&t[s].MaterialRadio.updateClasses_()}},p.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},p.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},p.prototype.onMouseup_=function(e){this.blur_()},p.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},p.prototype.blur_=function(){window.setTimeout(function(){this.btnElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},p.prototype.checkDisabled=function(){this.btnElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},p.prototype.checkDisabled=p.prototype.checkDisabled,p.prototype.checkToggleState=function(){this.btnElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},p.prototype.checkToggleState=p.prototype.checkToggleState,p.prototype.disable=function(){this.btnElement_.disabled=!0,this.updateClasses_()},p.prototype.disable=p.prototype.disable,p.prototype.enable=function(){this.btnElement_.disabled=!1,this.updateClasses_()},p.prototype.enable=p.prototype.enable,p.prototype.check=function(){this.btnElement_.checked=!0,this.updateClasses_()},p.prototype.check=p.prototype.check,p.prototype.uncheck=function(){this.btnElement_.checked=!1,this.updateClasses_()},p.prototype.uncheck=p.prototype.uncheck,p.prototype.init=function(){if(this.element_){this.btnElement_=this.element_.querySelector("."+this.CssClasses_.RADIO_BTN),this.boundChangeHandler_=this.onChange_.bind(this),this.boundFocusHandler_=this.onChange_.bind(this),this.boundBlurHandler_=this.onBlur_.bind(this),this.boundMouseUpHandler_=this.onMouseup_.bind(this);var e=document.createElement("span");e.classList.add(this.CssClasses_.RADIO_OUTER_CIRCLE);var t=document.createElement("span");t.classList.add(this.CssClasses_.RADIO_INNER_CIRCLE),this.element_.appendChild(e),this.element_.appendChild(t);var s;if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),s=document.createElement("span"),s.classList.add(this.CssClasses_.RIPPLE_CONTAINER),s.classList.add(this.CssClasses_.RIPPLE_EFFECT),s.classList.add(this.CssClasses_.RIPPLE_CENTER),s.addEventListener("mouseup",this.boundMouseUpHandler_);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),s.appendChild(i),this.element_.appendChild(s)}this.btnElement_.addEventListener("change",this.boundChangeHandler_),this.btnElement_.addEventListener("focus",this.boundFocusHandler_),this.btnElement_.addEventListener("blur",this.boundBlurHandler_),this.element_.addEventListener("mouseup",this.boundMouseUpHandler_),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},i.register({constructor:p,classAsString:"MaterialRadio",cssClass:"mdl-js-radio",widget:!0});var _=function(e){this.element_=e,this.isIE_=window.navigator.msPointerEnabled,this.init()};window.MaterialSlider=_,_.prototype.Constant_={},_.prototype.CssClasses_={IE_CONTAINER:"mdl-slider__ie-container",SLIDER_CONTAINER:"mdl-slider__container",BACKGROUND_FLEX:"mdl-slider__background-flex",BACKGROUND_LOWER:"mdl-slider__background-lower",BACKGROUND_UPPER:"mdl-slider__background-upper",IS_LOWEST_VALUE:"is-lowest-value",IS_UPGRADED:"is-upgraded"},_.prototype.onInput_=function(e){this.updateValueStyles_()},_.prototype.onChange_=function(e){this.updateValueStyles_()},_.prototype.onMouseUp_=function(e){e.target.blur()},_.prototype.onContainerMouseDown_=function(e){if(e.target===this.element_.parentElement){e.preventDefault();var t=new MouseEvent("mousedown",{target:e.target,buttons:e.buttons,clientX:e.clientX,clientY:this.element_.getBoundingClientRect().y});this.element_.dispatchEvent(t)}},_.prototype.updateValueStyles_=function(){var e=(this.element_.value-this.element_.min)/(this.element_.max-this.element_.min);0===e?this.element_.classList.add(this.CssClasses_.IS_LOWEST_VALUE):this.element_.classList.remove(this.CssClasses_.IS_LOWEST_VALUE),this.isIE_||(this.backgroundLower_.style.flex=e,this.backgroundLower_.style.webkitFlex=e,this.backgroundUpper_.style.flex=1-e,this.backgroundUpper_.style.webkitFlex=1-e)},_.prototype.disable=function(){this.element_.disabled=!0},_.prototype.disable=_.prototype.disable,_.prototype.enable=function(){this.element_.disabled=!1},_.prototype.enable=_.prototype.enable,_.prototype.change=function(e){"undefined"!=typeof e&&(this.element_.value=e),this.updateValueStyles_()},_.prototype.change=_.prototype.change,_.prototype.init=function(){if(this.element_){if(this.isIE_){var e=document.createElement("div");e.classList.add(this.CssClasses_.IE_CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_)}else{var t=document.createElement("div");t.classList.add(this.CssClasses_.SLIDER_CONTAINER),this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_);var s=document.createElement("div");s.classList.add(this.CssClasses_.BACKGROUND_FLEX),t.appendChild(s),this.backgroundLower_=document.createElement("div"),this.backgroundLower_.classList.add(this.CssClasses_.BACKGROUND_LOWER),s.appendChild(this.backgroundLower_),this.backgroundUpper_=document.createElement("div"),this.backgroundUpper_.classList.add(this.CssClasses_.BACKGROUND_UPPER),s.appendChild(this.backgroundUpper_)}this.boundInputHandler=this.onInput_.bind(this),this.boundChangeHandler=this.onChange_.bind(this),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.boundContainerMouseDownHandler=this.onContainerMouseDown_.bind(this),this.element_.addEventListener("input",this.boundInputHandler),this.element_.addEventListener("change",this.boundChangeHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.element_.parentElement.addEventListener("mousedown",this.boundContainerMouseDownHandler),this.updateValueStyles_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},i.register({constructor:_,classAsString:"MaterialSlider",cssClass:"mdl-js-slider",widget:!0});var f=function(e){if(this.element_=e,this.textElement_=this.element_.querySelector("."+this.cssClasses_.MESSAGE),this.actionElement_=this.element_.querySelector("."+this.cssClasses_.ACTION),!this.textElement_)throw new Error("There must be a message element for a snackbar.");if(!this.actionElement_)throw new Error("There must be an action element for a snackbar.");this.active=!1,this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.queuedNotifications_=[],this.setActionHidden_(!0)};window.MaterialSnackbar=f,f.prototype.Constant_={ANIMATION_LENGTH:250},f.prototype.cssClasses_={SNACKBAR:"mdl-snackbar",MESSAGE:"mdl-snackbar__text",ACTION:"mdl-snackbar__action",ACTIVE:"mdl-snackbar--active"},f.prototype.displaySnackbar_=function(){this.element_.setAttribute("aria-hidden","true"),this.actionHandler_&&(this.actionElement_.textContent=this.actionText_,
this.actionElement_.addEventListener("click",this.actionHandler_),this.setActionHidden_(!1)),this.textElement_.textContent=this.message_,this.element_.classList.add(this.cssClasses_.ACTIVE),this.element_.setAttribute("aria-hidden","false"),setTimeout(this.cleanup_.bind(this),this.timeout_)},f.prototype.showSnackbar=function(e){if(void 0===e)throw new Error("Please provide a data object with at least a message to display.");if(void 0===e.message)throw new Error("Please provide a message to be displayed.");if(e.actionHandler&&!e.actionText)throw new Error("Please provide action text with the handler.");this.active?this.queuedNotifications_.push(e):(this.active=!0,this.message_=e.message,e.timeout?this.timeout_=e.timeout:this.timeout_=2750,e.actionHandler&&(this.actionHandler_=e.actionHandler),e.actionText&&(this.actionText_=e.actionText),this.displaySnackbar_())},f.prototype.showSnackbar=f.prototype.showSnackbar,f.prototype.checkQueue_=function(){this.queuedNotifications_.length>0&&this.showSnackbar(this.queuedNotifications_.shift())},f.prototype.cleanup_=function(){this.element_.classList.remove(this.cssClasses_.ACTIVE),setTimeout(function(){this.element_.setAttribute("aria-hidden","true"),this.textElement_.textContent="",Boolean(this.actionElement_.getAttribute("aria-hidden"))||(this.setActionHidden_(!0),this.actionElement_.textContent="",this.actionElement_.removeEventListener("click",this.actionHandler_)),this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.active=!1,this.checkQueue_()}.bind(this),this.Constant_.ANIMATION_LENGTH)},f.prototype.setActionHidden_=function(e){e?this.actionElement_.setAttribute("aria-hidden","true"):this.actionElement_.removeAttribute("aria-hidden")},i.register({constructor:f,classAsString:"MaterialSnackbar",cssClass:"mdl-js-snackbar",widget:!0});var m=function(e){this.element_=e,this.init()};window.MaterialSpinner=m,m.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},m.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},m.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),s.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var a=[s,i,n],o=0;o<a.length;o++){var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),a[o].appendChild(r)}t.appendChild(s),t.appendChild(i),t.appendChild(n),this.element_.appendChild(t)},m.prototype.createLayer=m.prototype.createLayer,m.prototype.stop=function(){this.element_.classList.remove("is-active")},m.prototype.stop=m.prototype.stop,m.prototype.start=function(){this.element_.classList.add("is-active")},m.prototype.start=m.prototype.start,m.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},i.register({constructor:m,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0});var v=function(e){this.element_=e,this.init()};window.MaterialSwitch=v,v.prototype.Constant_={TINY_TIMEOUT:.001},v.prototype.CssClasses_={INPUT:"mdl-switch__input",TRACK:"mdl-switch__track",THUMB:"mdl-switch__thumb",FOCUS_HELPER:"mdl-switch__focus-helper",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-switch__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},v.prototype.onChange_=function(e){this.updateClasses_()},v.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},v.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},v.prototype.onMouseUp_=function(e){this.blur_()},v.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},v.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},v.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},v.prototype.checkDisabled=v.prototype.checkDisabled,v.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},v.prototype.checkToggleState=v.prototype.checkToggleState,v.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},v.prototype.disable=v.prototype.disable,v.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},v.prototype.enable=v.prototype.enable,v.prototype.on=function(){this.inputElement_.checked=!0,this.updateClasses_()},v.prototype.on=v.prototype.on,v.prototype.off=function(){this.inputElement_.checked=!1,this.updateClasses_()},v.prototype.off=v.prototype.off,v.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("div");e.classList.add(this.CssClasses_.TRACK);var t=document.createElement("div");t.classList.add(this.CssClasses_.THUMB);var s=document.createElement("span");if(s.classList.add(this.CssClasses_.FOCUS_HELPER),t.appendChild(s),this.element_.appendChild(e),this.element_.appendChild(t),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.rippleContainerElement_.addEventListener("mouseup",this.boundMouseUpHandler);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(i),this.element_.appendChild(this.rippleContainerElement_)}this.boundChangeHandler=this.onChange_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.inputElement_.addEventListener("change",this.boundChangeHandler),this.inputElement_.addEventListener("focus",this.boundFocusHandler),this.inputElement_.addEventListener("blur",this.boundBlurHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},i.register({constructor:v,classAsString:"MaterialSwitch",cssClass:"mdl-js-switch",widget:!0});var E=function(e){this.element_=e,this.init()};window.MaterialTabs=E,E.prototype.Constant_={},E.prototype.CssClasses_={TAB_CLASS:"mdl-tabs__tab",PANEL_CLASS:"mdl-tabs__panel",ACTIVE_CLASS:"is-active",UPGRADED_CLASS:"is-upgraded",MDL_JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",MDL_RIPPLE_CONTAINER:"mdl-tabs__ripple-container",MDL_RIPPLE:"mdl-ripple",MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events"},E.prototype.initTabs_=function(){this.element_.classList.contains(this.CssClasses_.MDL_JS_RIPPLE_EFFECT)&&this.element_.classList.add(this.CssClasses_.MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS),this.tabs_=this.element_.querySelectorAll("."+this.CssClasses_.TAB_CLASS),this.panels_=this.element_.querySelectorAll("."+this.CssClasses_.PANEL_CLASS);for(var t=0;t<this.tabs_.length;t++)new e(this.tabs_[t],this);this.element_.classList.add(this.CssClasses_.UPGRADED_CLASS)},E.prototype.resetTabState_=function(){for(var e=0;e<this.tabs_.length;e++)this.tabs_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},E.prototype.resetPanelState_=function(){for(var e=0;e<this.panels_.length;e++)this.panels_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},E.prototype.init=function(){this.element_&&this.initTabs_()},i.register({constructor:E,classAsString:"MaterialTabs",cssClass:"mdl-js-tabs"});var C=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=C,C.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},C.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},C.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},C.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},C.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},C.prototype.onReset_=function(e){this.updateClasses_()},C.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},C.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},C.prototype.checkDisabled=C.prototype.checkDisabled,C.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},C.prototype.checkFocus=C.prototype.checkFocus,C.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},C.prototype.checkValidity=C.prototype.checkValidity,C.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},C.prototype.checkDirty=C.prototype.checkDirty,C.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},C.prototype.disable=C.prototype.disable,C.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},C.prototype.enable=C.prototype.enable,C.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},C.prototype.change=C.prototype.change,C.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},i.register({constructor:C,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0});var g=function(e){this.element_=e,this.init()};window.MaterialTooltip=g,g.prototype.Constant_={},g.prototype.CssClasses_={IS_ACTIVE:"is-active",BOTTOM:"mdl-tooltip--bottom",LEFT:"mdl-tooltip--left",RIGHT:"mdl-tooltip--right",TOP:"mdl-tooltip--top"},g.prototype.handleMouseEnter_=function(e){var t=e.target.getBoundingClientRect(),s=t.left+t.width/2,i=t.top+t.height/2,n=-1*(this.element_.offsetWidth/2),a=-1*(this.element_.offsetHeight/2);this.element_.classList.contains(this.CssClasses_.LEFT)||this.element_.classList.contains(this.CssClasses_.RIGHT)?(s=t.width/2,0>i+a?(this.element_.style.top=0,this.element_.style.marginTop=0):(this.element_.style.top=i+"px",this.element_.style.marginTop=a+"px")):0>s+n?(this.element_.style.left=0,this.element_.style.marginLeft=0):(this.element_.style.left=s+"px",this.element_.style.marginLeft=n+"px"),this.element_.classList.contains(this.CssClasses_.TOP)?this.element_.style.top=t.top-this.element_.offsetHeight-10+"px":this.element_.classList.contains(this.CssClasses_.RIGHT)?this.element_.style.left=t.left+t.width+10+"px":this.element_.classList.contains(this.CssClasses_.LEFT)?this.element_.style.left=t.left-this.element_.offsetWidth-10+"px":this.element_.style.top=t.top+t.height+10+"px",this.element_.classList.add(this.CssClasses_.IS_ACTIVE)},g.prototype.handleMouseLeave_=function(){this.element_.classList.remove(this.CssClasses_.IS_ACTIVE)},g.prototype.init=function(){if(this.element_){var e=this.element_.getAttribute("for");e&&(this.forElement_=document.getElementById(e)),this.forElement_&&(this.forElement_.hasAttribute("tabindex")||this.forElement_.setAttribute("tabindex","0"),this.boundMouseEnterHandler=this.handleMouseEnter_.bind(this),this.boundMouseLeaveHandler=this.handleMouseLeave_.bind(this),this.forElement_.addEventListener("mouseenter",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("touchend",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("mouseleave",this.boundMouseLeaveHandler,!1),window.addEventListener("touchstart",this.boundMouseLeaveHandler))}},i.register({constructor:g,classAsString:"MaterialTooltip",cssClass:"mdl-tooltip"});var b=function(e){this.element_=e,this.init()};window.MaterialLayout=b,b.prototype.Constant_={MAX_WIDTH:"(max-width: 1024px)",TAB_SCROLL_PIXELS:100,RESIZE_TIMEOUT:100,MENU_ICON:"&#xE5D2;",CHEVRON_LEFT:"chevron_left",CHEVRON_RIGHT:"chevron_right"},b.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32},b.prototype.Mode_={STANDARD:0,SEAMED:1,WATERFALL:2,SCROLL:3},b.prototype.CssClasses_={CONTAINER:"mdl-layout__container",HEADER:"mdl-layout__header",DRAWER:"mdl-layout__drawer",CONTENT:"mdl-layout__content",DRAWER_BTN:"mdl-layout__drawer-button",ICON:"material-icons",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-layout__tab-ripple-container",RIPPLE:"mdl-ripple",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",HEADER_SEAMED:"mdl-layout__header--seamed",HEADER_WATERFALL:"mdl-layout__header--waterfall",HEADER_SCROLL:"mdl-layout__header--scroll",FIXED_HEADER:"mdl-layout--fixed-header",OBFUSCATOR:"mdl-layout__obfuscator",TAB_BAR:"mdl-layout__tab-bar",TAB_CONTAINER:"mdl-layout__tab-bar-container",TAB:"mdl-layout__tab",TAB_BAR_BUTTON:"mdl-layout__tab-bar-button",TAB_BAR_LEFT_BUTTON:"mdl-layout__tab-bar-left-button",TAB_BAR_RIGHT_BUTTON:"mdl-layout__tab-bar-right-button",PANEL:"mdl-layout__tab-panel",HAS_DRAWER:"has-drawer",HAS_TABS:"has-tabs",HAS_SCROLLING_HEADER:"has-scrolling-header",CASTING_SHADOW:"is-casting-shadow",IS_COMPACT:"is-compact",IS_SMALL_SCREEN:"is-small-screen",IS_DRAWER_OPEN:"is-visible",IS_ACTIVE:"is-active",IS_UPGRADED:"is-upgraded",IS_ANIMATING:"is-animating",ON_LARGE_SCREEN:"mdl-layout--large-screen-only",ON_SMALL_SCREEN:"mdl-layout--small-screen-only"},b.prototype.contentScrollHandler_=function(){if(!this.header_.classList.contains(this.CssClasses_.IS_ANIMATING)){var e=!this.element_.classList.contains(this.CssClasses_.IS_SMALL_SCREEN)||this.element_.classList.contains(this.CssClasses_.FIXED_HEADER);this.content_.scrollTop>0&&!this.header_.classList.contains(this.CssClasses_.IS_COMPACT)?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.header_.classList.add(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING)):this.content_.scrollTop<=0&&this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.header_.classList.remove(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING))}},b.prototype.keyboardEventHandler_=function(e){e.keyCode===this.Keycodes_.ESCAPE&&this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)&&this.toggleDrawer()},b.prototype.screenSizeHandler_=function(){this.screenSizeMediaQuery_.matches?this.element_.classList.add(this.CssClasses_.IS_SMALL_SCREEN):(this.element_.classList.remove(this.CssClasses_.IS_SMALL_SCREEN),this.drawer_&&(this.drawer_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN)))},b.prototype.drawerToggleHandler_=function(e){if(e&&"keydown"===e.type){if(e.keyCode!==this.Keycodes_.SPACE&&e.keyCode!==this.Keycodes_.ENTER)return;e.preventDefault()}this.toggleDrawer()},b.prototype.headerTransitionEndHandler_=function(){this.header_.classList.remove(this.CssClasses_.IS_ANIMATING)},b.prototype.headerClickHandler_=function(){this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.IS_COMPACT),this.header_.classList.add(this.CssClasses_.IS_ANIMATING))},b.prototype.resetTabState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},b.prototype.resetPanelState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},b.prototype.toggleDrawer=function(){var e=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);this.drawer_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)?(this.drawer_.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true")):(this.drawer_.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false"))},b.prototype.toggleDrawer=b.prototype.toggleDrawer,b.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER);var s=this.element_.querySelector(":focus");this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),s&&s.focus();for(var i=this.element_.childNodes,n=i.length,a=0;n>a;a++){var o=i[a];o.classList&&o.classList.contains(this.CssClasses_.HEADER)&&(this.header_=o),o.classList&&o.classList.contains(this.CssClasses_.DRAWER)&&(this.drawer_=o),o.classList&&o.classList.contains(this.CssClasses_.CONTENT)&&(this.content_=o)}window.addEventListener("pageshow",function(e){e.persisted&&(this.element_.style.overflowY="hidden",requestAnimationFrame(function(){this.element_.style.overflowY=""}.bind(this)))}.bind(this),!1),this.header_&&(this.tabBar_=this.header_.querySelector("."+this.CssClasses_.TAB_BAR));var r=this.Mode_.STANDARD;if(this.header_&&(this.header_.classList.contains(this.CssClasses_.HEADER_SEAMED)?r=this.Mode_.SEAMED:this.header_.classList.contains(this.CssClasses_.HEADER_WATERFALL)?(r=this.Mode_.WATERFALL,this.header_.addEventListener("transitionend",this.headerTransitionEndHandler_.bind(this)),this.header_.addEventListener("click",this.headerClickHandler_.bind(this))):this.header_.classList.contains(this.CssClasses_.HEADER_SCROLL)&&(r=this.Mode_.SCROLL,e.classList.add(this.CssClasses_.HAS_SCROLLING_HEADER)),r===this.Mode_.STANDARD?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.add(this.CssClasses_.CASTING_SHADOW)):r===this.Mode_.SEAMED||r===this.Mode_.SCROLL?(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.remove(this.CssClasses_.CASTING_SHADOW)):r===this.Mode_.WATERFALL&&(this.content_.addEventListener("scroll",this.contentScrollHandler_.bind(this)),this.contentScrollHandler_())),this.drawer_){var l=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);if(!l){l=document.createElement("div"),l.setAttribute("aria-expanded","false"),l.setAttribute("role","button"),l.setAttribute("tabindex","0"),l.classList.add(this.CssClasses_.DRAWER_BTN);var c=document.createElement("i");c.classList.add(this.CssClasses_.ICON),c.innerHTML=this.Constant_.MENU_ICON,l.appendChild(c)}this.drawer_.classList.contains(this.CssClasses_.ON_LARGE_SCREEN)?l.classList.add(this.CssClasses_.ON_LARGE_SCREEN):this.drawer_.classList.contains(this.CssClasses_.ON_SMALL_SCREEN)&&l.classList.add(this.CssClasses_.ON_SMALL_SCREEN),l.addEventListener("click",this.drawerToggleHandler_.bind(this)),l.addEventListener("keydown",this.drawerToggleHandler_.bind(this)),this.element_.classList.add(this.CssClasses_.HAS_DRAWER),this.element_.classList.contains(this.CssClasses_.FIXED_HEADER)?this.header_.insertBefore(l,this.header_.firstChild):this.element_.insertBefore(l,this.content_);var u=document.createElement("div");u.classList.add(this.CssClasses_.OBFUSCATOR),this.element_.appendChild(u),u.addEventListener("click",this.drawerToggleHandler_.bind(this)),this.obfuscator_=u,this.drawer_.addEventListener("keydown",this.keyboardEventHandler_.bind(this)),this.drawer_.setAttribute("aria-hidden","true")}if(this.screenSizeMediaQuery_=window.matchMedia(this.Constant_.MAX_WIDTH),this.screenSizeMediaQuery_.addListener(this.screenSizeHandler_.bind(this)),this.screenSizeHandler_(),this.header_&&this.tabBar_){this.element_.classList.add(this.CssClasses_.HAS_TABS);var d=document.createElement("div");d.classList.add(this.CssClasses_.TAB_CONTAINER),this.header_.insertBefore(d,this.tabBar_),this.header_.removeChild(this.tabBar_);var h=document.createElement("div");h.classList.add(this.CssClasses_.TAB_BAR_BUTTON),h.classList.add(this.CssClasses_.TAB_BAR_LEFT_BUTTON);var p=document.createElement("i");p.classList.add(this.CssClasses_.ICON),p.textContent=this.Constant_.CHEVRON_LEFT,h.appendChild(p),h.addEventListener("click",function(){this.tabBar_.scrollLeft-=this.Constant_.TAB_SCROLL_PIXELS}.bind(this));var _=document.createElement("div");_.classList.add(this.CssClasses_.TAB_BAR_BUTTON),_.classList.add(this.CssClasses_.TAB_BAR_RIGHT_BUTTON);var f=document.createElement("i");f.classList.add(this.CssClasses_.ICON),f.textContent=this.Constant_.CHEVRON_RIGHT,_.appendChild(f),_.addEventListener("click",function(){this.tabBar_.scrollLeft+=this.Constant_.TAB_SCROLL_PIXELS}.bind(this)),d.appendChild(h),d.appendChild(this.tabBar_),d.appendChild(_);var m=function(){this.tabBar_.scrollLeft>0?h.classList.add(this.CssClasses_.IS_ACTIVE):h.classList.remove(this.CssClasses_.IS_ACTIVE),this.tabBar_.scrollLeft<this.tabBar_.scrollWidth-this.tabBar_.offsetWidth?_.classList.add(this.CssClasses_.IS_ACTIVE):_.classList.remove(this.CssClasses_.IS_ACTIVE)}.bind(this);this.tabBar_.addEventListener("scroll",m),m();var v=function(){this.resizeTimeoutId_&&clearTimeout(this.resizeTimeoutId_),this.resizeTimeoutId_=setTimeout(function(){m(),this.resizeTimeoutId_=null}.bind(this),this.Constant_.RESIZE_TIMEOUT)}.bind(this);window.addEventListener("resize",v),this.tabBar_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)&&this.tabBar_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS);for(var E=this.tabBar_.querySelectorAll("."+this.CssClasses_.TAB),C=this.content_.querySelectorAll("."+this.CssClasses_.PANEL),g=0;g<E.length;g++)new t(E[g],E,C,this)}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},window.MaterialLayoutTab=t,i.register({constructor:b,classAsString:"MaterialLayout",cssClass:"mdl-js-layout"});var y=function(e){this.element_=e,this.init()};window.MaterialDataTable=y,y.prototype.Constant_={},y.prototype.CssClasses_={DATA_TABLE:"mdl-data-table",SELECTABLE:"mdl-data-table--selectable",SELECT_ELEMENT:"mdl-data-table__select",IS_SELECTED:"is-selected",IS_UPGRADED:"is-upgraded"},y.prototype.selectRow_=function(e,t,s){return t?function(){e.checked?t.classList.add(this.CssClasses_.IS_SELECTED):t.classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):s?function(){var t,i;if(e.checked)for(t=0;t<s.length;t++)i=s[t].querySelector("td").querySelector(".mdl-checkbox"),i.MaterialCheckbox.check(),s[t].classList.add(this.CssClasses_.IS_SELECTED);else for(t=0;t<s.length;t++)i=s[t].querySelector("td").querySelector(".mdl-checkbox"),i.MaterialCheckbox.uncheck(),s[t].classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):void 0},y.prototype.createCheckbox_=function(e,t){var s=document.createElement("label"),n=["mdl-checkbox","mdl-js-checkbox","mdl-js-ripple-effect",this.CssClasses_.SELECT_ELEMENT];s.className=n.join(" ");var a=document.createElement("input");return a.type="checkbox",a.classList.add("mdl-checkbox__input"),e?(a.checked=e.classList.contains(this.CssClasses_.IS_SELECTED),a.addEventListener("change",this.selectRow_(a,e))):t&&a.addEventListener("change",this.selectRow_(a,null,t)),s.appendChild(a),i.upgradeElement(s,"MaterialCheckbox"),s},y.prototype.init=function(){if(this.element_){var e=this.element_.querySelector("th"),t=Array.prototype.slice.call(this.element_.querySelectorAll("tbody tr")),s=Array.prototype.slice.call(this.element_.querySelectorAll("tfoot tr")),i=t.concat(s);if(this.element_.classList.contains(this.CssClasses_.SELECTABLE)){var n=document.createElement("th"),a=this.createCheckbox_(null,i);n.appendChild(a),e.parentElement.insertBefore(n,e);for(var o=0;o<i.length;o++){var r=i[o].querySelector("td");if(r){var l=document.createElement("td");if("TBODY"===i[o].parentNode.nodeName.toUpperCase()){var c=this.createCheckbox_(i[o]);l.appendChild(c)}i[o].insertBefore(l,r)}}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}}},i.register({constructor:y,classAsString:"MaterialDataTable",cssClass:"mdl-js-data-table"});var I=function(e){this.element_=e,this.init()};window.MaterialRipple=I,I.prototype.Constant_={INITIAL_SCALE:"scale(0.0001, 0.0001)",INITIAL_SIZE:"1px",INITIAL_OPACITY:"0.4",FINAL_OPACITY:"0",FINAL_SCALE:""},I.prototype.CssClasses_={RIPPLE_CENTER:"mdl-ripple--center",RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_ANIMATING:"is-animating",IS_VISIBLE:"is-visible"},I.prototype.downHandler_=function(e){if(!this.rippleElement_.style.width&&!this.rippleElement_.style.height){var t=this.element_.getBoundingClientRect();this.boundHeight=t.height,this.boundWidth=t.width,this.rippleSize_=2*Math.sqrt(t.width*t.width+t.height*t.height)+2,this.rippleElement_.style.width=this.rippleSize_+"px",this.rippleElement_.style.height=this.rippleSize_+"px"}if(this.rippleElement_.classList.add(this.CssClasses_.IS_VISIBLE),"mousedown"===e.type&&this.ignoringMouseDown_)this.ignoringMouseDown_=!1;else{"touchstart"===e.type&&(this.ignoringMouseDown_=!0);var s=this.getFrameCount();if(s>0)return;this.setFrameCount(1);var i,n,a=e.currentTarget.getBoundingClientRect();if(0===e.clientX&&0===e.clientY)i=Math.round(a.width/2),n=Math.round(a.height/2);else{var o=e.clientX?e.clientX:e.touches[0].clientX,r=e.clientY?e.clientY:e.touches[0].clientY;i=Math.round(o-a.left),n=Math.round(r-a.top)}this.setRippleXY(i,n),this.setRippleStyles(!0),window.requestAnimationFrame(this.animFrameHandler.bind(this))}},I.prototype.upHandler_=function(e){e&&2!==e.detail&&window.setTimeout(function(){this.rippleElement_.classList.remove(this.CssClasses_.IS_VISIBLE)}.bind(this),0)},I.prototype.init=function(){if(this.element_){var e=this.element_.classList.contains(this.CssClasses_.RIPPLE_CENTER);this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT_IGNORE_EVENTS)||(this.rippleElement_=this.element_.querySelector("."+this.CssClasses_.RIPPLE),this.frameCount_=0,this.rippleSize_=0,this.x_=0,this.y_=0,this.ignoringMouseDown_=!1,this.boundDownHandler=this.downHandler_.bind(this),this.element_.addEventListener("mousedown",this.boundDownHandler),this.element_.addEventListener("touchstart",this.boundDownHandler),this.boundUpHandler=this.upHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundUpHandler),this.element_.addEventListener("mouseleave",this.boundUpHandler),this.element_.addEventListener("touchend",this.boundUpHandler),this.element_.addEventListener("blur",this.boundUpHandler),this.getFrameCount=function(){return this.frameCount_},this.setFrameCount=function(e){this.frameCount_=e},this.getRippleElement=function(){return this.rippleElement_},this.setRippleXY=function(e,t){this.x_=e,this.y_=t},this.setRippleStyles=function(t){if(null!==this.rippleElement_){var s,i,n,a="translate("+this.x_+"px, "+this.y_+"px)";t?(i=this.Constant_.INITIAL_SCALE,n=this.Constant_.INITIAL_SIZE):(i=this.Constant_.FINAL_SCALE,n=this.rippleSize_+"px",e&&(a="translate("+this.boundWidth/2+"px, "+this.boundHeight/2+"px)")),s="translate(-50%, -50%) "+a+i,this.rippleElement_.style.webkitTransform=s,this.rippleElement_.style.msTransform=s,this.rippleElement_.style.transform=s,t?this.rippleElement_.classList.remove(this.CssClasses_.IS_ANIMATING):this.rippleElement_.classList.add(this.CssClasses_.IS_ANIMATING)}},this.animFrameHandler=function(){this.frameCount_-- >0?window.requestAnimationFrame(this.animFrameHandler.bind(this)):this.setRippleStyles(!1)})}},i.register({constructor:I,classAsString:"MaterialRipple",cssClass:"mdl-js-ripple-effect",widget:!1})}()},function(e,t,s){var i,n,a=a||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,s=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in i,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},o=/constructor/i.test(e.HTMLElement),r=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",u=4e4,d=function(e){var t=function(){"string"==typeof e?s().revokeObjectURL(e):e.remove()};setTimeout(t,u)},h=function(e,t,s){t=[].concat(t);for(var i=t.length;i--;){var n=e["on"+t[i]];if("function"==typeof n)try{n.call(e,s||e)}catch(a){l(a)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},_=function v(t,l,u){u||(t=p(t));var _,v=this,f=t.type,m=f===c,E=function(){h(v,"writestart progress write writeend".split(" "))},C=function(){if((r||m&&o)&&e.FileReader){var i=new FileReader;return i.onloadend=function(){var t=r?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;"),s=e.open(t,"_blank");s||(e.location.href=t),t=void 0,v.readyState=v.DONE,E()},i.readAsDataURL(t),void(v.readyState=v.INIT)}if(_||(_=s().createObjectURL(t)),m)e.location.href=_;else{var n=e.open(_,"_blank");n||(e.location.href=_)}v.readyState=v.DONE,E(),d(_)};return v.readyState=v.INIT,n?(_=s().createObjectURL(t),void setTimeout(function(){i.href=_,i.download=l,a(i),E(),d(_),v.readyState=v.DONE})):void C()},f=_.prototype,m=function(e,t,s){return new _(e,t||e.name||"download",s)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,s){return t=t||e.name||"download",s||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);
"undefined"!=typeof e&&e.exports?e.exports.saveAs=a:null!==s(15)&&null!==s(16)&&(i=[],n=function(){return a}.apply(t,i),!(void 0!==n&&(e.exports=n)))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(){function t(e,t){b[e]||("undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("[WARNING] "+e+" is deprecated and will be removed in version 1.0. Instead, use `"+t+"`."),b[e]=!0)}function i(e){e.localize=E.localize.bind(E),e.timezone=E.timezone.bind(E),e.utc=E.utc.bind(E)}function n(e,s,i){s&&s.days&&(i=s,s=void 0),i&&t("`"+g+"(format, [date], [locale])`","var s = "+g+".localize(locale); s(format, [date])");var n=i?E.localize(i):E;return n(e,s)}function a(e,s,i){i?t("`"+g+".strftime(format, [date], [locale])`","var s = "+g+".localize(locale); s(format, [date])"):t("`"+g+".strftime(format, [date])`",g+"(format, [date])");var n=i?E.localize(i):E;return n(e,s)}function o(e,s,i,n){"number"!=typeof i&&"string"!=typeof i||null!=n||(n=i,i=void 0),i?t("`"+g+".strftimeTZ(format, date, locale, tz)`","var s = "+g+".localize(locale).timezone(tz); s(format, [date])` or `var s = "+g+".localize(locale); s.timezone(tz)(format, [date])"):t("`"+g+".strftimeTZ(format, date, tz)`","var s = "+g+".timezone(tz); s(format, [date])` or `"+g+".timezone(tz)(format, [date])");var a=(i?E.localize(i):E).timezone(n);return a(e,s)}function r(e,s,i){i?t("`"+g+".strftimeUTC(format, date, locale)`","var s = "+g+".localize(locale).utc(); s(format, [date])"):t("`"+g+".strftimeUTC(format, [date])`","var s = "+g+".utc(); s(format, [date])");var n=i?y.localize(i):y;return n(e,s)}function l(e){return t("`"+g+".localizedStrftime(locale)`",g+".localize(locale)"),E.localize(e)}function c(e,t,i){function n(e,t){var s;if(t)s=t.getTime(),m&&(t=new Date(t.getTime()+f(t)+l));else{var i=Date.now();i>E?(E=i,o=new Date(E),s=E,m&&(o=new Date(E+f(o)+l))):s=E,t=o}return a(e,t,r,s)}function a(e,t,s,i){for(var n="",o=null,r=!1,c=e.length,f=!1,v=0;v<c;v++){var E=e.charCodeAt(v);if(r!==!0)37!==E?n+=e[v]:r=!0;else{if(45===E){o="";continue}if(95===E){o=" ";continue}if(48===E){o="0";continue}if(58===E){f&&"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("[WARNING] detected use of unsupported %:: or %::: modifiers to strftime"),f=!0;continue}switch(E){case 65:n+=s.days[t.getDay()];break;case 66:n+=s.months[t.getMonth()];break;case 67:n+=u(Math.floor(t.getFullYear()/100),o);break;case 68:n+=a(s.formats.D,t,s,i);break;case 70:n+=a(s.formats.F,t,s,i);break;case 72:n+=u(t.getHours(),o);break;case 73:n+=u(h(t.getHours()),o);break;case 76:n+=d(Math.floor(i%1e3));break;case 77:n+=u(t.getMinutes(),o);break;case 80:n+=t.getHours()<12?s.am:s.pm;break;case 82:n+=a(s.formats.R,t,s,i);break;case 83:n+=u(t.getSeconds(),o);break;case 84:n+=a(s.formats.T,t,s,i);break;case 85:n+=u(p(t,"sunday"),o);break;case 87:n+=u(p(t,"monday"),o);break;case 88:n+=a(s.formats.X,t,s,i);break;case 89:n+=t.getFullYear();break;case 90:if(m&&0===l)n+="GMT";else{var C=t.toString().match(/\(([\w\s]+)\)/);n+=C&&C[1]||""}break;case 97:n+=s.shortDays[t.getDay()];break;case 98:n+=s.shortMonths[t.getMonth()];break;case 99:n+=a(s.formats.c,t,s,i);break;case 100:n+=u(t.getDate(),o);break;case 101:n+=u(t.getDate(),null==o?" ":o);break;case 104:n+=s.shortMonths[t.getMonth()];break;case 106:var g=new Date(t.getFullYear(),0,1),b=Math.ceil((t.getTime()-g.getTime())/864e5);n+=d(b);break;case 107:n+=u(t.getHours(),null==o?" ":o);break;case 108:n+=u(h(t.getHours()),null==o?" ":o);break;case 109:n+=u(t.getMonth()+1,o);break;case 110:n+="\n";break;case 111:n+=String(t.getDate())+_(t.getDate());break;case 112:n+=t.getHours()<12?s.AM:s.PM;break;case 114:n+=a(s.formats.r,t,s,i);break;case 115:n+=Math.floor(i/1e3);break;case 116:n+="\t";break;case 117:var b=t.getDay();n+=0===b?7:b;break;case 118:n+=a(s.formats.v,t,s,i);break;case 119:n+=t.getDay();break;case 120:n+=a(s.formats.x,t,s,i);break;case 121:n+=(""+t.getFullYear()).slice(2);break;case 122:if(m&&0===l)n+=f?"+00:00":"+0000";else{var y;y=0!==l?l/6e4:-t.getTimezoneOffset();var I=y<0?"-":"+",T=f?":":"",S=Math.floor(Math.abs(y/60)),L=Math.abs(y%60);n+=I+u(S)+T+u(L)}break;default:n+=e[v]}o=null,r=!1}}return n}var o,r=e||v,l=t||0,m=i||!1,E=0,C=n;return C.localize=function(e){return new c(e||r,l,m)},C.timezone=function(e){var t=l,i=m,n="undefined"==typeof e?"undefined":s(e);if("number"===n||"string"===n)if(i=!0,"string"===n){var a="-"===e[0]?-1:1,o=parseInt(e.slice(1,3),10),u=parseInt(e.slice(3,5),10);t=a*(60*o+u)*60*1e3}else"number"===n&&(t=60*e*1e3);return new c(r,t,i)},C.utc=function(){return new c(r,l,(!0))},C}function u(e,t){return""===t||e>9?e:(null==t&&(t="0"),t+e)}function d(e){return e>99?e:e>9?"0"+e:"00"+e}function h(e){return 0===e?12:e>12?e-12:e}function p(e,t){t=t||"sunday";var s=e.getDay();"monday"===t&&(0===s?s=6:s--);var i=Date.UTC(e.getFullYear(),0,1),n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),a=Math.floor((n-i)/864e5),o=(a+7-s)/7;return Math.floor(o)}function _(e){var t=e%10,s=e%100;if(s>=11&&s<=13||0===t||t>=4)return"th";switch(t){case 1:return"st";case 2:return"nd";case 3:return"rd"}}function f(e){return 6e4*(e.getTimezoneOffset()||0)}var m,v={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{D:"%m/%d/%y",F:"%Y-%m-%d",R:"%H:%M",T:"%H:%M:%S",X:"%T",c:"%a %b %d %X %Y",r:"%I:%M:%S %p",v:"%e-%b-%Y",x:"%D"}},E=new c(v,0,(!1)),C="undefined"!=typeof e;C?(m=e.exports=n,m.strftime=a):(m=function(){return this||(0,eval)("this")}(),m.strftime=n);var g=C?"require('strftime')":"strftime",b={};m.strftimeTZ=o,m.strftimeUTC=r,m.localizedStrftime=l,i(n),i(a);var y=E.utc();"function"!=typeof Date.now&&(Date.now=function(){return+new Date})}()},function(e,t,s){var i,n,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};/**!
	 * Sortable
	 * @author	RubaXa   <trash@rubaxa.org>
	 * @license MIT
	 */
!function(a){"use strict";i=a,n="function"==typeof i?i.call(t,s,t,e):i,!(void 0!==n&&(e.exports=n))}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=g({},t),e[G]=this;var s={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var i in s)!(i in t)&&(t[i]=s[i]);se(t);for(var n in this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&z,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),ee.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){S&&S.state!==e&&(c(S,"display",e?"none":""),!e&&S.state&&L.insertBefore(S,y),S.state=e)}function s(e,t,s){if(e){s=s||q;do if(">*"===t&&e.parentNode===s||E(e,t))return e;while(e=i(e))}return null}function i(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function n(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function o(e,t,s){e.addEventListener(t,s,!1)}function r(e,t,s){e.removeEventListener(t,s,!1)}function l(e,t,s){if(e)if(e.classList)e.classList[s?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(X," ").replace(" "+t+" "," ");e.className=(i+(s?" "+t:"")).replace(X," ")}}function c(e,t,s){var i=e&&e.style;if(i){if(void 0===s)return q.defaultView&&q.defaultView.getComputedStyle?s=q.defaultView.getComputedStyle(e,""):e.currentStyle&&(s=e.currentStyle),void 0===t?s:s[t];t in i||(t="-webkit-"+t),i[t]=s+("string"==typeof s?"":"px")}}function u(e,t,s){if(e){var i=e.getElementsByTagName(t),n=0,a=i.length;if(s)for(;n<a;n++)s(i[n],n);return i}return[]}function d(e,t,s,i,n,a,o){e=e||t[G];var r=q.createEvent("Event"),l=e.options,c="on"+s.charAt(0).toUpperCase()+s.substr(1);r.initEvent(s,!0,!0),r.to=t,r.from=n||t,r.item=i||t,r.clone=S,r.oldIndex=a,r.newIndex=o,t.dispatchEvent(r),l[c]&&l[c].call(e,r)}function h(e,t,s,i,n,a,o){var r,l,c=e[G],u=c.options.onMove;return r=q.createEvent("Event"),r.initEvent("move",!0,!0),r.to=t,r.from=e,r.dragged=s,r.draggedRect=i,r.related=n||t,r.relatedRect=a||t.getBoundingClientRect(),e.dispatchEvent(r),u&&(l=u.call(c,r,o)),l}function p(e){e.draggable=!1}function _(){J=!1}function f(e,t){var s=e.lastElementChild,i=s.getBoundingClientRect();return(t.clientY-(i.top+i.height)>5||t.clientX-(i.right+i.width)>5)&&s}function m(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,s=t.length,i=0;s--;)i+=t.charCodeAt(s);return i.toString(36)}function v(e,t){var s=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!E(e,t)||s++;return s}function E(e,t){if(e){t=t.split(".");var s=t.shift().toUpperCase(),i=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==s&&e.nodeName.toUpperCase()!=s||t.length&&((" "+e.className+" ").match(i)||[]).length!=t.length)}return!1}function C(e,t){var s,i;return function(){void 0===s&&(s=arguments,i=this,setTimeout(function(){1===s.length?e.call(i,s[0]):e.apply(i,s),s=void 0},t))}}function g(e,t){if(e&&t)for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}function b(e){return j?j(e).clone(!0)[0]:K&&K.dom?K.dom(e).cloneNode(!0):e.cloneNode(!0)}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var y,I,T,S,L,D,w,A,R,N,P,O,k,U,M,x,H,F,B,V={},X=/\s+/g,G="Sortable"+(new Date).getTime(),W=window,q=W.document,Y=W.parseInt,j=W.jQuery||W.Zepto,K=W.Polymer,z=!!("draggable"in q.createElement("div")),Z=function(e){return!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(e=q.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}(),J=!1,Q=Math.abs,$=Math.min,ee=([].slice,[]),te=C(function(e,t,s){if(s&&t.scroll){var i,n,a,o,r,l,c=t.scrollSensitivity,u=t.scrollSpeed,d=e.clientX,h=e.clientY,p=window.innerWidth,_=window.innerHeight;if(A!==s&&(w=t.scroll,A=s,R=t.scrollFn,w===!0)){w=s;do if(w.offsetWidth<w.scrollWidth||w.offsetHeight<w.scrollHeight)break;while(w=w.parentNode)}w&&(i=w,n=w.getBoundingClientRect(),a=(Q(n.right-d)<=c)-(Q(n.left-d)<=c),o=(Q(n.bottom-h)<=c)-(Q(n.top-h)<=c)),a||o||(a=(p-d<=c)-(d<=c),o=(_-h<=c)-(h<=c),(a||o)&&(i=W)),V.vx===a&&V.vy===o&&V.el===i||(V.el=i,V.vx=a,V.vy=o,clearInterval(V.pid),i&&(V.pid=setInterval(function(){return l=o?o*u:0,r=a?a*u:0,"function"==typeof R?R.call(_this,r,l,e):void(i===W?W.scrollTo(W.pageXOffset+r,W.pageYOffset+l):(i.scrollTop+=l,i.scrollLeft+=r))},24)))}},30),se=function(e){function t(e,t){return void 0!==e&&e!==!0||(e=s.name),"function"==typeof e?e:function(s,i){var n=i.options.group.name;return t?e:e&&(e.join?e.indexOf(n)>-1:n==e)}}var s={},i=e.group;i&&"object"==("undefined"==typeof i?"undefined":a(i))||(i={name:i}),s.name=i.name,s.checkPull=t(i.pull,!0),s.checkPut=t(i.put),e.group=s};return e.prototype={constructor:e,_onTapStart:function(e){var t,i=this,n=this.el,a=this.options,o=e.type,r=e.touches&&e.touches[0],l=(r||e).target,c=e.target.shadowRoot&&e.path[0]||l,u=a.filter;if(!y&&!("mousedown"===o&&0!==e.button||a.disabled)&&(!a.handle||s(c,a.handle,n))&&(l=s(l,a.draggable,n))){if(t=v(l,a.draggable),"function"==typeof u){if(u.call(this,e,l,this))return d(i,c,"filter",l,n,t),void e.preventDefault()}else if(u&&(u=u.split(",").some(function(e){if(e=s(c,e.trim(),n))return d(i,e,"filter",l,n,t),!0})))return void e.preventDefault();this._prepareDragStart(e,r,l,t)}},_prepareDragStart:function(e,t,s,i){var n,a=this,r=a.el,c=a.options,h=r.ownerDocument;s&&!y&&s.parentNode===r&&(H=e,L=r,y=s,I=y.parentNode,D=y.nextSibling,M=c.group,k=i,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,y.style["will-change"]="transform",n=function(){a._disableDelayedDrag(),y.draggable=a.nativeDraggable,l(y,c.chosenClass,!0),a._triggerDragStart(t),d(a,L,"choose",y,L,k)},c.ignore.split(",").forEach(function(e){u(y,e.trim(),p)}),o(h,"mouseup",a._onDrop),o(h,"touchend",a._onDrop),o(h,"touchcancel",a._onDrop),c.delay?(o(h,"mouseup",a._disableDelayedDrag),o(h,"touchend",a._disableDelayedDrag),o(h,"touchcancel",a._disableDelayedDrag),o(h,"mousemove",a._disableDelayedDrag),o(h,"touchmove",a._disableDelayedDrag),a._dragStartTimer=setTimeout(n,c.delay)):n())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(e,"mouseup",this._disableDelayedDrag),r(e,"touchend",this._disableDelayedDrag),r(e,"touchcancel",this._disableDelayedDrag),r(e,"mousemove",this._disableDelayedDrag),r(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(H={target:y,clientX:e.clientX,clientY:e.clientY},this._onDragStart(H,"touch")):this.nativeDraggable?(o(y,"dragend",this),o(L,"dragstart",this._onDragStart)):this._onDragStart(H,!0);try{q.selection?setTimeout(function(){q.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){if(L&&y){var t=this.options;l(y,t.ghostClass,!0),l(y,t.dragClass,!1),e.active=this,d(this,L,"start",y,L,k)}},_emulateDragOver:function(){if(F){if(this._lastX===F.clientX&&this._lastY===F.clientY)return;this._lastX=F.clientX,this._lastY=F.clientY,Z||c(T,"display","none");var e=q.elementFromPoint(F.clientX,F.clientY),t=e,s=ee.length;if(t)do{if(t[G]){for(;s--;)ee[s]({clientX:F.clientX,clientY:F.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);Z||c(T,"display","")}},_onTouchMove:function(t){if(H){var s=this.options,i=s.fallbackTolerance,n=s.fallbackOffset,a=t.touches?t.touches[0]:t,o=a.clientX-H.clientX+n.x,r=a.clientY-H.clientY+n.y,l=t.touches?"translate3d("+o+"px,"+r+"px,0)":"translate("+o+"px,"+r+"px)";if(!e.active){if(i&&$(Q(a.clientX-this._lastX),Q(a.clientY-this._lastY))<i)return;this._dragStarted()}this._appendGhost(),B=!0,F=a,c(T,"webkitTransform",l),c(T,"mozTransform",l),c(T,"msTransform",l),c(T,"transform",l),t.preventDefault()}},_appendGhost:function(){if(!T){var e,t=y.getBoundingClientRect(),s=c(y),i=this.options;T=y.cloneNode(!0),l(T,i.ghostClass,!1),l(T,i.fallbackClass,!0),l(T,i.dragClass,!0),c(T,"top",t.top-Y(s.marginTop,10)),c(T,"left",t.left-Y(s.marginLeft,10)),c(T,"width",t.width),c(T,"height",t.height),c(T,"opacity","0.8"),c(T,"position","fixed"),c(T,"zIndex","100000"),c(T,"pointerEvents","none"),i.fallbackOnBody&&q.body.appendChild(T)||L.appendChild(T),e=T.getBoundingClientRect(),c(T,"width",2*t.width-e.width),c(T,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var s=e.dataTransfer,i=this.options;this._offUpEvents(),"clone"==M.checkPull(this,this,y,e)&&(S=b(y),c(S,"display","none"),L.insertBefore(S,y),d(this,L,"clone",y)),l(y,i.dragClass,!0),t?("touch"===t?(o(q,"touchmove",this._onTouchMove),o(q,"touchend",this._onDrop),o(q,"touchcancel",this._onDrop)):(o(q,"mousemove",this._onTouchMove),o(q,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(s&&(s.effectAllowed="move",i.setData&&i.setData.call(this,s,y)),o(q,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(i){var n,a,o,r,l=this.el,u=this.options,d=u.group,p=e.active,m=M===d,v=u.sort;if(void 0!==i.preventDefault&&(i.preventDefault(),!u.dragoverBubble&&i.stopPropagation()),B=!0,M&&!u.disabled&&(m?v||(r=!L.contains(y)):x===this||M.checkPull(this,p,y,i)&&d.checkPut(this,p,y,i))&&(void 0===i.rootEl||i.rootEl===this.el)){if(te(i,u,this.el),J)return;if(n=s(i.target,u.draggable,l),a=y.getBoundingClientRect(),x=this,r)return t(!0),I=L,void(S||D?L.insertBefore(y,S||D):v||L.appendChild(y));if(0===l.children.length||l.children[0]===T||l===i.target&&(n=f(l,i))){if(n){if(n.animated)return;o=n.getBoundingClientRect()}t(m),h(L,l,y,a,n,o,i)!==!1&&(y.contains(l)||(l.appendChild(y),I=l),this._animate(a,y),n&&this._animate(o,n))}else if(n&&!n.animated&&n!==y&&void 0!==n.parentNode[G]){N!==n&&(N=n,P=c(n),O=c(n.parentNode)),o=n.getBoundingClientRect();var E,C=o.right-o.left,g=o.bottom-o.top,b=/left|right|inline/.test(P.cssFloat+P.display)||"flex"==O.display&&0===O["flex-direction"].indexOf("row"),w=n.offsetWidth>y.offsetWidth,A=n.offsetHeight>y.offsetHeight,R=(b?(i.clientX-o.left)/C:(i.clientY-o.top)/g)>.5,k=n.nextElementSibling,U=h(L,l,y,a,n,o,i);if(U!==!1){if(J=!0,setTimeout(_,30),t(m),1===U||U===-1)E=1===U;else if(b){var H=y.offsetTop,F=n.offsetTop;E=H===F?n.previousElementSibling===y&&!w||R&&w:n.previousElementSibling===y||y.previousElementSibling===n?(i.clientY-o.top)/g>.5:F>H}else E=k!==y&&!A||R&&A;y.contains(l)||(E&&!k?l.appendChild(y):n.parentNode.insertBefore(y,E?k:n)),I=y.parentNode,this._animate(a,y),this._animate(o,n)}}}},_animate:function(e,t){var s=this.options.animation;if(s){var i=t.getBoundingClientRect();c(t,"transition","none"),c(t,"transform","translate3d("+(e.left-i.left)+"px,"+(e.top-i.top)+"px,0)"),t.offsetWidth,c(t,"transition","all "+s+"ms"),c(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){c(t,"transition",""),c(t,"transform",""),t.animated=!1},s)}},_offUpEvents:function(){var e=this.el.ownerDocument;r(q,"touchmove",this._onTouchMove),r(e,"mouseup",this._onDrop),r(e,"touchend",this._onDrop),r(e,"touchcancel",this._onDrop)},_onDrop:function(t){var s=this.el,i=this.options;clearInterval(this._loopId),clearInterval(V.pid),clearTimeout(this._dragStartTimer),r(q,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(q,"drop",this),r(s,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(B&&(t.preventDefault(),!i.dropBubble&&t.stopPropagation()),T&&T.parentNode.removeChild(T),y&&(this.nativeDraggable&&r(y,"dragend",this),p(y),y.style["will-change"]="",l(y,this.options.ghostClass,!1),l(y,this.options.chosenClass,!1),L!==I?(U=v(y,i.draggable),U>=0&&(d(null,I,"add",y,L,k,U),d(this,L,"remove",y,L,k,U),d(null,I,"sort",y,L,k,U),d(this,L,"sort",y,L,k,U))):(S&&S.parentNode.removeChild(S),y.nextSibling!==D&&(U=v(y,i.draggable),U>=0&&(d(this,L,"update",y,L,k,U),d(this,L,"sort",y,L,k,U)))),e.active&&(null!=U&&U!==-1||(U=k),d(this,L,"end",y,L,k,U),this.save()))),this._nulling()},_nulling:function(){L=y=I=T=D=S=w=A=H=F=B=U=N=P=x=M=e.active=null},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?y&&(this._onDragOver(e),n(e)):"drop"!==t&&"dragend"!==t||this._onDrop(e)},toArray:function(){for(var e,t=[],i=this.el.children,n=0,a=i.length,o=this.options;n<a;n++)e=i[n],s(e,o.draggable,this.el)&&t.push(e.getAttribute(o.dataIdAttr)||m(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,n){var a=i.children[n];s(a,this.options.draggable,i)&&(t[e]=a)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return s(e,t||this.options.draggable,this.el)},option:function(e,t){var s=this.options;return void 0===t?s[e]:(s[e]=t,void("group"===e&&se(s)))},destroy:function(){var e=this.el;e[G]=null,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),ee.splice(ee.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:o,off:r,css:c,find:u,is:function(e,t){return!!s(e,t,e)},extend:g,throttle:C,closest:s,toggleClass:l,clone:b,index:v},e.create=function(t,s){return new e(t,s)},e.version="1.4.2",e})},function(e,t,s){"use strict";var i=s(20);"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js").then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){switch(t.state){case"installed":if(navigator.serviceWorker.controller){var e={message:"A new configurator version is available",timeout:5e3,actionHandler:function(){window.location.reload()},actionText:"Update"};i.showSnackbar(e)}else i.showToast("The configurator is now able to operate offline!",5e3);break;case"redundant":console.log("The installing service worker became redundant.")}}}})["catch"](function(e){console.log("Error during service worker registration:",e)})},function(e,t){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){e&&(e.cancelBubble=!0)}function n(e,t){var s=new CustomEvent(e,{detail:t,cancelable:!1});document.dispatchEvent(s)}function a(){var e=0,t=0;do if(e=history.length,history.pushState(null,"","#/"),t++,t>100)break;while(e!==history.length||t<history.length)}function o(e){var t=e.toString(16);return t.length<2?"0"+t:t}function r(e){for(var t="",s=0;s<e.length;s++){var i="0"+e[s].toString(16);t+=i.slice(-2)}return t}function l(e){for(var t=e.length/2,s=new Uint8ClampedArray(t),i=0;i<t;i++)s[i]=parseInt(e.substr(2*i,2),16);return s}function c(e){var t="";return t+=o(e[0]),t+=o(e[1]),t+="-",t+=o(e[2]),t+=o(e[3]),t+="-",t+=o(e[4]),t+=o(e[5]),t+="-",t+=o(e[6]),t+=o(e[7])}function u(e){var t=new Uint8Array(8);return t[0]=parseInt(e.slice(0,2),16),t[1]=parseInt(e.slice(2,4),16),t[2]=parseInt(e.slice(5,7),16),t[3]=parseInt(e.slice(7,9),16),t[4]=parseInt(e.slice(10,12),16),t[5]=parseInt(e.slice(12,14),16),t[6]=parseInt(e.slice(15,17),16),t[7]=parseInt(e.slice(17,19),16),t}function d(e){for(var t="",s=0;s<e.length;s++){var i=e[s];if(0===i)return t;t+=String.fromCharCode(i)}return t}function h(e,t){for(var s=new Uint8ClampedArray(t),i=e.length<t?e.length:t,n=0;n<i;n++)s[n]=e.charCodeAt(n);return s}function p(e){return!isNaN(parseInt(e))}function _(e){return"[object Array]"===Object.prototype.toString.call(e)}function f(e){return"[object String]"===Object.prototype.toString.call(e)}function m(e){return"undefined"!=typeof e}function v(e){C(".app-page"),g("#page_"+e)}function E(e,t,s){var i="hidden",n=[];f(e)?(s=s||document,n=s.querySelectorAll(e)):n.push(e);for(var a=0;a<n.length;++a)t?n[a].classList.remove(i):n[a].classList.add(i)}function C(e,t){E(e,!1,t)}function g(e,t){E(e,!0,t)}function b(e){for(var t=e.querySelector(".can-delete");t;)t.parentNode.removeChild(t),t=e.querySelector(".can-delete")}function y(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function I(e){var t=["#"];return t=t.concat(e),Device.MODEL&&Device.MODEL.uuid&&(t.push("m"),t.push(Device.MODEL.uuid)),Device.TX&&Device.TX.uuid&&(t.push("t"),t.push(Device.TX.uuid)),t.join("/")}function T(e,t){var s=new DataView(e.buffer,t);return s.getUint16(0,!0)}function S(e,t){var s=new DataView(e.buffer,t);return s.getUint32(0,!0)}function L(e,t){var s=new DataView(e.buffer,t);return s.getInt16(0,!0)}function D(e,t){var s=new DataView(e.buffer,t);return s.getInt32(0,!0)}function w(e,t,s){var i=new DataView(e.buffer,s);return i.setUint16(0,t,!0)}function A(e,t,s){var i=new DataView(e.buffer,s);return i.setUint32(0,t,!0)}function R(e,t,s){var i=new DataView(e.buffer,s);return i.setInt16(0,t,!0)}function N(e,t,s){var i=new DataView(e.buffer,s);return i.setInt32(0,t,!0)}function P(){var e=new Uint8Array(8),t=window.crypto||window.msCrypto;return t.getRandomValues(e),c(e)}function O(){var e=new Uint8Array(5),t=window.crypto||window.msCrypto;return t.getRandomValues(e),Array.from(e)}function k(){var e=new Uint8Array(2),t=window.crypto||window.msCrypto;do t.getRandomValues(e);while(0===e[1]||e[1]>127);return e}function U(e){var t=["0000-0000-0000-0000","ffff-ffff-ffff-ffff"],s=/^[\da-f]{4}\-[\da-f]{4}\-[\da-f]{4}\-[\da-f]{4}$/i;return!!(s.test(e)&&t.indexOf(e.toLowerCase())<0)}function M(e,t){var s="";t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<e;i++){var n=Math.floor(Math.random()*t.length);s+=t.substring(n,n+1)}return s}function x(e,t){var s=document.querySelector("#app-toast");s.MaterialSnackbar.showSnackbar({message:e,timeout:t})}function H(e){var t=document.querySelector("#app-toast");t.MaterialSnackbar.showSnackbar(e)}function F(){var e=document.querySelector("#app-toast");e.MaterialSnackbar&&e.MaterialSnackbar.active&&e.MaterialSnackbar.cleanup_()}Object.defineProperty(t,"__esModule",{value:!0});var B=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}();t.cancelBubble=i,t.sendCustomEvent=n,t.rollbackHistoryToRoot=a,t.byte2string=o,t.hexlify=r,t.unhexlify=l,t.uuid2string=c,t.string2uuid=u,t.uint8array2string=d,t.string2uint8array=h,t.isNumber=p,t.isArray=_,t.isString=f,t.isDefined=m,t.showPage=v,t.setVisibility=E,t.hide=C,t.show=g,t.clearDynamicElements=b,t.removeChildren=y,t.buildURL=I,t.getUint16=T,t.getUint32=S,t.getInt16=L,t.getInt32=D,t.setUint16=w,t.setUint32=A,t.setInt16=R,t.setInt32=N,t.newUUID=P,t.newRandomAddress=O,t.newHopChannelLFSR=k,t.isValidUUID=U,t.randomString=M,t.showToast=x,t.showSnackbar=H,t.cancelSnackbar=F;var V=function(){function e(){s(this,e),this.topics={}}return B(e,[{key:"getTopic",value:function(e){return this.topics[e]=this.topics[e]||[],this.topics[e]}},{key:"subscribe",value:function(e,t){this.getTopic(e).push(t)}},{key:"publish",value:function(e,t){this.getTopic(e).forEach(function(e){e(t)})}},{key:"unsubscribe",value:function(e,t){var s=this.getTopic(e),i=s.indexOf(t);delete s[i]}},{key:"removeTopic",value:function(e){delete this.topics[e]}}]),e}();window.PubSub=window.PubSub||new V;t.PubSub=window.PubSub},function(e,t){},,function(e,t,s){e.exports=s.p+"favicon.ico"},function(e,t,s){e.exports=s.p+"laneboysrc-logo-144.png"},function(e,t,s){e.exports=s.p+"laneboysrc-logo-192.png"},function(e,t,s){"use strict";String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var s=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>s.length)&&(t=s.length),t-=e.length;var i=s.lastIndexOf(e,t);return i!==-1&&i===t}),function(e){if("content"in e.createElement("template"))return!1;for(var t,s,i,n=e.getElementsByTagName("template"),a=n.length,o=0;o<a;++o){for(t=n[o],s=t.childNodes,i=e.createDocumentFragment();s[0];)i.appendChild(s[0]);t.content=i}}(document),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},s=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,n=function(e){var t=s(e);return Math.min(Math.max(t,0),i)};return function(e){var s=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,o=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var r,l=n(i.length),c=t(s)?Object(new s(l)):new Array(l),u=0;u<l;)r=i[u],o?c[u]="undefined"==typeof a?o(r,u):o.call(a,r,u):c[u]=r,u+=1;return c.length=l,c}}()),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){function s(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;for(var a=0|t,o=Math.max(a>=0?a:n-Math.abs(a),0);o<n;){if(s(i[o],e))return!0;o++}return!1}}),s(27),s(28),s(29),s(30),s(32),s(33),s(34),s(38),s(40),s(41),s(42),s(43),s(44),s(45),s(46),s(47),s(48),s(49),s(50),s(51),s(52),s(53),s(54),s(55),s(56)},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=function(){function e(){i(this,e),this.ws=void 0,this.maxPacketsInTransit=1,this.pending=[],this.inTransit=[],this.timeout=null,this.opening=!1,this._initPotentialBridges()}return n(e,[{key:"open",value:function(){this.ws||(this.opening=!0,this.bridges.index=0,this._openURL(this.bridges.locations[this.bridges.index]))}},{key:"_openURL",value:function(e){this.ws=new WebSocket(e),this.maxPacketsInTransit=1,this.ws.onopen=this._onopen.bind(this),this.ws.onmessage=this._onmessage.bind(this),this.ws.onclose=this._onclose.bind(this),this.ws.onerror=this._onerror.bind(this),this.timeout=window.setTimeout(this._ontimeout.bind(this),1e3),console.log("Websocket open",this.ws.url)}},{key:"close",value:function(){this.opening=!1,this.ws?(console.log("Websocket close",this.ws.url),this.ws.close()):console.log("Websocket close (this.ws is false)")}},{key:"send",value:function(e){var t=this;if(!(e instanceof Uint8Array))throw new Error("WS: packet is not of type Uint8Array");return new Promise(function(s,i){if(e[0]===Device.CFG_WRITE)for(var n=0;n<t.pending.length;n++){var a=t.pending[n];if(a.packet[0]===Device.CFG_WRITE&&a.packet.length===e.length&&a.packet[1]===e[1]&&a.packet[2]===e[2]){var o=[Device.TX_WRITE_SUCCESSFUL,a.packet[1],a.packet[2],a.packet.length-3];a.promise.resolve(o),t.pending.splice(n,1),--n}}t.pending.push({packet:e,promise:{resolve:s,reject:i}}),t._sendCfgPacket()})}},{key:"_sendCfgPacket",value:function(){if(!(this.inTransit.length>=this.maxPacketsInTransit)&&this.pending.length){var e=this.pending.shift();this.inTransit.push(e),this.ws.send(a.hexlify(e.packet))}}},{key:"_packetsMatch",value:function(e,t){if(t[0]===Device.TX_REQUESTED_DATA&&e.packet[0]===Device.CFG_READ){for(var s=1;s<3;s++)if(t[s]!==e.packet[s])return!1;return t.length-3===e.packet[3]}if(t[0]===Device.TX_WRITE_SUCCESSFUL&&e.packet[0]===Device.CFG_WRITE){for(var i=1;i<3;i++)if(t[i]!==e.packet[i])return!1;return e.packet.length-3===t[3]}if(t[0]===Device.TX_COPY_SUCCESSFUL&&e.packet[0]===Device.CFG_COPY){for(var n=1;n<7;n++)if(t[n]!==e.packet[n])return!1;return!0}return!1}},{key:"_resolvePromises",value:function(e){if(e[0]===Device.WS_MAX_PACKETS_IN_TRANSIT)return void(e[1]>1&&(this.maxPacketsInTransit=e[1]));for(var t=0;t<this.inTransit.length;t++){var s=this.inTransit[t];if(s.packet[0]===Device.CFG_WRITE||s.packet[0]===Device.CFG_READ||s.packet[0]===Device.CFG_COPY){if(this._packetsMatch(s,e))return s.promise.resolve(e),void this.inTransit.splice(t,1)}else s.promise.resolve(e),this.inTransit.splice(t,1),--t}}},{key:"_cancelTimeout",value:function(){this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}},{key:"_ontimeout",value:function(){console.log("Websocket timeout",this.ws.url),this.timeout=null,this.ws.close()}},{key:"_onopen",value:function(){console.log("Websocket opened",this.ws.url),this.opening=!1,this._cancelTimeout(),a.sendCustomEvent("ws-open")}},{key:"_onerror",value:function(e){console.log("Websocket error",this.ws.url),this.opening||a.sendCustomEvent("ws-error",e)}},{key:"_onclose",value:function(){console.log("Websocket closed",this.ws.url),this._cancelTimeout(),this.ws=void 0;for(var e=this.inTransit.shift();e;)e.promise.reject("Websocket closed"),e=this.inTransit.shift();for(e=this.pending.shift();e;)e.promise.reject("Websocket closed"),e=this.pending.shift();this.opening&&this.bridges.index<this.bridges.locations.length-1?(++this.bridges.index,this._openURL(this.bridges.locations[this.bridges.index])):(this.opening=!1,a.sendCustomEvent("ws-close"))}},{key:"_onmessage",value:function(e){if(!(e.data instanceof Blob)){var t=a.unhexlify(e.data);return t[0]===Device.TX_INFO?Device.onLiveMessage(t):t[0]===Device.TX_FREE_TO_CONNECT?DeviceList.transmitterFreeToConnect(t):this._resolvePromises(t),void this._sendCfgPacket()}var s=new FileReader,i=this;s.addEventListener("loadend",function(){var e=new Uint8Array(s.result);e[0]===Device.TX_INFO?Device.onLiveMessage(e):e[0]===Device.TX_FREE_TO_CONNECT?DeviceList.transmitterFreeToConnect(e):i._resolvePromises(e),i._sendCfgPacket()}),s.readAsArrayBuffer(e.data)}},{key:"_initPotentialBridges",value:function(){this.bridges={locations:[],index:0};var e="https:"===window.location.protocol,t=this.bridges.locations;t.push("wss://192.168.4.1/ws"),e||t.push("ws://192.168.4.1:9706/");var s=window.location.hostname;s.endsWith(".github.io")||t.push("ws://"+s+":9706/")}}]),e}();window.WebsocketProtocol=new o},function(e,t){"use strict";var s={1:{CONFIG:{t:"CONFIG",o:0,s:4476,c:1,VERSION:{o:0,s:4,c:1,t:"u"},TX:{o:4,s:1588,c:1,t:"s"},MODEL:{o:1592,s:2884,c:1,t:"s"}},TX:{o:4,s:1588,c:1,t:"TX",UUID:{t:"uuid",o:0,s:1,c:8},NAME:{t:"c",o:8,s:1,c:16},LAST_CHANGED:{t:"u",o:24,s:4,c:1},TAG:{t:"u",o:28,s:4,c:1},HARDWARE_INPUTS:{t:"s",o:32,s:28,c:32},HARDWARE_INPUTS_PCB_INPUT:{t:"s",o:32,s:20,c:1},HARDWARE_INPUTS_PCB_INPUT_GPIOPORT:{t:"u",o:32,s:4,c:1},HARDWARE_INPUTS_PCB_INPUT_GPIO:{t:"u",o:36,s:2,c:1},HARDWARE_INPUTS_PCB_INPUT_ADC_CHANNEL:{t:"u",o:38,s:1,c:1},HARDWARE_INPUTS_PCB_INPUT_TYPE:{t:"pcb_input_type_t",o:39,s:1,c:1},HARDWARE_INPUTS_PCB_INPUT_PIN_NAME:{t:"c",o:40,s:1,c:10},HARDWARE_INPUTS_TYPE:{t:"hardware_input_type_t",o:52,s:1,c:1},HARDWARE_INPUTS_CALIBRATION:{t:"u",o:54,s:2,c:3},LOGICAL_INPUTS:{t:"s",o:928,s:20,c:32},LOGICAL_INPUTS_TYPE:{t:"input_type_t",h:"Input type",o:928,s:1,c:1},LOGICAL_INPUTS_SUB_TYPE:{t:"input_sub_type_t",h:"Push-button behavior",o:929,s:1,c:1},LOGICAL_INPUTS_POSITION_COUNT:{t:"u",o:930,s:1,c:1},LOGICAL_INPUTS_HARDWARE_INPUTS:{t:"u",h:"Hardware inputs",o:931,s:1,c:12},LOGICAL_INPUTS_LABELS:{t:"input_label_t",h:"Input labels",o:943,s:1,c:5},TRIM_RANGE:{t:"i",o:1568,s:4,c:1},TRIM_STEP_SIZE:{t:"i",o:1572,s:4,c:1},BIND_TIMEOUT_MS:{t:"u",o:1576,s:4,c:1},DOUBLE_CLICK_TIMEOUT_MS:{t:"u",o:1580,s:4,c:1},PASSPHRASE:{t:"u",o:1584,s:2,c:1},LED_PWM_PERCENT:{t:"u",o:1586,s:1,c:1},METER_PWM_PERCENT:{t:"u",o:1587,s:1,c:1}},MODEL:{o:1592,s:2884,c:1,t:"MODEL",UUID:{t:"uuid",o:0,s:1,c:8},NAME:{t:"c",o:8,s:1,c:16},LAST_CHANGED:{t:"u",o:24,s:4,c:1},TAG:{t:"u",o:28,s:4,c:1},MIXER_UNITS:{t:"s",o:32,s:26,c:100},MIXER_UNITS_CURVE:{t:"s",o:32,s:15,c:1},MIXER_UNITS_CURVE_TYPE:{t:"curve_type_t",o:32,s:1,c:1},MIXER_UNITS_CURVE_SMOOTHING:{t:"interpolation_type_t",o:33,s:1,c:1},MIXER_UNITS_CURVE_POINTS:{t:"i",o:34,s:1,c:13},MIXER_UNITS_SRC:{t:"src_label_t",h:"Source",o:47,s:1,c:1},MIXER_UNITS_DST:{t:"channel_label_t",h:"Destination",o:48,s:1,c:1},MIXER_UNITS_SW:{t:"s",o:49,s:3,c:1},MIXER_UNITS_SW_SW:{t:"switch_label_t",h:"Switch",o:49,s:1,c:1},MIXER_UNITS_SW_CMP:{t:"comparison_t",h:"Comparison",o:50,s:1,c:1},MIXER_UNITS_SW_VALUE:{t:"u",o:51,s:1,c:1},MIXER_UNITS_OP:{t:"operation_type_t",h:"Operation",o:52,s:1,c:1},MIXER_UNITS_SCALAR:{t:"i",o:53,s:1,c:1},MIXER_UNITS_OFFSET:{t:"i",o:54,s:1,c:1},MIXER_UNITS_TAG:{t:"u",o:57,s:1,c:1},MIXER_UNITS_INVERT_SOURCE:{t:"u",o:55,s:1,c:1},MIXER_UNITS_APPLY_TRIM:{t:"u",o:56,s:1,c:1},LIMITS:{t:"s",o:2632,s:28,c:8},LIMITS_EP_L:{t:"i",o:2632,s:4,c:1},LIMITS_EP_H:{t:"i",o:2636,s:4,c:1},LIMITS_SUBTRIM:{t:"i",o:2640,s:4,c:1},LIMITS_LIMIT_L:{t:"i",o:2644,s:4,c:1},LIMITS_LIMIT_H:{t:"i",o:2648,s:4,c:1},LIMITS_FAILSAFE:{t:"i",o:2652,s:4,c:1},LIMITS_SPEED:{t:"u",o:2656,s:1,c:1},LIMITS_INVERT:{t:"u",o:2657,s:1,c:1},RF_PROTOCOL_TYPE:{t:"rf_protocol_type_t",o:2856,s:1,c:1},RF:{t:"s",o:2857,s:25,c:1},RF_PROTOCOL_HK310:{t:"s",o:2857,s:25,c:1},RF_PROTOCOL_HK310_HOP_CHANNELS:{t:"u",o:2857,s:1,c:20},RF_PROTOCOL_HK310_ADDRESS:{t:"u",o:2877,s:1,c:5}},TYPES:{pcb_input_type_t:{"Analog/Digital":1,Digital:2},hardware_input_type_t:{"Input not used":0,"Analog, returns to center":1,"Analog, center detent":2,Analog:3,"Analog, positive only":4,"On/Off switch":5,"On/Off/On switch":6,"Push-button":7},hardware_input_type_t_digital:{"Input not used":0,"On/Off switch":5,"On/Off/On switch":6,"Push-button":7},input_type_t:{Analog:1,Switch:2,"BCD switch":3,"Momentary switch":4,Trim:5},input_sub_type_t:{"Up/Down buttons":1,"Increment-and-loop":2,"Decrement-and-loop":3,Sawtooth:4,"Double-click for decrement":5},input_label_t:{ST:1,TH:2,THR:3,RUD:4,AIL:5,ELE:6,AUX:7,"ST-DR":8,"RUD-DR":9,"AIL-DR":10,"ELE-DR":11,"TH-DR":12,"THR-DR":13,"TH-HOLD":14,GEAR:15,FLAPS:16,TRAINER:17,"SIDE-L":18,"SIDE-R":19,POT1:20,POT2:21,POT3:22,POT4:23,POT5:24,POT6:25,POT7:26,POT8:27,POT9:28,SW1:29,SW2:30,SW3:31,SW4:32,SW5:33,SW7:35,SW8:36,SW9:37},switch_label_t:{NONE:0,ST:1,TH:2,THR:3,RUD:4,AIL:5,ELE:6,AUX:7,"ST-DR":8,"RUD-DR":9,"AIL-DR":10,"ELE-DR":11,"TH-DR":12,"THR-DR":13,"TH-HOLD":14,GEAR:15,FLAPS:16,TRAINER:17,"SIDE-L":18,"SIDE-R":19,POT1:20,POT2:21,POT3:22,POT4:23,POT5:24,POT6:25,POT7:26,POT8:27,POT9:28,SW1:29,SW2:30,SW3:31,SW4:32,SW5:33,SW7:35,SW8:36,SW9:37},channel_label_t:{CH1:0,CH2:1,CH3:2,CH4:3,CH5:4,CH6:5,CH7:6,CH8:7,VIRTUAL1:8,VIRTUAL2:9,VIRTUAL3:10,VIRTUAL4:11,VIRTUAL5:12,VIRTUAL6:13,VIRTUAL7:14,VIRTUAL8:15,VIRTUAL9:16,VIRTUAL10:17},src_label_t:{ST:2,TH:3,THR:4,RUD:5,AIL:6,ELE:7,AUX:8,"ST-DR":9,"RUD-DR":10,"AIL-DR":11,"ELE-DR":12,"TH-DR":13,"THR-DR":14,"TH-HOLD":15,GEAR:16,FLAPS:17,TRAINER:18,"SIDE-L":19,"SIDE-R":20,POT1:21,POT2:22,POT3:23,POT4:24,POT5:25,POT6:26,POT7:27,POT8:28,POT9:29,SW1:30,SW2:31,SW3:32,SW4:33,SW5:34,SW7:36,SW8:37,SW9:38,CH1:39,CH2:40,CH3:41,CH4:42,CH5:43,CH6:44,CH7:45,CH8:46,VIRTUAL1:47,VIRTUAL2:48,VIRTUAL3:49,VIRTUAL4:50,VIRTUAL5:51,VIRTUAL6:52,VIRTUAL7:53,VIRTUAL8:54,VIRTUAL9:55,VIRTUAL10:56},live_t:{ST:1,TH:2,THR:3,RUD:4,AIL:5,ELE:6,AUX:7,"ST-DR":8,"RUD-DR":9,"AIL-DR":10,"ELE-DR":11,"TH-DR":12,"THR-DR":13,"TH-HOLD":14,GEAR:15,FLAPS:16,TRAINER:17,"SIDE-L":18,"SIDE-R":19,POT1:20,POT2:21,POT3:22,POT4:23,POT5:24,POT6:25,POT7:26,POT8:27,POT9:28,SW1:29,SW2:30,SW3:31,SW4:32,SW5:33,SW7:35,SW8:36,SW9:37,CH1:38,CH2:39,CH3:40,CH4:41,CH5:42,CH6:43,CH7:44,CH8:45,VIRTUAL1:46,VIRTUAL2:47,VIRTUAL3:48,VIRTUAL4:49,VIRTUAL5:50,VIRTUAL6:51,VIRTUAL7:52,VIRTUAL8:53,VIRTUAL9:54,VIRTUAL10:55,HIDDEN1:56,HIDDEN2:57,
HIDDEN3:58,HIDDEN4:59,HIDDEN5:60,HIDDEN6:61,HIDDEN7:62,HIDDEN8:63,HIDDEN9:64,HIDDEN10:65,HIDDEN11:66,HIDDEN12:67,HIDDEN13:68,HIDDEN14:69,HIDDEN15:70,HIDDEN16:71,HIDDEN17:72,HIDDEN18:73,HIDDEN19:74,HIDDEN20:75,HIDDEN21:76,HIDDEN22:77,HIDDEN23:78,HIDDEN24:79,HIDDEN25:80,HIDDEN26:81,HIDDEN27:82,HIDDEN28:83,HIDDEN29:84,HIDDEN30:85,HIDDEN31:86,HIDDEN32:87,HIDDEN33:88,HIDDEN34:89,HIDDEN35:90,HIDDEN36:91,HIDDEN37:92,HIDDEN38:93,HIDDEN39:94,HIDDEN40:95,HIDDEN41:96,HIDDEN42:97,HIDDEN43:98,HIDDEN44:99,HIDDEN45:100,HIDDEN46:101,HIDDEN47:102,HIDDEN48:103,HIDDEN49:104,HIDDEN50:105,"RF-CH1":106,"RF-CH2":107,"RF-CH3":108,"RF-CH4":109,"RF-CH5":110,"RF-CH6":111,"RF-CH7":112,"RF-CH8":113,"Battery (mV)":114,"ADC0 (raw)":115,"ADC1 (raw)":116,"ADC2 (raw)":117,"ADC3 (raw)":118,"ADC4 (raw)":119,"ADC5 (raw)":120,"ADC6 (raw)":121,"ADC7 (raw)":122,"ADC8 (raw)":123,"ADC9 (raw)":124,"ADC10 (raw)":125,"ADC11 (raw)":126,"ADC12 (raw)":127,"ADC13 (raw)":128,"ADC14 (raw)":129,"ADC15 (raw)":130,"ADC16 (raw)":131,"ADC17 (raw)":132,"ADC18 (raw)":133,"ADC19 (raw)":134,"ADC20 (raw)":135,"ADC21 (raw)":136,"ADC22 (raw)":137,"ADC23 (raw)":138,"ADC24 (raw)":139,"ADC25 (raw)":140,"ADC26 (raw)":141,"ADC27 (raw)":142,"ADC28 (raw)":143,"ADC29 (raw)":144,"ADC30 (raw)":145,"ADC31 (raw)":146},rf_protocol_type_t:{"HobbyKing HKR3000":0,RF_PROTOCOL_LANEBOYSRC4CH:1},operation_type_t:{"=":0,"+":1,"*":2,MIN:3,MAX:4},comparison_t:{"==":0,"!=":1,">":2,">=":3,"<":4,"<=":5},curve_type_t:{Linear:0,"Fixed value":1,"Min/Max":2,"0/Max":3,">0":4,"<0":5,Absolute:6,Expo:7,Deadband:8,"3-Point":9,"5-Point":10,"7-Point":11,"9-Point":12,"11-Point":13,"13-Point":14},interpolation_type_t:{Linear:0,Smoothing:1},curve_points_t:{Linear:[],"Fixed value":["Value"],"Min/Max":["Threshold"],"0/Max":["Threshold"],">0":["Threshold"],"<0":["Threshold"],Absolute:["Threshold"],Expo:[">0","<0"],Deadband:[">0","<0"],"3-Point":["-100%","0","+100%"],"5-Point":["-100%","-50%","0","+50%","+100%"],"7-Point":["-100%","-66%","-33%","0","+33%","+66%","+100%"],"9-Point":["-100%","-75%","-50%","-25%","0","+25","+50%","+75%","+100%"],"11-Point":["-100%","-80%","-60%","-40%","-20%","0","+20%","+40%","+60%","+80%","+100%"],"13-Point":["-100%","-83%","-67%","-50%","-33%","-17%","0","+17%","+33%","+50%","+67%","+83%","+100%"]}}}};window.CONFIG_VERSIONS=s},function(e,t,s){"use strict";var i=s(20),n="HeadlessTX",a="Models and Transmitters",o=function(e){this.db=void 0;var t,s=this;console.log('Database: opening database "'+n+'"');try{t=window.indexedDB.open(n,2)}catch(o){return console.error("indexedDB.open failed:",o),void document.querySelector("#database-error").classList.remove("hidden")}t.onerror=function(e){console.error("Database: onerror",e),document.querySelector("#database-error").classList.remove("hidden")},t.onupgradeneeded=function(e){console.log("Database: onupgradeneeded");var t=e.target.result,s=t.createObjectStore(a,{keyPath:"uuid",autoIncrement:!1});s.transaction.oncomplete=function(e){console.log("Database: Object store created")}},t.onsuccess=function(e){console.log("Database: Database opened successfully"),s.db=e.target.result,i.PubSub.publish("databaseReady"),i.PubSub.removeTopic("databaseReady")}};o.prototype.isReady=function(){return!!this.db},o.prototype.getEntry=function(e,t){var s=this.db.transaction(a).objectStore(a).get(e);s.onsuccess=function(e){var s=e.target.result;t(s)},s.onerror=function(e){console.error("Database: getEntry() failed",e),t(void 0)}},o.prototype.setEntry=function(e,t){var s=this.db.transaction(a,"readwrite").objectStore(a).put(e);s.onsuccess=function(e){var s=e.target.result;t&&t(s)},s.onerror=function(e){console.error("Database: setEntry() failed",e),t&&t(void 0)}},o.prototype.deleteEntry=function(e,t){var s=this.db.transaction(a,"readwrite").objectStore(a)["delete"](e.uuid);s.onsuccess=function(e){var s=e.target.result;t&&t(s)},s.onerror=function(e){console.error("Database: deleteEntry() failed",e),t&&t(void 0)}},o.prototype.listEntries=function(e){var t=this.db.transaction(a).objectStore(a);t.openCursor().onsuccess=function(t){var s=t.target.result;e&&e(s)}},window.Database=new o},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t,s){var i=[];for(s=s||29;t;){var n=t>s?s:t;i.push({o:e,c:n}),e+=n,t-=n}return i}var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),o=s(20),r=s(31),l=1200,c=function(){function e(){i(this,e),this.MODEL=void 0,this.TX=void 0,this.UNDO=void 0,this.connected=!1,this.wsOpen=!1,this.live={},this.retryTimer=void 0,this.TX_FREE_TO_CONNECT=48,this.CFG_REQUEST_TO_CONNECT=49,this.CFG_READ=114,this.CFG_WRITE=119,this.CFG_COPY=99,this.CFG_DISCONNECT=100,this.TX_INFO=73,this.TX_REQUESTED_DATA=82,this.TX_WRITE_SUCCESSFUL=87,this.TX_COPY_SUCCESSFUL=67,this.WS_MAX_PACKETS_IN_TRANSIT=66,this.connectedCallback=null,document.addEventListener("ws-open",this._onOpen.bind(this)),document.addEventListener("ws-close",this._onClose.bind(this))}return a(e,[{key:"enableCommunication",value:function(){console.log("enableCommunication"),this.wsOpen=!0,WebsocketProtocol.open()}},{key:"disableCommunication",value:function(){console.log("disableCommunication"),WebsocketProtocol.close(),this.wsOpen=!1,this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=void 0)}},{key:"connect",value:function(e,t){console.log("Device.connect uuid="+e+" passphrase="+t);var s=new Uint8Array([this.CFG_REQUEST_TO_CONNECT,0,0,0,0,0,0,0,0,18,19,20,21,22,52,18,0,1]);s.set(o.string2uuid(e),1),s.set(o.newRandomAddress(),9),o.setUint16(s,t,14),s.set(o.newHopChannelLFSR(),16),this.live={};var i=this;return new Promise(function(e,t){function n(){clearTimeout(c),i.connectedCallback=null,document.removeEventListener("ws-close",o)}function a(){n(),i.connected=!0,e()}function o(){n(),t(new Error("Connection closed"))}function r(){var e=new Uint8Array([i.CFG_DISCONNECT]);WebsocketProtocol.send(e),n(),t(new Error("Connection timeout"))}var c=void 0;i.connectedCallback=a,document.addEventListener("ws-close",o),c=setTimeout(r,l),WebsocketProtocol.send(s)})}},{key:"disconnect",value:function(){var e=this;return new Promise(function(t,s){e.connected||s(new Error("Device.disconnect: not connected"));var i=new Uint8Array([e.CFG_DISCONNECT]);WebsocketProtocol.send(i),e.connected=!1,t()})}},{key:"read",value:function(e,t){if(console.log("Device.read o="+e+" c="+t),!this.connected)return Promise.reject(new Error("Device.read: not connected"));var s=this;return new Promise(function(i,a){function r(t){if(t[0]!==s.TX_REQUESTED_DATA)return void console.log("read(): not a READ response");var n=o.getUint16(t,1),a=t.length-3,r=c.findIndex(function(e){return e.o===n&&e.c===a});r>=0&&(l.set(t.slice(3),n-e),c.splice(r,1)),0===c.length&&i(l)}var l=new Uint8Array(t),c=n(e,t);c.forEach(function(e){var t=_makeReadPacket(e.o,e.c);WebsocketProtocol.send(t).then(r)["catch"](function(e){a(e)})})})}},{key:"write",value:function(e,t){if(console.log("Device.write o="+e+" c="+t.length),!this.connected)return Promise.reject(new Error("Device.write: not connected"));var s=this;return new Promise(function(i,a){function r(e){if(e[0]===s.TX_WRITE_SUCCESSFUL){var n=o.getUint16(e,1),a=e[3],r=l.findIndex(function(e,t,s){return e.o===n&&e.c===a});r>=0&&l.splice(r,1),0===l.length&&i(t)}}var l=n(e,t.length);l.forEach(function(s){var i=s.o-e,n=_makeWritePacket(s.o,t.slice(i,i+s.c));WebsocketProtocol.send(n).then(r)["catch"](function(e){a(e)})})})}},{key:"copy",value:function(e,t,s){return console.log("Device.copy src="+e+" dst="+t+" c="+s),this.connected?new Promise(function(i,n){var a=_makeCopyPacket(e,t,s);WebsocketProtocol.send(a).then(function(){i()})["catch"](function(e){n(e)})}):Promise.reject(new Error("Device.copy: not connected"))}},{key:"makeNewDevice",value:function(e,t){var s={},i=CONFIG_VERSIONS[e][t];s.configVersion=e,s.schemaName=t,s.data=new Uint8Array(i.s),s.lastChanged=0,s.uuid=o.newUUID();var n=new r(s);n.setItem("UUID",s.uuid);var a=t+" "+s.uuid.toUpperCase().slice(0,4);return n.setItem("NAME",a),n}},{key:"getActiveItems",value:function(e,t){var s=[];if(!this.TX)return s;if("MIXER_UNITS_SRC"===e)for(var i=this.TX.getSchema(),n=i.LOGICAL_INPUTS.c,a=i.LOGICAL_INPUTS.s,o=0;o<n;o++)for(var r=o*a,l=this.TX.getItem("LOGICAL_INPUTS_LABELS",{offset:r}),c=0;c<l.length;c++)s.push(l[c]);else if("LOGICAL_INPUTS_LABELS"===e){for(var u=this.TX.getType(e),d=this.TX.getTypeMembers(u),h=this.TX.getSchema(),p=h.LOGICAL_INPUTS,_=p.c,f=p.s,m=0;m<_;m++){var v=m*f,E=this.TX.getItemNumber("LOGICAL_INPUTS_TYPE",{offset:v});if(v!==t&&0!==E)for(var C=this.TX.getItem("LOGICAL_INPUTS_LABELS",{offset:v}),g=0;g<C.length;g++){var b=d.indexOf(C[g]);b>=0&&d.splice(b,1)}}s=d}else if("LOGICAL_INPUTS_HARDWARE_INPUTS"===e)for(var y=this.TX.getSchema(),I=y.HARDWARE_INPUTS.c,T=y.HARDWARE_INPUTS.s,S=0;S<I;S++){var L=S*T,D=this.TX.getItem("HARDWARE_INPUTS_PCB_INPUT_PIN_NAME",{offset:L}),w=this.TX.getItemNumber("HARDWARE_INPUTS_TYPE",{offset:L});this.isValidHardwareType(w,t)&&s.push(D)}return s}},{key:"overrideType",value:function(e,t){if(!this.TX)return[];if("HARDWARE_INPUTS_TYPE"===e){var s=this.TX.getItemNumber("HARDWARE_INPUTS_PCB_INPUT_TYPE",{offset:t});return 2===s?this.TX.getTypeMembers("hardware_input_type_t_digital"):[]}if("LOGICAL_INPUTS_HARDWARE_INPUTS"===e){for(var i=this.TX.getSchema(),n=i.HARDWARE_INPUTS.c,a=i.HARDWARE_INPUTS.s,o=[],r=0;r<n;r++){var l=r*a,c=this.TX.getItem("HARDWARE_INPUTS_PCB_INPUT_PIN_NAME",{offset:l}),u=this.TX.getItemNumber("HARDWARE_INPUTS_TYPE",{offset:l});0!==u&&o.push(c)}return o}return[]}},{key:"overrideNumberOfChoices",value:function(e,t){if("LOGICAL_INPUTS_HARDWARE_INPUTS"===e){var s=this.getNumberOfHardwareInputs(t),i=this.TX.getItemNumber("LOGICAL_INPUTS_TYPE",{offset:t}),n=this.TX.getItem("LOGICAL_INPUTS_POSITION_COUNT",{offset:t});switch(i){case 1:case 4:return{max:1,current:s};case 2:return n<4?{max:2,current:s}:{max:n,current:s};case 3:return{max:n,current:s};case 5:return{max:2,current:s};default:return}}}},{key:"getNumberOfHardwareInputs",value:function(e){if(!this.TX)return 0;var t=this.TX.getSchema(),s=t.HARDWARE_INPUTS.s,i=this.TX.getItemNumber("LOGICAL_INPUTS_TYPE",{offset:e}),n=this.TX.getItemNumber("LOGICAL_INPUTS_SUB_TYPE",{offset:e}),a=this.TX.getItem("LOGICAL_INPUTS_POSITION_COUNT",{offset:e}),o=this.TX.getItemNumber("LOGICAL_INPUTS_HARDWARE_INPUTS",{offset:e,index:0}),r=this.TX.getItemNumber("HARDWARE_INPUTS_TYPE",{offset:o*s});switch(i){case 1:case 4:return 1;case 2:return 7===r?1===n?2:1:a<4?1:a;case 3:return a;case 5:return 7===r?2:[2,3].includes(r)?1:0;default:return 0}}},{key:"isValidHardwareType",value:function(e,t){var s=t,i=this.TX.getSchema().HARDWARE_INPUTS.s,n=this.getNumberOfHardwareInputs(s),a=this.TX.getItemNumber("LOGICAL_INPUTS_HARDWARE_INPUTS",{offset:s,index:0}),o=this.TX.getItemNumber("HARDWARE_INPUTS_TYPE",{offset:a*i}),r=this.TX.getItem("LOGICAL_INPUTS_POSITION_COUNT",{offset:s}),l=this.TX.getItemNumber("LOGICAL_INPUTS_TYPE",{offset:s}),c=[];switch(l){case 1:c=[1,2,3,4];break;case 2:c=7===o?[7]:3===r?[6]:[5];break;case 3:c=[5];break;case 4:c=[7];break;case 5:c=1===n?[2,3]:[7]}return c.includes(e)}},{key:"getLiveValue",value:function(e){return this.live.hasOwnProperty(e)?this.live[e]:null}},{key:"load",value:function(e,t){var s=this,i=CONFIG_VERSIONS[e][t],n={};return n.configVersion=e,n.schemaName=t,n.data=new Uint8Array(i.s),new Promise(function(e){s.read(i.o+i.UUID.o,i.UUID.c).then(function(e){return n.uuid=o.uuid2string(e),o.isValidUUID(n.uuid)?Promise.resolve():(n.uuid=o.newUUID(),s.write(i.o+i.UUID.o,o.string2uuid(n.uuid)))}).then(function(){return new Promise(function(e){Database.getEntry(n.uuid,function(t){t&&(t=new r(t)),e(t)})})}).then(function(e){return e&&e.getItem("UUID")===n.uuid?new Promise(function(t){s.read(i.o+i.LAST_CHANGED.o,i.LAST_CHANGED.s).then(function(a){n.lastChanged=o.getUint32(a),n.lastChanged===e.lastChanged?t(e):n.lastChanged>e.lastChanged?s._loadDeviceData(n).then(function(e){t(e)}):s.write(i.o,e.data).then(function(){t(e)})})}):s._loadDeviceData(n)}).then(function(t){s[n.schemaName]=t,e()})})}},{key:"onLiveMessage",value:function(e){if(this.connectedCallback&&this.connectedCallback.call(),this.TX&&!(e.length<=1))for(var t=1,s=this.TX.getConfig(),i=s.TYPES.live_t;t+6<=e.length;){var n=o.getUint16(e,t),a=o.getInt32(e,t+2),r=this.TX.typeLookupByNumber(i,n);this.live[r]=a,t+=6}}},{key:"_loadDeviceData",value:function(e){var t=this,s=CONFIG_VERSIONS[e.configVersion][e.schemaName];return new Promise(function(i){t.read(s.o,s.s).then(function(t){e.data=t;var s=new r(e);return e.lastChanged=s.getItem("LAST_CHANGED"),new Promise(function(t){Database.setEntry(e,function(){t(s)})})}).then(function(e){i(e)})})}},{key:"_makeReadPacket",value:function(t,s){s>29&&(s=29);var i=new Uint8Array([e.CFG_READ,0,0,s]);return o.setUint16(i,t,1),i}},{key:"_makeWritePacket",value:function(t,s){var i=new Uint8Array(3+s.length);return i[0]=e.CFG_WRITE,o.setUint16(i,t,1),i.set(s,3),i}},{key:"_makeCopyPacket",value:function(t,s,i){var n=new Uint8Array(7);return n[0]=e.CFG_COPY,o.setUint16(n,t,1),o.setUint16(n,s,3),o.setUint16(n,i,5),n}},{key:"_onOpen",value:function(){o.sendCustomEvent("dev-bridgeconnected")}},{key:"_onClose",value:function(){this.connected=!1,this.live={},this.wsOpen&&(o.sendCustomEvent("dev-connectionlost"),this.retryTimer=setTimeout(this._onRetryTimeout.bind(this),2e3))}},{key:"_onRetryTimeout",value:function(){this.retryTimer=void 0,this.wsOpen&&WebsocketProtocol.open()}}]),e}();window.Device=new c},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){var s={u:{1:Uint8Array,2:Uint16Array,4:Uint32Array},i:{1:Int8Array,2:Int16Array,4:Int32Array}};if(!s.hasOwnProperty(t)){var i="Invalid type "+t;throw console.error(i),new Error(i)}if(!s[t].hasOwnProperty(e)){var n="bytesPerElement is "+e+" but must be 1, 2 or 4";throw console.error(n),new Error(n)}return s[t][e]}function a(e,t){var s={u:{1:DataView.prototype.setUint8,2:DataView.prototype.setUint16,4:DataView.prototype.setUint32},i:{1:DataView.prototype.setInt8,2:DataView.prototype.setInt16,4:DataView.prototype.setInt32}};if(!s.hasOwnProperty(t)){var i="Invalid type "+t;throw console.error(i),new Error(i)}if(!s[t].hasOwnProperty(e)){var n="bytesPerElement is "+e+" but must be 1, 2 or 4";throw console.error(n),new Error(n)}return s[t][e]}var o=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),r=s(20),l=function(){function e(t){if(i(this,e),this.uuid=t.uuid,this.data=t.data,this.configVersion=t.configVersion,this.schemaName=t.schemaName,this.lastChanged=t.lastChanged,"TX"===this.schemaName){for(var s="x_pin_name_t",n=this.getConfig(),a=this.getSchema(),o=a.HARDWARE_INPUTS,r={},l=0;l<o.c;l++){var c=o.s*l,u=this.getItem("HARDWARE_INPUTS_PCB_INPUT_TYPE",{offset:c});if(0!==u){var d=this.getItem("HARDWARE_INPUTS_PCB_INPUT_PIN_NAME",{offset:c});r[d]=l}}n.TYPES[s]=r,a.LOGICAL_INPUTS_HARDWARE_INPUTS.t=s}}return o(e,[{key:"validateInputs",value:function(e,t){var s=void 0,i=this.getSchema();if(e&&!i.hasOwnProperty(e))throw s='Key "'+e+'" not in schema.',console.error(s),new Error(s);if("undefined"!=typeof t){if(!r.isNumber(t))throw s='Index "'+t+'" is not an Integer',console.error(s),new Error(s);var n=i[e];if(t=parseInt(t),t<0||t>=n.c)throw s='Requested index "'+t+'" for key "'+e+'" but item '+("contains only "+n.c+" elements"),console.error(s),new Error(s)}}},{key:"typeLookupByNumber",value:function(e,t){if(e)for(var s in e)if(e.hasOwnProperty(s)&&t===e[s])return s;return t}},{key:"getConfig",value:function(){return CONFIG_VERSIONS[this.configVersion]}},{key:"getSchema",value:function(){return this.getConfig()[this.schemaName]}},{key:"getType",value:function(e){return this.validateInputs(e),this.getSchema()[e].t}},{key:"getNumberOfTypeMember",value:function(e,t){if(this.validateInputs(e),r.isNumber(t))return t;var s=this.getConfig(),i=this.getSchema()[e].t;return s.TYPES[i][t]}},{key:"getTypeMembers",value:function(e){var t=this.getConfig();return Object.keys(t.TYPES[e])}},{key:"getHumanFriendlyText",value:function(e){this.validateInputs(e);var t=this.getSchema();return t[e].hasOwnProperty("h")?t[e].h:e}},{key:"getItemNumber",value:function(e,t){var s=this,i=this.getItem(e,t);return r.isArray(i)?i.map(function(t){return s.getNumberOfTypeMember(e,t)}):this.getNumberOfTypeMember(e,i)}},{key:"getItem",value:function(e,t){function s(){var e=n(v.s,v.t);return Array.from(new e(p.buffer,E,v.c))}function i(){var e=new Uint8Array(p.buffer,E,v.c);return r.uint8array2string(e)}function a(){var e=new Uint8Array(p.buffer,E,v.c);return r.uuid2string(e)}function o(){if(r.isNumber(c))return new Uint8Array(p.buffer,E+v.s*c,v.s).slice();for(var e=[],t=0;t<v.c;t++)e.push(new Uint8Array(p.buffer,E+t*v.s,v.s).slice());return e}function l(){if(!m.hasOwnProperty(v.t)){var t='Schema type "'+v.t+'" for key "'+e+'" not defined';throw console.error(t),new Error(t)}for(var s=n(v.s,"i"),i=new s(p.buffer,E,v.c),a=[],o=0;o<i.length;o++){var r=i[o],l=h.typeLookupByNumber(m[v.t],r);a.push(l)}return a}t=t||{offset:0,index:void 0},this.validateInputs(e,t.index);var c=parseInt(t.index),u=parseInt(t.offset);r.isNumber(u)||(u=0);var d,h=this,p=this.data,_=this.getConfig(),f=this.getSchema(),m=_.TYPES,v=f[e],E=v.o+u;switch(1===v.c&&(c=0),v.t){case"u":case"i":d=s();break;case"c":return i();case"uuid":return a();case"s":return o();default:d=l()}return r.isNumber(c)?d[c]:d}},{key:"setItem",value:function(e,t,s){function i(t,s){if(console.log(v.uuid+" changed: offset="+t+" count="+s+" config-offset="+(t+g.o)),Device.connected&&Device.write(t+g.o,E.slice(t,t+s)),!m){if("LAST_CHANGED"!==e&&g.hasOwnProperty("LAST_CHANGED")){var i=parseInt(Date.now()/1e3),n=g.LAST_CHANGED,o=a(n.s,n.t),r=new DataView(E.buffer,n.o,n.s);o.apply(r,[0,i,!0]),console.log(v.uuid+" changed: offset="+n.o+" count="+n.s+" config-offset="+(n.o+g.o)),Device.connected&&Device.write(n.o+g.o,E.slice(n.o,n.o+n.s)),v.lastChanged=i}Database.setEntry(v,function(e){console.log("Database updated",e)})}}function n(e,t){t=t||DataView.prototype.setUint8;for(var s=y.c*y.s,n=new DataView(E.buffer,I,s),a=0;a<y.c;a++){var o=a*y.s;t.apply(n,[o,e[a],!0])}i(I,s)}function o(e,t,s){s=s||DataView.prototype.setUint8;var n=new DataView(E.buffer,I,y.c*y.s),a=t*y.s;s.apply(n,[a,e,!0]),i(I+a,y.s)}function l(e,t){for(var s=y.s,n=I+t*s,a=new DataView(E.buffer,n,s),o=0;o<s;o++)a.setUint8(o,e[o],!0);i(n,s)}function c(){var e=r.string2uint8array(t,y.c);n(e)}function u(){var e=r.string2uuid(t,y.c);n(e)}function d(){var e=a(y.s,y.t);r.isNumber(_)?o(t,_,e):n(t,e)}function h(){function e(e){var t=b[y.t];if(!t.hasOwnProperty(e)){if(r.isNumber(e))return e;var s="Key "+e+" is not in type "+y.t;throw console.error(s),new Error(s)}return t[e]}var s=void 0,i=a(y.s,"i");if(r.isNumber(_))s=e(t),o(s,_,i);else{for(var l=[],c=0;c<y.c;c++)s=e(t[c]),l.push(s);n(l,i)}}function p(){if(r.isNumber(_))return void l(t,_);for(var e=0;e<y.c;e++)l(t[e],e)}s=s||{offset:0,index:void 0,preview:!1},this.validateInputs(e,s.index);var _=parseInt(s.index),f=parseInt(s.offset),m=Boolean(s.preview);r.isNumber(f)||(f=0);var v=this,E=this.data,C=this.getConfig(),g=this.getSchema(),b=C.TYPES,y=g[e],I=y.o+f;if(1===y.c&&(_=0),!r.isNumber(_)){var T=["c","uuid"];if(T.indexOf(y.t)<0&&t.length!==y.c){var S=e+" requires "+y.c+" elements but "+t.length+" provided";throw console.error(S),new Error(S)}}switch(y.t){case"u":case"i":d();break;case"c":c();break;case"s":p();break;case"uuid":u();break;default:if(!b.hasOwnProperty(y.t)){var L='Schema type "'+y.t+'" for key "'+e+'" not defined';throw console.error(L),new Error(L)}h()}}},{key:"rawCopy",value:function(e,t,s){if(!(s<=0)){var i=this.getSchema(),n=this.data.slice(e,e+s);if(this.data.set(n,t),console.log(this.uuid+" changed: copied src="+e+" to dst="+t+", count="+s+" config-srcOffset="+(e+i.o)),Device.connected&&Device.copy(e+i.o,t+i.o,s),i.hasOwnProperty("LAST_CHANGED")){var o=parseInt(Date.now()/1e3),r=i.LAST_CHANGED,l=a(r.s,r.t),c=new DataView(this.data.buffer,r.o,r.s);l.apply(c,[0,o,!0]),console.log(this.uuid+" changed: offset="+r.o+" count="+r.s+" config-offset="+(r.o+i.o)),Device.connected&&Device.write(r.o+i.o,this.data.slice(r.o,r.o+r.s)),this.lastChanged=o}Database.setEntry(this,function(e){console.log("Database updated",e)})}}}]),e}();e.exports=l},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=function(){function e(){i(this,e)}return n(e,[{key:"init",value:function(){Device.MODEL=void 0,Device.TX=void 0,Device.UNDO=void 0,Device.disableCommunication(),a.showPage("main")}},{key:"connect",value:function(e){a.cancelBubble(e),location.hash=a.buildURL(["device_list"])}},{key:"about",value:function(e){a.cancelBubble(e),location.hash=a.buildURL(["about"]),this._closeDrawer()}},{key:"settings",value:function(e){a.cancelBubble(e),location.hash=a.buildURL(["settings"]),this._closeDrawer()}},{key:"models",value:function(e){a.cancelBubble(e),location.hash=a.buildURL(["model_list"]),this._closeDrawer()}},{key:"transmitters",value:function(e){a.cancelBubble(e),location.hash=a.buildURL(["transmitter_list"]),this._closeDrawer()}},{key:"_closeDrawer",value:function(){var e=document.querySelector("#page_main .mdl-layout__drawer-button");window.setTimeout(function(){e.click()},50)}}]),e}();window.Main=new o},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=function(){function e(){i(this,e);var t=document.querySelector("#page_about .version .hash"),s=document.querySelector("#page_about .version .date");t.textContent="5afa4f6",s.textContent="2018-08-20 10:19:03"}return n(e,[{key:"init",value:function(){a.showPage("about")}},{key:"back",value:function(){history.back()}}]),e}();window.About=new o},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=(s(31),function(){function e(){i(this,e),this.loading=document.querySelector("#app-device_list-loading"),this.hints=document.querySelector("#app-device_list-hints"),this.msgBridge=document.querySelector("#app-device_list-loading__bridge"),this.msgScanning=document.querySelector("#app-device_list-loading__scanning"),this.list=document.querySelector("#app-device_list-list"),this.container=document.querySelector("#app-device_list-list__container"),this.template=document.querySelector("#app-device_list-list__template").content,this.txLoading=document.querySelector("#app-device_list-loading_transmitter"),this.txProgress=document.querySelector("#app-device_list-loading_transmitter__progress"),this.txConnecting=document.querySelector("#app-device_list-loading_transmitter__connecting"),this.txModel=document.querySelector("#app-device_list-loading_transmitter__model"),this.txTransmitter=document.querySelector("#app-device_list-loading_transmitter__transmitter"),this.progress={},this.showToast=!1,this.availableTransmitters=[],this.hintTimer=null,document.addEventListener("dev-bridgeconnected",this._bridgeConnected.bind(this)),document.addEventListener("dev-connectionlost",this._connectionLost.bind(this))}return n(e,[{key:"init",value:function(){this._resetPage(),Device.connected?Device.disconnect():Device.enableCommunication(),this._cancelHints(),this.hintTimer=setTimeout(this._showHints.bind(this),4e3),a.showPage("device_list")}},{key:"back",value:function(){history.back()}},{key:"edit",value:function(e){var t=this.availableTransmitters[e],s=new o;s.setTextContentRaw("#app-device_list-loading_transmitter__name",t.name),a.hide(this.list),a.show(this.txLoading),a.show(this.txConnecting),a.hide(this.txModel),a.hide(this.txTransmitter),this.txProgress.classList.add("mdl-progress--indeterminate"),this.load(t.uuid)}},{key:"load",value:function(e){var t,s=this,i=1234;Device.connect(e,i).then(function(){return Device.read(0,4)}).then(function(e){return t=a.getUint32(e),CONFIG_VERSIONS.hasOwnProperty(t)?(a.hide(s.txConnecting),a.show(s.txTransmitter),Device.load(t,"TX")):Promise.reject(new Error('Unknown configVersion "'+t+'"'))}).then(function(){return a.hide(s.txTransmitter),a.show(s.txModel),Device.load(t,"MODEL")}).then(function(){location.hash=a.buildURL(["model_details"])})["catch"](function(e){console.log("Connection failed",e),s._resetPage()})}},{key:"transmitterFreeToConnect",value:function(e){this.showToast=!0;var t={name:a.uint8array2string(e.slice(9,25)),uuid:a.uuid2string(e.slice(1,9)),battery:e[25]+256*e[26]},s=this.availableTransmitters.findIndex(function(e){return e.uuid===t.uuid});if(!(s>=0)){this.availableTransmitters.push(t),s=this.availableTransmitters.length-1,console.log("New transmitter: "+t.name),a.show(this.list),a.hide(this.loading);var i=new o,n=document.importNode(this.template,!0);n.querySelector("button").setAttribute("data-index",s),i.setTextContentRaw(".app-device_list-list__template-name",t.name,n);var r=parseFloat(t.battery/1e3).toFixed(2);i.setTextContentRaw(".app-device_list-list__template-battery",""+r+"V",n),r<3.56&&n.querySelector(".app-device_list-list__template-battery").classList.add("warning"),this.container.appendChild(n),this.showToast=!0}}},{key:"_resetPage",value:function(){this.availableTransmitters=[],a.clearDynamicElements(this.list),a.show(this.loading),a.show(this.msgBridge),a.hide(this.msgScanning),a.hide(this.list),a.hide(this.txLoading)}},{key:"_cancelHints",value:function(){a.hide(this.hints),this.hintTimer&&(clearTimeout(this.hintTimer),this.hintTimer=null)}},{key:"_bridgeConnected",value:function(){a.hide(this.msgBridge),a.show(this.msgScanning),this._cancelHints()}},{key:"_connectionLost",value:function(){(Device.MODEL||Device.TX)&&(Device.MODEL=void 0,Device.TX=void 0,a.rollbackHistoryToRoot(),location.hash=a.buildURL(["device_list"])),this._showConnectionLostMessage(),this._resetPage()}},{key:"_showConnectionLostMessage",value:function(){if(this.showToast){this.showToast=!1;var e=document.querySelector("#app-device_list-toast__message").content.textContent;a.showToast(e,5e3)}}},{key:"_showHints",value:function(){this.hintTimer=null,a.show(this.hints)}}]),e}());window.DeviceList=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(36),r=function(){function e(t,s){i(this,e),s=s||{offset:0,index:void 0,formatter:void 0,parser:void 0},this.icons={0:"directions_car",1:"flight",2:"local_shipping",3:"directions_boat",4:"motorcycle",5:"zoom_out_map"},this.devName=t,this.offset=s.offset,this.index=s.index,this.formatter=s.formatter,this.parser=s.parser,this.timer=null,this.onChangeHandler=this._onchange.bind(this),this.onInputHandler=this._oninput.bind(this),this.sliderDialog=document.querySelector("#app-slider-fine-adjustment_dialog"),this.sliderDialogElements={},this.sliderDialogElements.done=this.sliderDialog.querySelector(".mdl-dialog__actions button"),this.sliderDialogElements.number=this.sliderDialog.querySelector(".mdl-dialog__content input"),this.sliderDialogElements.decrement=this.sliderDialog.querySelector(".mdl-dialog__content button"),this.sliderDialogElements.increment=this.sliderDialog.querySelector(".mdl-dialog__content button:nth-child(3)"),this.sliderDialog.showModal||o.registerDialog(this.sliderDialog)}return n(e,[{key:"createSpan",value:function(e,t){var s=document.createElement("span"),i=document.createTextNode(e);return s.appendChild(i),a.isDefined(t)&&(s.className=t),s}},{key:"setTextContent",value:function(e,t,s){s=s||document;var i=Device[this.devName].getItem(t,{offset:this.offset});this.formatter&&(i=this.formatter(i)),s.querySelector(e).textContent=i}},{key:"setTextContentRaw",value:function(e,t,s){s=s||document,s.querySelector(e).textContent=t}},{key:"setSwitch",value:function(e,t,s){s=s||document;var i={offset:this.offset,index:this.index},n=Device[this.devName].getItem(t,i),a=s.querySelector(e);componentHandler.upgradeElement(a),a.checked=n,a.parentNode.MaterialSwitch.checkToggleState(),this.setChangeHandler(a,t)}},{key:"setSlider",value:function(e,t,s){s=s||document;var i={offset:this.offset,index:this.index},n=Device[this.devName].getItem(t,i);this.formatter&&(n=this.formatter(n));var a=s.querySelector(e);if(componentHandler.upgradeElement(a),a.MaterialSlider.change(n),this.setChangeHandler(a,t),a.oninput=this.onInputHandler,a.parentNode&&a.parentNode.parentNode&&a.parentNode.parentNode.parentNode){var o=a.parentNode.parentNode.parentNode;"TR"===o.tagName&&(o.ondblclick=this._ondblclick.bind(this,a))}}},{key:"setTextfield",value:function(e,t,s){s=s||document;var i=Device[this.devName].getItem(t,{offset:this.offset});this.formatter&&(i=this.formatter(i));var n=s.querySelector(e);n.value=i,this.setChangeHandler(n,t)}},{key:"setIcon",value:function(e,t,s){s=s||document;var i=s.querySelector(e),n=a.isNumber(t)?t:Device[this.devName].getItem("TAG");this.icons.hasOwnProperty(n)||(n=0),i.textContent=this.icons[n]}},{key:"setChangeHandler",value:function(e,t){e.setAttribute("data-mdlhelper",t),e.onchange=this.onChangeHandler}},{key:"setDataURL",value:function(e,t,s){var i=a.buildURL(t);this.setAttribute(e,"data-url",i,s)}},{key:"setAttribute",value:function(e,t,s,i){i=i||document;var n=i.querySelector(e);n.setAttribute(t,s)}},{key:"_onchange",value:function(e){var t=e.target,s=t.value;if("checkbox"===t.type&&(s=t.checked?1:0),t.validity){if(!t.validity.valid)return void console.log(t.id+": Input invalid, not saving!");var i=t.getAttribute("pattern");if(i){var n=new RegExp(i),a=n.exec(s);a&&(s=2===a.length?a[1]:a.slice(1))}}if(this.parser&&(s=this.parser(s),"undefined"==typeof s))return void console.log(t.id+": Parser returned undefined, not saving!");var o=t.getAttribute("data-mdlhelper"),r={offset:this.offset,index:this.index};Device[this.devName].setItem(o,s,r)}},{key:"_oninput",value:function(e){function t(){o.timer=null;var e=o.timerParameters;Device[o.devName].setItem(e.item,e.value,e.options)}var s=e.target,i=s.value,n=s.getAttribute("data-mdlhelper"),a={offset:this.offset,index:this.index,preview:!0},o=this;this.timerParameters={item:n,value:i,options:a},null===this.timer&&(this.timer=setTimeout(t,100))}},{key:"_ondblclick",value:function(e,t){a.cancelBubble(t),this.sliderDialogElements.slider=e,this.sliderDialogElements.number.value=e.value,this.sliderDialogElements.number.onchange=this._onNumberChange.bind(this),this.sliderDialogElements.number.onkeypress=this._onKeypress.bind(this),this.sliderDialogElements.decrement.onclick=this._onDecrement.bind(this),this.sliderDialogElements.increment.onclick=this._onIncrement.bind(this),
this.sliderDialogElements.done.onclick=this._sliderDialogOk.bind(this),this.sliderDialog.showModal()}},{key:"_onKeypress",value:function(e){"Enter"===e.key&&this._sliderDialogOk(e)}},{key:"_onDecrement",value:function(){var e=this.sliderDialogElements;e.slider.MaterialSlider.change(parseInt(e.slider.value)-1),e.number.value=e.slider.value;var t=new Event("input",{target:e.slider});e.slider.dispatchEvent(t)}},{key:"_onIncrement",value:function(){var e=this.sliderDialogElements;e.slider.MaterialSlider.change(parseInt(e.slider.value)+1),e.number.value=e.slider.value;var t=new Event("input",{target:e.slider});e.slider.dispatchEvent(t)}},{key:"_onNumberChange",value:function(){var e=this.sliderDialogElements;e.slider.MaterialSlider.change(parseInt(e.number.value)),e.number.value=e.slider.value;var t=new Event("input",{target:e.slider});e.slider.dispatchEvent(t)}},{key:"_sliderDialogOk",value:function(e){a.cancelBubble(e),this.sliderDialog.close();var t=this.sliderDialogElements,s=new Event("change",{target:t.slider});t.slider.dispatchEvent(s)}}]),e}();e.exports=r},function(e,t,s){var i;(function(e){!function(){function n(e){for(;e;){if("DIALOG"==e.nodeName.toUpperCase())return e;e=e.parentElement}return null}function a(e){e&&e.blur&&e!=document.body&&e.blur()}function o(e,t){for(var s=0;s<e.length;++s)if(e[s]==t)return!0;return!1}function r(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),this.maybeHideModal=this.maybeHideModal.bind(this),"MutationObserver"in window){var t=new MutationObserver(this.maybeHideModal);t.observe(e,{attributes:!0,attributeFilter:["open"]})}else e.addEventListener("DOMAttrModified",this.maybeHideModal);Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdropClick_=this.backdropClick_.bind(this)}var l=window.CustomEvent;l&&"object"!=typeof l||(l=function(e,t){t=t||{};var s=document.createEvent("CustomEvent");return s.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),s},l.prototype=window.Event.prototype),r.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.openAsModal_&&(this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.removeEventListener("click",this.backdropClick_),this.backdrop_.parentElement&&this.backdrop_.parentElement.removeChild(this.backdrop_),c.dm.removeDialog(this)))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(t),e.stopPropagation()},updateZIndex:function(e,t){this.backdrop_.style.zIndex=e,this.dialog_.style.zIndex=t},show:function(){this.setOpen(!0)},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!c.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");this.show(),this.openAsModal_=!0,c.needsCentering(this.dialog_)?(c.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.backdrop_.addEventListener("click",this.backdropClick_),this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling);var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e){var t=["button","input","keygen","select","textarea"],s=t.map(function(e){return e+":not([disabled])"}).join(", ");e=this.dialog_.querySelector(s)}a(document.activeElement),e&&e.focus()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new l("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var c={};c.reposition=function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,s=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,s)+"px"},c.isInlinePositionSetByStylesheet=function(e){for(var t=0;t<document.styleSheets.length;++t){var s=document.styleSheets[t],i=null;try{i=s.cssRules}catch(n){}if(i)for(var a=0;a<i.length;++a){var r=i[a],l=null;try{l=document.querySelectorAll(r.selectorText)}catch(n){}if(l&&o(l,e)){var c=r.style.getPropertyValue("top"),u=r.style.getPropertyValue("bottom");if(c&&"auto"!=c||u&&"auto"!=u)return!0}}}return!1},c.needsCentering=function(e){var t=window.getComputedStyle(e);return"absolute"==t.position&&(!("auto"!=e.style.top&&""!=e.style.top||"auto"!=e.style.bottom&&""!=e.style.bottom)&&!c.isInlinePositionSetByStylesheet(e))},c.forceRegisterDialog=function(e){if(e.showModal&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"DIALOG"!=e.nodeName.toUpperCase())throw new Error("Failed to register dialog: The element is not a dialog.");new r(e)},c.registerDialog=function(e){e.showModal?console.warn("Can't upgrade <dialog>: already supported",e):c.forceRegisterDialog(e)},c.DialogManager=function(){this.pendingDialogStack=[],this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){e.stopPropagation()}),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.handleRemove_=this.handleRemove_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150},c.DialogManager.prototype.topDialogElement=function(){if(this.pendingDialogStack.length){var e=this.pendingDialogStack[this.pendingDialogStack.length-1];return e.dialog}return null},c.DialogManager.prototype.blockDocument=function(){document.body.appendChild(this.overlay),document.body.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),document.addEventListener("DOMNodeRemoved",this.handleRemove_)},c.DialogManager.prototype.unblockDocument=function(){document.body.removeChild(this.overlay),document.body.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),document.removeEventListener("DOMNodeRemoved",this.handleRemove_)},c.DialogManager.prototype.updateStacking=function(){for(var e=this.zIndexLow_,t=0;t<this.pendingDialogStack.length;t++)t==this.pendingDialogStack.length-1&&(this.overlay.style.zIndex=e++),this.pendingDialogStack[t].updateZIndex(e++,e++)},c.DialogManager.prototype.handleFocus_=function(e){var t=n(e.target);if(t!=this.topDialogElement())return e.preventDefault(),e.stopPropagation(),a(e.target),!1},c.DialogManager.prototype.handleKey_=function(e){if(27==e.keyCode){e.preventDefault(),e.stopPropagation();var t=new l("cancel",{bubbles:!1,cancelable:!0}),s=this.topDialogElement();s.dispatchEvent(t)&&s.close()}},c.DialogManager.prototype.handleRemove_=function(e){if("DIALOG"==e.target.nodeName.toUpperCase()){var t=e.target;t.open&&this.pendingDialogStack.some(function(e){if(e.dialog==t)return e.maybeHideModal(),!0})}},c.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(this.pendingDialogStack.push(e),1==this.pendingDialogStack.length&&this.blockDocument(),this.updateStacking(),!0)},c.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);t!=-1&&(this.pendingDialogStack.splice(t,1),this.updateStacking(),0==this.pendingDialogStack.length&&this.unblockDocument())},c.dm=new c.DialogManager,document.addEventListener("submit",function(e){var t=e.target;if(t&&t.hasAttribute("method")&&"dialog"==t.getAttribute("method").toLowerCase()){e.preventDefault();var s=n(e.target);if(s){var i,a=[document.activeElement,e.explicitOriginalTarget],o=["BUTTON","INPUT"];a.some(function(t){if(t&&t.form==e.target&&o.indexOf(t.nodeName.toUpperCase())!=-1)return i=t.value,!0}),s.close(i)}}},!0),c.forceRegisterDialog=c.forceRegisterDialog,c.registerDialog=c.registerDialog,"object"==typeof e&&"object"==typeof e.exports?e.exports=c:"amd"in s(15)?(i=function(){return c}.call(t,s,t,e),!(void 0!==i&&(e.exports=i))):window.dialogPolyfill=c}()}).call(t,s(37)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){var t=Device.MODEL.getConfig(),s=t.TYPES.curve_points_t;return s.hasOwnProperty(e)?s[e]:[]}var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),o=s(20),r=s(35),l=s(39),c=function(){function e(){i(this,e),this.offset=0,this.container=document.querySelector("#app-edit_curve-container"),this.template=document.querySelector("#app-edit_curve-template").content,this.curveViewSVG=document.querySelector("#app-edit_curve-curve_view"),this.curveView=new l(this.curveViewSVG)}return a(e,[{key:"init",value:function(e){this.offset=e.offset;var t=new r("MODEL",{offset:this.offset}),s=Device.MODEL.getItem("MIXER_UNITS_CURVE_TYPE",{offset:this.offset}),i=n(s);o.clearDynamicElements(this.container),t.setTextContent("#app-edit_curve-curve_type","MIXER_UNITS_CURVE_TYPE"),t.setDataURL("#app-edit_curve-curve_type__edit",["select_single","MODEL","MIXER_UNITS_CURVE_TYPE",this.offset]),t.setTextContent("#app-edit_curve-curve_smoothing","MIXER_UNITS_CURVE_SMOOTHING"),t.setDataURL("#app-edit_curve-curve_smoothing__edit",["select_single","MODEL","MIXER_UNITS_CURVE_SMOOTHING",this.offset]);for(var a=0;a<i.length;a++){var l={offset:this.offset,index:a},c=new r("MODEL",l),u=document.importNode(this.template,!0);c.setTextContentRaw(".app-edit_curve-template--label",i[a],u),c.setSlider("input","MIXER_UNITS_CURVE_POINTS",u),u.querySelector('input[type="range"]').addEventListener("input",this._sliderChanged.bind(this)),this.container.appendChild(u)}o.setVisibility("#app-edit_curve-curve_smoothing__enable",i.length>2),this.curveView.type=s,this.curveView.smoothing=Device.MODEL.getItemNumber("MIXER_UNITS_CURVE_SMOOTHING",{offset:this.offset}),this._sliderChanged(),o.showPage("edit_curve")}},{key:"back",value:function(){history.back()}},{key:"_sliderChanged",value:function(){var e=this.container.querySelectorAll('.can-delete input[type="range"]'),t=[];Array.from(e).forEach(function(e){return t.push(parseInt(e.value))}),this.curveView.points=t}}]),e}();window.EditCurve=new c},function(e,t){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),n=function(){function e(t){var i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];s(this,e),this.CURVE_LINEAR="Linear",this.CURVE_FIXED="Fixed value",this.CURVE_MIN_MAX="Min/Max",this.CURVE_ZERO_MAX="0/Max",this.CURVE_GT_ZERO=">0",this.CURVE_LT_ZERO="<0",this.CURVE_ABSVAL="Absolute",this.CURVE_EXPO="Expo",this.CURVE_DEADBAND="Deadband",this.CURVE_3POINT="3-Point",this.CURVE_5POINT="5-Point",this.CURVE_7POINT="7-Point",this.CURVE_9POINT="9-Point",this.CURVE_11POINT="11-Point",this.CURVE_13POINT="13-Point",this.P100=100,this.CHANNEL_CENTER=0,this.N100=-100,this.el=t,this.path=this.el.querySelector(".mixer-curve--curve"),this.circle=this.el.querySelector(".mixer-curve--position"),this.min=-100,this.max=100,i&&(this.min=-125,this.max=125,this.el.viewBox.baseVal.height=250);var n=this.el.viewBox.baseVal.width/2,a=this.el.viewBox.baseVal.height/2,o=this.el.querySelector("g");o.transform.baseVal.getItem(0).setTranslate(n,a),this.reset()}return i(e,[{key:"reset",value:function(){this._liveX=999,this._smoothing=!1,this._scalar=100,this._offset=0,this._points=[0,0,0,0,0,0,0,0,0,0,0,0,0],this.type=this.CURVE_LINEAR}},{key:"update",value:function(){for(var e="",t="M",s=-100;s<=100;s+=1){var i=this.curveFunction(s)*this._scalar/this.P100+this._offset;i*=-1,i=Math.min(i,this.max),i=Math.max(i,this.min),e+=t+" "+s+" "+i+" ",t="L"}this.path.setAttribute("d",e),this.live(this._liveX)}},{key:"live",value:function(e){this._liveX=e;var t=this.curveFunction(e)*this._scalar/this.P100+this._offset;t*=-1,this.circle.cx.baseVal.value=e,this.circle.cy.baseVal.value=t}},{key:"linear",value:function(e){return e}},{key:"fixed",value:function(){return this._points[0]}},{key:"expo",value:function(e){function t(e,t){t/=100,e/=o;var s=Math.pow(e,3)*t+e*(1-t);return Math.floor(s*o)}var s=e<0?this.points[1]:this.points[0],i=e<0?-1:1,n=Math.abs(e),a=Math.abs(s),o=this.P100;if(0===s)return e;if(s>0){var r=t(n,a);return r*i}var l=this.P100-t(this.P100-n,a);return l*i}},{key:"nPoints",value:function(e,t){return this._smoothing?this.hermiteCubicSpline(t,e):this.interpolate(t,e)}},{key:"interpolate",value:function(e,t){var s=t-1,i=(this.P100-this.N100)/s,n=Math.floor((e-this.N100)/i);n=Math.max(n,0),n=Math.min(n,s-1);var a=this.N100+n*i,o=this.points[n],r=this.points[n+1],l=r-o;return o+(e-a)*l/i}},{key:"hermiteCubicSpline",value:function(e,t){function s(e,t){if(0===t){var s=e.points[t],a=e.points[t+1];return(a-s)/n}if(t===i){var o=e.points[t-1],r=e.points[t];return(r-o)/n}var l=e.points[t-1],c=e.points[t],u=e.points[t+1],d=(c-l)/n,h=(u-c)/n,p=(d+h)/2;return 0==d||0==h||d>0&&h<0||d<0&&h>0?0:p/d>3?3*d:p/h>3?3*h:p}var i=t-1,n=(this.P100-this.N100)/i,a=Math.floor((e-this.N100)/n);a=Math.max(a,0),a=Math.min(a,i-1);var o=s(this,a),r=s(this,a+1),l=this.N100+a*n,c=this.points[a],u=this.points[a+1],d=(e-l)/n,h=d*d,p=h*d,_=2*p-3*h+1,f=p-2*h+d,m=-2*p+3*h,v=p-h;return _*c+f*n*o+m*u+v*n*r}},{key:"gtZero",value:function(e){var t=this._points[0];if(e<t)return 0;var s=this.P100-t;return s<=0?0:this.P100*(e-t)/s}},{key:"ltZero",value:function(e){var t=this._points[0];if(e>t)return 0;var s=this.N100-t;return s>=0?0:this.N100*(e-t)/s}},{key:"deadband",value:function(e){if(e<0)return this.ltZero(e);var t=this._points[0];this._points[0]=this._points[1];var s=this.gtZero(e);return this._points[0]=t,s}},{key:"absval",value:function(e){var t=this.points[0],s=void 0;if(e<t){if(s=this.N100-t,s>=0)return 0}else if(s=this.P100-t,s<=0)return 0;return this.P100*(e-t)/s}},{key:"minMax",value:function(e){var t=this.points[0];return e<t?this.N100:this.P100}},{key:"zeroMax",value:function(e){var t=this.points[0];return e<t?0:this.P100}},{key:"points",get:function(){return this._points},set:function(e){if(Array.isArray(e)&&e.length<=this._points.length){for(var t=0;t<e.length;t++)this._points[t]=parseInt(e[t]);this.update()}}},{key:"type",get:function(){return this._type},set:function(e){switch(this._type=e,this._type){case this.CURVE_FIXED:this.curveFunction=this.fixed.bind(this);break;case this.CURVE_LINEAR:this.curveFunction=this.linear.bind(this);break;case this.CURVE_MIN_MAX:this.curveFunction=this.minMax.bind(this);break;case this.CURVE_ZERO_MAX:this.curveFunction=this.zeroMax.bind(this);break;case this.CURVE_GT_ZERO:this.curveFunction=this.gtZero.bind(this);break;case this.CURVE_LT_ZERO:this.curveFunction=this.ltZero.bind(this);break;case this.CURVE_ABSVAL:this.curveFunction=this.absval.bind(this);break;case this.CURVE_EXPO:this.curveFunction=this.expo.bind(this);break;case this.CURVE_DEADBAND:this.curveFunction=this.deadband.bind(this);break;case this.CURVE_3POINT:this.curveFunction=this.nPoints.bind(this,3);break;case this.CURVE_5POINT:this.curveFunction=this.nPoints.bind(this,5);break;case this.CURVE_7POINT:this.curveFunction=this.nPoints.bind(this,7);break;case this.CURVE_9POINT:this.curveFunction=this.nPoints.bind(this,9);break;case this.CURVE_11POINT:this.curveFunction=this.nPoints.bind(this,11);break;case this.CURVE_13POINT:this.curveFunction=this.nPoints.bind(this,13)}this.update()}},{key:"smoothing",get:function(){return this._smoothing},set:function(e){this._smoothing=Boolean(e),this.update()}},{key:"scalar",get:function(){return this._scalar},set:function(e){this._scalar=parseInt(e),this.update()}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset=parseInt(e),this.update()}}]),e}();e.exports=n},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=function(){function e(){i(this,e),this.offset=0}return n(e,[{key:"init",value:function(e){this.offset=e.offset;var t=new o("MODEL",{offset:this.offset});t.setTextContent("#app-edit_switch-switch","MIXER_UNITS_SW_SW"),t.setDataURL("#app-edit_switch-switch__edit",["select_single","MODEL","MIXER_UNITS_SW_SW",this.offset]),t.setTextContent("#app-edit_switch-comparison","MIXER_UNITS_SW_CMP"),t.setDataURL("#app-edit_switch-comparison__edit",["select_single","MODEL","MIXER_UNITS_SW_CMP",this.offset]),t.setSlider("#app-edit_switch-value","MIXER_UNITS_SW_VALUE"),a.showPage("edit_switch")}},{key:"back",value:function(){history.back()}}]),e}();window.EditSwitch=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=function(){function e(){i(this,e),this.template=document.querySelector("#app-hardware_inputs-template").content,this.list=document.querySelector("#app-hardware_inputs-list")}return n(e,[{key:"init",value:function(e){var t=new o("TX"),s=Device.TX,i=s.getSchema().HARDWARE_INPUTS,n=i.c,r=i.s;a.clearDynamicElements(this.list);for(var l=0;l<n;l++){var c=l*r,u=s.getItemNumber("HARDWARE_INPUTS_PCB_INPUT_TYPE",{offset:c});if(0!==u){var d=s.getItemNumber("HARDWARE_INPUTS_TYPE",{offset:c}),h=document.importNode(this.template,!0);t.offset=c,t.setTextContent(".mdl-card__title-text","HARDWARE_INPUTS_PCB_INPUT_PIN_NAME",h),t.setTextContent(".app-hardware_inputs-type","HARDWARE_INPUTS_TYPE",h),t.setAttribute(".app-hardware_inputs-type","data-index",l,h),a.setVisibility(".app-hardware_inputs__analog",1===u,h),a.setVisibility(".app-hardware_inputs__digital",2===u,h);var p=d>=1&&d<=4,_=d>=1&&d<=2,f=Device.MODEL&&p;a.setVisibility(".app-hardware_inputs-calibrate",f,h),a.setVisibility(".app-hardware_inputs-calibrate__left",p,h),a.setVisibility(".app-hardware_inputs-calibrate__center",_,h),a.setVisibility(".app-hardware_inputs-calibrate__right",p,h),t.setAttribute(".app-hardware_inputs-calibrate__left","data-index",l,h),t.setAttribute(".app-hardware_inputs-calibrate__center","data-index",l,h),t.setAttribute(".app-hardware_inputs-calibrate__right","data-index",l,h),this.list.appendChild(h)}}a.showPage("hardware_inputs")}},{key:"back",value:function(){history.back()}},{key:"selectType",value:function(e,t){a.cancelBubble(e);var s=parseInt(t.getAttribute("data-index"));console.log("HardwareInputs.selectType()",s);var i=Device.TX.getSchema().HARDWARE_INPUTS,n=s*i.s;location.hash=a.buildURL(["select_single","TX","HARDWARE_INPUTS_TYPE",n])}},{key:"calibrate",value:function(e,t,s){a.cancelBubble(e);var i=parseInt(t.getAttribute("data-index"));switch(console.log("HardwareInputs.calibrate()",i,s),s){case"left":s=0;break;case"center":s=1;break;case"right":s=2;break;default:console.log("HardwareInputs.calibrate(): unknown position value",s)}var n=Device.TX.getSchema().HARDWARE_INPUTS,o=i*n.s,r=Device.TX.getItem("HARDWARE_INPUTS_PCB_INPUT_ADC_CHANNEL",{offset:o}),l=Device.getLiveValue("ADC"+r+" (raw)");if(null!==l){var c={offset:o,index:s};Device.TX.setItem("HARDWARE_INPUTS_CALIBRATION",l,c)}}}]),e}();window.HardwareInputs=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=function(){function e(){i(this,e),this.template=document.querySelector("#app-hardware_inputs_order-template").content,this.list=document.querySelector("#app-hardware_inputs_order-list"),this.offset=0,this.hardwareInputsCount=0}return n(e,[{key:"init",value:function(e){this.offset=parseInt(e.offset),this.schema=Device.TX.getSchema(),this._populateHardwareInputsList(),a.showPage("hardware_inputs_order")}},{key:"back",value:function(){history.back()}},{key:"edit",value:function(e,t){a.cancelBubble(e),location.hash=a.buildURL(["select_multiple","TX","LOGICAL_INPUTS_HARDWARE_INPUTS",this.offset])}},{key:"up",value:function(e,t){a.cancelBubble(e);var s=parseInt(t.getAttribute("data-index"));s<1||this._swap(s,s-1)}},{key:"down",value:function(e,t){a.cancelBubble(e);var s=parseInt(t.getAttribute("data-index"));s>=this.hardwareInputsCount-1||this._swap(s,s+1)}},{key:"_populateHardwareInputsList",value:function(){var e=new o("TX",{offset:this.offset});a.clearDynamicElements(this.list),this.hardwareInputsCount=Device.getNumberOfHardwareInputs(this.offset);for(var t=this.schema.HARDWARE_INPUTS.s,s=0;s<this.hardwareInputsCount;s++){var i=document.importNode(this.template,!0),n=Device.TX.getItem("LOGICAL_INPUTS_HARDWARE_INPUTS",{offset:this.offset,index:s}),r=Device.TX.getItemNumber("LOGICAL_INPUTS_HARDWARE_INPUTS",{offset:this.offset,index:s}),l=Device.TX.getItemNumber("HARDWARE_INPUTS_TYPE",{offset:r*t});e.setTextContentRaw(".app-hardware_inputs_order-template-name",n,i),Device.isValidHardwareType(l,this.offset)||i.querySelector(".app-hardware_inputs_order-template-name").classList.add("error"),e.setAttribute(".app-hardware_inputs_order-template-up","data-index",s,i),e.setAttribute(".app-hardware_inputs_order-template-down","data-index",s,i),this.list.appendChild(i)}this._updateUpDownButtonVisibility()}},{key:"_updateUpDownButtonVisibility",value:function(){for(var e=document.querySelectorAll(".app-hardware_inputs_order-template-up"),t=0;t<e.length;t++)e[t].disabled=0===t;for(var s=document.querySelectorAll(".app-hardware_inputs_order-template-down"),i=0;i<s.length;i++)s[i].disabled=i===s.length-1}},{key:"_swap",value:function(e,t){var s=Device.TX.getItem("LOGICAL_INPUTS_HARDWARE_INPUTS",{offset:this.offset}),i=s[e],n=s[t];s[e]=n,s[t]=i,Device.TX.setItem("LOGICAL_INPUTS_HARDWARE_INPUTS",s,{offset:this.offset}),this._populateHardwareInputsList()}}]),e}();window.HardwareInputsOrder=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=function(){function e(){i(this,e),this.channel=void 0}return n(e,[{key:"init",value:function(e){this.channel=e.channel;var t=Device.MODEL,s=t.getSchema().LIMITS,i=t.getNumberOfTypeMember("MIXER_UNITS_DST",this.channel),n=s.s*i,r=new o("MODEL",{offset:n});r.setTextContentRaw("#app-limits-channel",this.channel),r.setSlider("#app-limits-subtrim","LIMITS_SUBTRIM"),r.setSlider("#app-limits-ep_l","LIMITS_EP_L"),r.setSlider("#app-limits-ep_h","LIMITS_EP_H"),r.setSlider("#app-limits-limit_l","LIMITS_LIMIT_L"),r.setSlider("#app-limits-limit_h","LIMITS_LIMIT_H"),r.setSlider("#app-limits-failsafe","LIMITS_FAILSAFE"),r.setSlider("#app-limits-speed","LIMITS_SPEED"),r.setSwitch("#app-limits-invert","LIMITS_INVERT"),a.showPage("limits")}},{key:"back",value:function(){history.back()}}]),e}();window.Limits=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=function(){function e(){i(this,e),this.template=document.querySelector("#app-logical_inputs-template").content,this.list=document.querySelector("#app-logical_inputs-list"),this.cardAddLogicalInput=document.querySelector("#app-logical_inputs-add"),this.logicalInputsCount=0,this.logicalInputsMaxCount=0,this.schema=void 0,this.UNDO=void 0,this.snackbarMessage=document.querySelector("#app-logical_inputs-template__message").content.textContent,this.snackbarActionText=document.querySelector("#app-logical_inputs-template__action_text").content.textContent}return n(e,[{key:"init",value:function(){this.schema=Device.TX.getSchema(),this._populateLogicalInputsList(),a.showPage("logical_inputs")}},{key:"back",value:function(){history.back()}},{key:"add",value:function(e){a.cancelBubble(e),console.log("LogicalInputs.add()");for(var t=this.schema.LOGICAL_INPUTS,s=t.s,i=0;i<this.logicalInputsMaxCount;i++){var n=i*s,o=Device.TX.getItemNumber("LOGICAL_INPUTS_TYPE",{offset:n});if(0===o){var r=Device.TX.getType("LOGICAL_INPUTS_TYPE"),l=Device.TX.getTypeMembers(r);Device.TX.setItem("LOGICAL_INPUTS_TYPE",l[0],{offset:n});for(var c=Device.getActiveItems("LOGICAL_INPUTS_LABELS",n),u=Device.TX.getItem("LOGICAL_INPUTS_LABELS",{offset:n}),d=0;d<u.length;d++)u[d]=0===d?c[0]:0;return Device.TX.setItem("LOGICAL_INPUTS_LABELS",u,{offset:n}),void this._populateLogicalInputsList(!0)}}}},{key:"editType",value:function(e,t){a.cancelBubble(e);var s=parseInt(t.getAttribute("data-index"));console.log("LogicalInputs.editType()",s);var i=this.schema.LOGICAL_INPUTS.s,n=s*i;location.hash=a.buildURL(["select_single","TX","LOGICAL_INPUTS_TYPE",n])}},{key:"editSubType",value:function(e,t){a.cancelBubble(e);var s=parseInt(t.getAttribute("data-index"));console.log("LogicalInputs.editSubType()",s);var i=this.schema.LOGICAL_INPUTS.s,n=s*i;location.hash=a.buildURL(["select_single","TX","LOGICAL_INPUTS_SUB_TYPE",n])}},{key:"editHardwareInputs",value:function(e,t){a.cancelBubble(e);var s=parseInt(t.getAttribute("data-index"));console.log("LogicalInputs.editHardwareInputs()",s);var i=this.schema.LOGICAL_INPUTS.s,n=s*i;location.hash=a.buildURL(["hardware_inputs_order","LOGICAL_INPUTS_HARDWARE_INPUTS",n])}},{key:"editLabels",value:function(e,t){a.cancelBubble(e);var s=parseInt(t.getAttribute("data-index"));console.log("LogicalInputs.editLabels()",s);var i=this.schema.LOGICAL_INPUTS.s,n=s*i;location.hash=a.buildURL(["select_multiple","TX","LOGICAL_INPUTS_LABELS",n])}},{key:"delete",value:function(e,t){a.cancelBubble(e);var s=parseInt(t.getAttribute("data-index"));console.log("LogicalInputs.delete()",s),this.UNDO={index:s,data:Device.TX.getItem("LOGICAL_INPUTS",{index:s})};var i=Device.TX.getSchema(),n=i.LOGICAL_INPUTS.o,o=i.LOGICAL_INPUTS.s,r=n+s*o,l=n+(s+1)*o,c=(this.logicalInputsMaxCount-1-s)*o;Device.TX.rawCopy(l,r,c),Device.TX.setItem("LOGICAL_INPUTS",new Uint8Array(o),{index:this.logicalInputsMaxCount-1}),this._populateLogicalInputsList();var u={message:this.snackbarMessage,timeout:5e3,actionHandler:this._undoDelete.bind(this),actionText:this.snackbarActionText};a.showSnackbar(u)}},{key:"_undoDelete",value:function(){if(console.log("_undoDelete"),this.UNDO){var e=this.UNDO.index,t=Device.TX.getSchema(),s=t.LOGICAL_INPUTS.o,i=t.LOGICAL_INPUTS.s,n=s+e*i,a=s+(e+1)*i,o=(this.logicalInputsMaxCount-1-e)*i;Device.TX.rawCopy(n,a,o),Device.TX.setItem("LOGICAL_INPUTS",this.UNDO.data,{index:e}),this.UNDO=void 0,this._populateLogicalInputsList()}}},{key:"_populateLogicalInputsList",value:function(e){a.cancelSnackbar();var t=this.schema.HARDWARE_INPUTS.s,s=this.schema.LOGICAL_INPUTS,i=this.schema.LOGICAL_INPUTS_LABELS;this.logicalInputsCount=0,this.logicalInputsMaxCount=s.c;var n=s.s;a.clearDynamicElements(this.list);for(var r=[],l=0;l<this.logicalInputsMaxCount;l++){var c=l*n,u=Device.TX.getItemNumber("LOGICAL_INPUTS_TYPE",{offset:c});if(0!==u){var d=new o("TX",{offset:c}),h=document.importNode(this.template,!0),p=Device.TX.getItem("LOGICAL_INPUTS_POSITION_COUNT",{offset:c});if([2,3].includes(u)){var _=2,f=this.schema.LOGICAL_INPUTS_HARDWARE_INPUTS.c;3===u&&(f=4),h.querySelector(".app-logical_inputs-template--position_count input").setAttribute("MIN",_),h.querySelector(".app-logical_inputs-template--position_count input").setAttribute("MAX",f),p<_?(p=_,Device.TX.setItem("LOGICAL_INPUTS_POSITION_COUNT",p,{offset:c})):p>f&&(p=f,Device.TX.setItem("LOGICAL_INPUTS_POSITION_COUNT",p,{offset:c}))}d.setTextContent(".app-logical_inputs-template--type div","LOGICAL_INPUTS_TYPE",h),d.setTextContent(".app-logical_inputs-template--sub_type div","LOGICAL_INPUTS_SUB_TYPE",h),d.setTextContent(".app-logical_inputs-template--position_count div","LOGICAL_INPUTS_POSITION_COUNT",h),d.setSlider(".app-logical_inputs-template--position_count input","LOGICAL_INPUTS_POSITION_COUNT",h);var m=h.querySelector(".app-logical_inputs-template--position_count div");h.querySelector(".app-logical_inputs-template--position_count input").addEventListener("change",this._onchange.bind(this,l)),h.querySelector(".app-logical_inputs-template--position_count input").addEventListener("input",this._oninput.bind(this,l,m));for(var v=h.querySelector(".app-logical_inputs-template--labels div"),E=0;E<i.c;E++){var C=Device.TX.getItem("LOGICAL_INPUTS_LABELS",{offset:c,index:E});if(0===C)break;E&&v.appendChild(d.createSpan(", "));var g=d.createSpan(C);r.includes(C)&&g.classList.add("error"),r.push(C),v.appendChild(g)}var b=Device.TX.getItemNumber("LOGICAL_INPUTS_HARDWARE_INPUTS",{offset:c,index:0}),y=Device.TX.getItemNumber("HARDWARE_INPUTS_TYPE",{offset:b*t}),I=Device.getNumberOfHardwareInputs(c);v=h.querySelector(".app-logical_inputs-template--hardware_inputs div");for(var T=0;T<I;T++){var S=Device.TX.getItem("LOGICAL_INPUTS_HARDWARE_INPUTS",{offset:c,index:T}),L=Device.TX.getItemNumber("LOGICAL_INPUTS_HARDWARE_INPUTS",{offset:c,index:T}),D=Device.TX.getItemNumber("HARDWARE_INPUTS_TYPE",{offset:L*t});T&&v.appendChild(d.createSpan(", "));var w=d.createSpan(S);Device.isValidHardwareType(D,c)||w.classList.add("error"),v.appendChild(w)}a.setVisibility(".app-logical_inputs-template--sub_type",2===u&&7===y,h),a.setVisibility(".app-logical_inputs-template--position_count",2===u||3===u,h),d.setAttribute(".app-logical_inputs-template--labels div","id","app-logical_inputs--labels"+l,h),d.setAttribute(".app-logical_inputs-template--labels label","for","app-logical_inputs--labels"+l,h),d.setAttribute(".app-logical_inputs-template--position_count div","id","app-logical_inputs--position_count"+l,h),d.setAttribute(".app-logical_inputs-template--position_count label","for","app-logical_inputs--position_count"+l,h),d.setAttribute(".app-logical_inputs-template--type div","id","app-logical_inputs--type"+l,h),
d.setAttribute(".app-logical_inputs-template--type label","for","app-logical_inputs--type"+l,h),d.setAttribute(".app-logical_inputs-template--sub_type div","id","app-logical_inputs--sub_type"+l,h),d.setAttribute(".app-logical_inputs-template--sub_type label","for","app-logical_inputs--sub_type"+l,h),d.setAttribute(".app-logical_inputs-template--hardware_inputs div","id","app-logical_inputs--sub_type"+l,h),d.setAttribute(".app-logical_inputs-template--hardware_inputs label","for","app-logical_inputs--sub_type"+l,h),d.setAttribute(".app-logical_inputs-template--labels button","data-index",l,h),d.setAttribute(".app-logical_inputs-template--type button","data-index",l,h),d.setAttribute(".app-logical_inputs-template--sub_type button","data-index",l,h),d.setAttribute(".app-logical_inputs-template--hardware_inputs button","data-index",l,h),d.setAttribute(".app-logical_inputs-template--delete button","data-index",l,h),this.list.insertBefore(h,this.cardAddLogicalInput),++this.logicalInputsCount}}var A=this.logicalInputsCount<this.logicalInputsMaxCount;if(a.setVisibility("#app-logical_inputs-add",A),a.setVisibility("#app-logical_inputs-menu",A),e){var R=this.list.querySelectorAll(".can-delete");R.length>0&&R[R.length-1].scrollIntoView()}}},{key:"_onchange",value:function(){this._populateLogicalInputsList()}},{key:"_oninput",value:function(e,t,s){t.textContent!==s.target.value&&(t.textContent=s.target.value)}}]),e}();window.LogicalInputs=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=function(){function e(){i(this,e),this.template=document.querySelector("#app-mixer-template").content,this.mixerList=document.querySelector("#app-mixer-sortable"),this.cardAddMixerUnit=document.querySelector("#app-mixer-add"),this.menuAddMixerUnit=document.querySelector("#app-mixer-menu"),this.mixerUnitCount=0,this.mixerUnitMaxCount=0,this.sortable=void 0,this.UNDO=void 0,this.snackbarMessage=document.querySelector("#app-mixer-snackbar__message").content.textContent,this.snackbarActionText=document.querySelector("#app-mixer-snackbar__action_text").content.textContent}return n(e,[{key:"init",value:function(){this._populateMixerUnitList(),a.setVisibility(this.cardAddMixerUnit,this.mixerUnitCount<this.mixerUnitMaxCount),a.setVisibility(this.menuAddMixerUnit,this.mixerUnitCount<this.mixerUnitMaxCount),a.showPage("mixer")}},{key:"back",value:function(){history.back()}},{key:"add",value:function(e){a.cancelBubble(e);var t=this.mixerUnitCount*this.mixerUnitSize,s=Device.MODEL.getType("MIXER_UNITS_SRC"),i=Device.MODEL.getTypeMembers(s);Device.MODEL.setItem("MIXER_UNITS_SRC",i[0],{offset:t}),Device.MODEL.setItem("MIXER_UNITS_SCALAR",100,{offset:t}),Device.MODEL.setItem("MIXER_UNITS_APPLY_TRIM",1,{offset:t}),location.hash=a.buildURL(["mixer_unit",this.mixerUnitCount])}},{key:"editMixerUnit",value:function(e,t){a.cancelBubble(e),location.hash=t.getAttribute("data-url")}},{key:"limits",value:function(e,t){a.cancelBubble(e),location.hash=t.getAttribute("data-url")}},{key:"deleteMixerUnit",value:function(e){e=parseInt(e),this.UNDO={index:e,data:Device.MODEL.getItem("MIXER_UNITS",{index:e})};var t=Device.MODEL.getSchema(),s=t.MIXER_UNITS.o,i=t.MIXER_UNITS.s,n=s+e*i,o=s+(e+1)*i,r=(this.mixerUnitMaxCount-1-e)*i;Device.MODEL.rawCopy(o,n,r),Device.MODEL.setItem("MIXER_UNITS",new Uint8Array(i),{index:this.mixerUnitMaxCount-1});var l={message:this.snackbarMessage,timeout:5e3,actionHandler:this._undoDeleteMixerUnit.bind(this),actionText:this.snackbarActionText};a.showSnackbar(l)}},{key:"_populateMixerUnitList",value:function(){var e=new o("MODEL"),t=Device.MODEL,s=t.getSchema().MIXER_UNITS;this.mixerUnitMaxCount=s.c,this.mixerUnitSize=s.s,this.sortable&&(this.sortable.destroy(),this.sortable=void 0),a.clearDynamicElements(this.mixerList);for(var i=0;i<this.mixerUnitMaxCount;i++){var n=i*this.mixerUnitSize,r=t.getItem("MIXER_UNITS_SRC",{offset:n});if(0===r){this.mixerUnitCount=i;break}e.offset=n;var l=t.getItem("MIXER_UNITS_CURVE_TYPE",{offset:n}),c=t.getItem("MIXER_UNITS_OP",{offset:n}),u=l+" "+c,d=t.getItem("MIXER_UNITS_DST",{offset:n}),h=document.importNode(this.template,!0);e.setTextContent(".app-mixer-template-src","MIXER_UNITS_SRC",h),e.setTextContent(".app-mixer-template-dst","MIXER_UNITS_DST",h),e.setTextContentRaw(".app-mixer-template-mixer_unit",u,h),e.setDataURL(".app-mixer-template-mixer_unit",["mixer_unit",i],h),e.setDataURL(".app-mixer-template-dst",["limits",d],h),this.mixerList.appendChild(h,this.cardAddMixerUnit)}this._updateUpDownButtonVisibility(),this.sortable=new Sortable(this.mixerList,{handle:".sortable-handle",onEnd:this._reordered.bind(this)})}},{key:"_updateUpDownButtonVisibility",value:function(){for(var e=document.querySelectorAll(".app-mixer-template-up"),t=0;t<e.length;t++)e[t].disabled=0===t;for(var s=document.querySelectorAll(".app-mixer-template-down"),i=0;i<s.length;i++)s[i].disabled=i===s.length-1}},{key:"_undoDeleteMixerUnit",value:function(){if(console.log("_undoDeleteMixerUnit"),this.UNDO){var e=this.UNDO.index,t=Device.MODEL.getSchema(),s=t.MIXER_UNITS.o,i=t.MIXER_UNITS.s,n=s+e*i,o=s+(e+1)*i,r=(this.mixerUnitMaxCount-1-e)*i;Device.MODEL.rawCopy(n,o,r),Device.MODEL.setItem("MIXER_UNITS",this.UNDO.data,{index:e}),a.cancelSnackbar(),location.hash=a.buildURL(["mixer_unit",this.UNDO.index]),this.UNDO=void 0}}},{key:"_reordered",value:function(e){var t=e.oldIndex,s=e.newIndex;if(t!==s){console.log("_reordered "+t+"->"+s);var i=Device.MODEL,n=i.getSchema(),a=n.MIXER_UNITS.o,o=n.MIXER_UNITS.s,r=i.getItem("MIXER_UNITS",{index:t});if(t>s){var l=s,c=a+l*o,u=a+(l+1)*o,d=(t-s)*o;i.rawCopy(c,u,d)}else{var h=t,p=a+h*o,_=a+(h+1)*o,f=(s-t)*o;i.rawCopy(_,p,f)}i.setItem("MIXER_UNITS",r,{index:s}),this._populateMixerUnitList()}}}]),e}();window.Mixer=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=s(39),l=function(){function e(){i(this,e),this.offset=0,this.curveViewSVG=document.querySelector("#app-mixer_unit-curve_view"),this.curveView=new r(this.curveViewSVG,(!0)),document.querySelector("#app-mixer_unit-offset").addEventListener("input",this._offsetChanged.bind(this)),document.querySelector("#app-mixer_unit-scalar").addEventListener("input",this._scalarChanged.bind(this))}return n(e,[{key:"init",value:function(e){this.index=e.index;var t=Device.MODEL.getSchema().MIXER_UNITS;this.offset=t.s*this.index;var s=new o("MODEL",{offset:this.offset});s.setTextContent("#app-mixer_unit-src","MIXER_UNITS_SRC"),s.setSwitch("#app-mixer_unit-invert_source","MIXER_UNITS_INVERT_SOURCE"),s.setTextContent("#app-mixer_unit-dst","MIXER_UNITS_DST"),s.setTextContent("#app-mixer_unit-op","MIXER_UNITS_OP"),s.setSwitch("#app-mixer_unit-apply_trim","MIXER_UNITS_APPLY_TRIM"),s.setTextContent("#app-mixer_unit-curve","MIXER_UNITS_CURVE_TYPE"),s.setTextContent("#app-mixer_unit-sw","MIXER_UNITS_SW_SW"),s.setDataURL("#app-mixer_unit-curve__edit",["edit_curve",this.offset]),s.setDataURL("#app-mixer_unit-sw__edit",["edit_switch",this.offset]),s.setDataURL("#app-mixer_unit-src__edit",["select_single","MODEL","MIXER_UNITS_SRC",this.offset]),s.setDataURL("#app-mixer_unit-dst__edit",["select_single","MODEL","MIXER_UNITS_DST",this.offset]),s.setDataURL("#app-mixer_unit-op__edit",["select_single","MODEL","MIXER_UNITS_OP",this.offset]),s.setSlider("#app-mixer_unit-scalar","MIXER_UNITS_SCALAR"),s.setSlider("#app-mixer_unit-offset","MIXER_UNITS_OFFSET"),this.curveView.type=Device.MODEL.getItem("MIXER_UNITS_CURVE_TYPE",{offset:this.offset}),this.curveView.smoothing=Device.MODEL.getItemNumber("MIXER_UNITS_CURVE_SMOOTHING",{offset:this.offset}),this.curveView.points=Device.MODEL.getItemNumber("MIXER_UNITS_CURVE_POINTS",{offset:this.offset}),this._offsetChanged(),this._scalarChanged(),a.showPage("mixer_unit")}},{key:"back",value:function(){history.back()}},{key:"delete",value:function(e){a.cancelBubble(e),Mixer.deleteMixerUnit(this.index),history.back()}},{key:"_offsetChanged",value:function(){this.curveView.offset=parseInt(document.querySelector("#app-mixer_unit-offset").value)}},{key:"_scalarChanged",value:function(){this.curveView.scalar=parseInt(document.querySelector("#app-mixer_unit-scalar").value)}}]),e}();window.MixerUnit=new l},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=function(){function e(){i(this,e)}return n(e,[{key:"init",value:function(e){var t=new o("MODEL");t.setTextfield("#app-model_details-name","NAME"),t.setDataURL("#app-model_details-mixer",["mixer"]),t.setDataURL("#app-model_details-rf_protocol",["rf_protocol"]),t.setIcon("#app-model_details-icon"),a.setVisibility(".app-model_details--transmitter",e.tx),a.setVisibility(".app-model_details--no-transmitter",!e.tx),a.showPage("model_details")}},{key:"back",value:function(){history.back()}},{key:"changeModel",value:function(e){a.cancelBubble(e),location.hash=a.buildURL(["model_list"])}},{key:"selectIcon",value:function(e){a.cancelBubble(e),console.log("ModelDetails.selectIcon()"),location.hash=a.buildURL(["select_icon","MODEL","TAG",0])}},{key:"deleteModel",value:function(e){a.cancelBubble(e),ModelList.deleteModel(Device.MODEL),Device.MODEL=void 0,history.back()}},{key:"configureTransmitter",value:function(e){a.cancelBubble(e),location.hash=a.buildURL(["transmitter_details"])}}]),e}();window.ModelDetails=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=s(31),l=function(){function e(){i(this,e),this.list=document.querySelector("#app-model_list-list"),this.add=document.querySelector("#app-model_list-add"),this.container=document.querySelector("#app-model_list-list__container"),this.template=document.querySelector("#app-model_list-list__template").content,this.loading=document.querySelector("#app-model_list-loading_model"),this.listLoading=document.querySelector("#app-model_list-loading_list"),this.name=document.querySelector("#app-model_list-loading_model__name"),this.progress=document.querySelector("#app-model_list-loading_model__progress"),this.snackbarMessage=document.querySelector("#app-model_list-snackbar__message").content.textContent,this.snackbarActionText=document.querySelector("#app-model_list-snackbar__action_text").content.textContent,this.tx=void 0,this.models=[]}return n(e,[{key:"init",value:function(e){this.tx=e.tx,this.models=[],this._updateItemVisibility(),a.show(this.listLoading),a.hide(this.list),a.hide(this.add),a.hide(this.loading),a.clearDynamicElements(this.list),Database.listEntries(this._databaseCallback.bind(this)),a.showPage("model_list")}},{key:"back",value:function(){history.back()}},{key:"createModel",value:function(e){a.cancelBubble(e);var t=1,s=Device.makeNewDevice(t,"MODEL");s.setItem("RF_PROTOCOL_HK310_ADDRESS",a.newRandomAddress()),s.setItem("RF_PROTOCOL_HK310_HOP_CHANNELS",RFProtocol.newHopChannels());for(var i=s.getSchema().LIMITS.c,n=s.getSchema().LIMITS.s,o=0;o<i;o++)s.setItem("LIMITS_EP_L",-1e4,{offset:o*n}),s.setItem("LIMITS_EP_H",1e4,{offset:o*n}),s.setItem("LIMITS_LIMIT_L",-15e3,{offset:o*n}),s.setItem("LIMITS_LIMIT_H",15e3,{offset:o*n});var r=s.getSchema().MIXER_UNITS.s,l=0;s.setItem("MIXER_UNITS_SRC","ST",{offset:l}),s.setItem("MIXER_UNITS_DST","CH1",{offset:l}),s.setItem("MIXER_UNITS_SCALAR",100,{offset:l}),s.setItem("MIXER_UNITS_APPLY_TRIM",1,{offset:l}),l+=r,s.setItem("MIXER_UNITS_SRC","TH",{offset:l}),s.setItem("MIXER_UNITS_DST","CH2",{offset:l}),s.setItem("MIXER_UNITS_SCALAR",100,{offset:l}),s.setItem("MIXER_UNITS_APPLY_TRIM",1,{offset:l}),l+=r,s.setItem("MIXER_UNITS_SRC","AUX",{offset:l}),s.setItem("MIXER_UNITS_DST","CH3",{offset:l}),s.setItem("MIXER_UNITS_SCALAR",100,{offset:l}),s.setItem("MIXER_UNITS_APPLY_TRIM",1,{offset:l}),Device.MODEL=s,location.hash=a.buildURL(["model_details"])}},{key:"editModel",value:function(e){var t=e.getAttribute("data-index");Database.getEntry(this.models[t].uuid,function(e){Device.MODEL=new r(e),location.hash=a.buildURL(["model_details"])})}},{key:"loadModel",value:function(e){var t=e.getAttribute("data-index");console.log("loadModel",t,Device.MODEL,this.models[t].uuid),a.hide(this.list),a.show(this.loading),this.progress.classList.add("mdl-progress--indeterminate"),this.name.textContent=this.models[t].name;var s=a.newRandomAddress();Device.MODEL.setItem("RF_PROTOCOL_HK310_ADDRESS",s,{preview:!0});var i=this.models[t].uuid,n=void 0;new Promise(function(e,t){Database.getEntry(i,function(s){return s?void e(new r(s)):void t(new Error("loadModel: Model not in database?!"))})}).then(function(e){n=e;var t=n.getSchema().o;return Device.write(t,n.data)}).then(function(){Device.MODEL=n,history.back(),history.replaceState(null,"",a.buildURL(["model_details"]))})["catch"](function(e){console.log(e)})}},{key:"deleteModel",value:function(e){Device.UNDO=e,Database.deleteEntry(e);var t={message:this.snackbarMessage,timeout:5e3,actionHandler:this._undoDeleteModel.bind(this),actionText:this.snackbarActionText};a.showSnackbar(t)}},{key:"_databaseCallback",value:function(e){if(e){var t=e.value;if("MODEL"===t.schemaName){var s=new r(t);this.models.push({name:s.getItem("NAME"),tag:s.getItem("TAG"),uuid:t.uuid})}e["continue"]()}else this._updateModelList()}},{key:"_updateModelList",value:function(){this.models.sort(function(e,t){return e.name<t.name?-1:1});var e=new o("MODEL");a.clearDynamicElements(this.list);for(var t=0;t<this.models.length;t++){var s=document.importNode(this.template,!0);s.querySelector("button.app-model_list--load").setAttribute("data-index",t),s.querySelector("button.app-model_list--edit").setAttribute("data-index",t),e.setTextContentRaw(".app-model_list-list__template-name",this.models[t].name,s),e.setIcon(".app-model_list-list__template-icon",this.models[t].tag,s),this.container.appendChild(s)}a.hide(this.listLoading),a.show(this.add),0!==this.models.length&&a.show(this.list),this._updateItemVisibility()}},{key:"_updateItemVisibility",value:function(){a.setVisibility(".app-model_list--load",this.tx),a.setVisibility(".app-model_list--edit",!this.tx)}},{key:"_undoDeleteModel",value:function(){Device.UNDO&&(Device.MODEL=Device.UNDO,Database.setEntry(Device.MODEL),a.cancelSnackbar(),location.hash=a.buildURL(["model_details"]))}}]),e}();window.ModelList=new l},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(36),r=function(){function e(){i(this,e),this.hopChannelDialog=document.querySelector("#app-rf_protocol-hop_channel_dialog"),this.hopChannelDialog.showModal||o.registerDialog(this.hopChannelDialog),this.address=document.querySelector("#app-rf_protocol-address"),this.hopChannels=document.querySelector("#app-rf_protocol-hop_channels"),this.address.addEventListener("change",this._onAddressChange.bind(this)),this.hopChannels.addEventListener("change",this._onHopChannelsChange.bind(this))}return n(e,[{key:"init",value:function(){var e=Device.MODEL,t=e.getItemNumber("RF_PROTOCOL_TYPE"),s=e.getItem("RF_PROTOCOL_HK310_ADDRESS"),i=e.getItem("RF_PROTOCOL_HK310_HOP_CHANNELS"),n=this._address2string(s);this.address.value=n;var o=i.join(" ");this.hopChannels.value=o;var r=document.querySelectorAll('input[name="protocol"]');r[t].parentNode.MaterialRadio.check(),a.showPage("rf_protocol")}},{key:"back",value:function(){history.back()}},{key:"newHopChannels",value:function(e){var t,s,i,n=[],a=new Uint8Array(1),o=window.crypto||window.msCrypto;switch(e){case"ism":a=new Uint8Array(20),o.getRandomValues(a);for(var r=0;r<20;r++){do o.getRandomValues(a),i=a[0]%70,s=n.indexOf(i)>=0;while(s);n[r]=i}break;case"nrf":for(var l=0;l<20;l++){do o.getRandomValues(a),i=a[0]%125,s=n.indexOf(i)>=0,t=i>=79&&i<=83;while(t||s);n[l]=i}break;default:o.getRandomValues(a);for(var c=a[0]%49,u=0;u<20;u++)n[u]=c+u}return n}},{key:"generateRandomAddress",value:function(e){a.cancelBubble(e);var t=a.newRandomAddress(),s=this._address2string(t);this.address.value=s,Device.MODEL.setItem("RF_PROTOCOL_HK310_ADDRESS",t)}},{key:"showHopChannelDialog",value:function(e){a.cancelBubble(e),this.hopChannelDialog.querySelector("input").checked=!0,this.hopChannelDialog.showModal()}},{key:"hopDialogOk",value:function(e){a.cancelBubble(e),this.hopChannelDialog.close();var t=this.hopChannelDialog.querySelector('input[type="radio"]:checked').value,s=this.newHopChannels(t),i=s.join(" ");this.hopChannels.value=i,Device.MODEL.setItem("RF_PROTOCOL_HK310_HOP_CHANNELS",s)}},{key:"hopDialogCancel",value:function(e){a.cancelBubble(e),this.hopChannelDialog.close()}},{key:"_address2string",value:function(e){return e.map(a.byte2string).join(":")}},{key:"_onAddressChange",value:function(){var e=this._update(this.address,"RF_PROTOCOL_HK310_ADDRESS",16);Device.MODEL.setItem("RF_PROTOCOL_HK310_ADDRESS",e)}},{key:"_onHopChannelsChange",value:function(){var e=this._update(this.hopChannels,"RF_PROTOCOL_HK310_HOP_CHANNELS",10);e=e.map(function(e){return Math.min(e,124)}),Device.MODEL.setItem("RF_PROTOCOL_HK310_HOP_CHANNELS",e)}},{key:"_update",value:function(e,t,s){if(e.validity.valid){var i=new RegExp(e.pattern),n=i.exec(e.value),a=Device.MODEL.getSchema(),o=a[t].c+1;if(!n||n.length!==o)return void console.log(t+" pattern regexp failed!");for(var r=[],l=1;l<o;l++)r.push(parseInt(n[l],s));return r}}},{key:"rf_protocol_changed",value:function(e){a.cancelBubble(e);var t=document.querySelector("#app-rf_protocol"),s=t.querySelector('input[type="radio"]:checked').value;Device.MODEL.setItem("RF_PROTOCOL_TYPE",s)}}]),e}();window.RFProtocol=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=function(){function e(){i(this,e),this.devName=void 0,this.item=void 0,this.offset=0,this.template=document.querySelector("#app-select_icon-template").content,this.list=document.querySelector("#app-select_icon-list")}return n(e,[{key:"init",value:function(e){this.devName=e.devName,this.item=e.item,this.offset=parseInt(e.offset);var t=new o(this.devName);t.setTextContent("#app-select_icon-name","NAME"),a.clearDynamicElements(this.list);var s=Device[this.devName],i=s.getItem(this.item,{offset:this.offset}),n=t.icons,r=0;for(var l in n)if(n.hasOwnProperty(l)){var c=document.importNode(this.template,!0);c.querySelector("i").textContent=n[l],c.querySelector("input").id="app-select_icon__item"+r,c.querySelector("input").value=l,c.querySelector("label").setAttribute("for","app-select_icon__item"+r),c.querySelector("input").checked=parseInt(l)===i,this.list.appendChild(c),++r}a.showPage("select_icon")}},{key:"back",value:function(){history.back()}},{key:"acceptChoice",value:function(e){a.cancelBubble(e);var t=document.querySelector("#app-select_icon-list"),s=t.querySelector('input[type="radio"]:checked').value;Device[this.devName].setItem(this.item,s,{offset:this.offset}),history.go(-1)}}]),e}();window.SelectIcon=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=function(){function e(){i(this,e),this.devName=void 0,this.item=void 0,this.offset=0,this.template=document.querySelector("#app-select_multiple-template").content,this.list=document.querySelector("#app-select_multiple-list"),this.maxNumberOfChoices=0}return n(e,[{key:"init",value:function(e){this.devName=e.devName,this.item=e.item,this.offset=parseInt(e.offset);var t=new o(this.devName);a.clearDynamicElements(this.list);var s=Device[this.devName],i=s.getItem(this.item,{offset:this.offset});this.maxNumberOfChoices=i.length;var n=Device.overrideNumberOfChoices(this.item,this.offset);n&&n.max<this.maxNumberOfChoices&&(this.maxNumberOfChoices=n.max,i=i.slice(0,n.current)),console.log(i);var r=s.getHumanFriendlyText(this.item);t.setTextContentRaw("#app-select_multiple-name",r),t.setTextContentRaw("#app-select_multiple-count",this.maxNumberOfChoices),t.setTextContentRaw("#app-select_multiple-description","");var l=Device.getActiveItems(this.item,this.offset),c=Device.overrideType(this.item,this.offset);if(!c.length){var u=s.getType(this.item);c=s.getTypeMembers(u)}for(var d=0;d<c.length;d++){var h=c[d],p=document.importNode(this.template,!0);if(p.querySelector("span").textContent=h,"LOGICAL_INPUTS_HARDWARE_INPUTS"===this.item){var _=s.getNumberOfTypeMember("LOGICAL_INPUTS_HARDWARE_INPUTS",h),f=s.getSchema().HARDWARE_INPUTS.s,m=s.getItem("HARDWARE_INPUTS_TYPE",{offset:_*f}),v=t.createSpan(" "+m,"app-select_multiple__info");p.querySelector("span").appendChild(v)}p.querySelector("input").id="app-select_multiple__item"+d,p.querySelector("input").value=h,p.querySelector("input").checked=i.includes(h),p.querySelector("input").addEventListener("change",this._onchange.bind(this)),p.querySelector("label").setAttribute("for","app-select_multiple__item"+d),l.includes(h)&&p.querySelector("label").classList.add("mdl-color-text--primary"),this.list.appendChild(p)}a.showPage("select_multiple")}},{key:"back",value:function(){history.back()}},{key:"accept_choice",value:function(e){a.cancelBubble(e);for(var t=Device[this.devName].getSchema()[this.item].c,s=this._getChosenItems();s.length<t;)s.push(0);Device[this.devName].setItem(this.item,s,{offset:this.offset}),history.go(-1)}},{key:"_getChosenItems",value:function(){var e=[],t=document.querySelector("#app-select_multiple-list"),s=t.querySelectorAll('input[type="checkbox"]:checked'),i=!0,n=!1,a=void 0;try{for(var o,r=s[Symbol.iterator]();!(i=(o=r.next()).done);i=!0){var l=o.value;e.push(l.value)}}catch(c){n=!0,a=c}finally{try{!i&&r["return"]&&r["return"]()}finally{if(n)throw a}}return e}},{key:"_onchange",value:function(e){var t=this._getChosenItems();t.length>this.maxNumberOfChoices&&(e.target.checked=!1,this._showToast())}},{key:"_showToast",value:function(){var e="Choose at most "+this.maxNumberOfChoices+" items";a.showToast(e,2e3)}}]),e}();window.SelectMultiple=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=function(){function e(){i(this,e),this.devName=void 0,this.item=void 0,this.offset=0,this.template=document.querySelector("#app-select_single-template").content,this.list=document.querySelector("#app-select_single-list")}return n(e,[{key:"init",value:function(e){this.devName=e.devName,this.item=e.item,this.offset=parseInt(e.offset);var t=new o(this.devName);a.clearDynamicElements(this.list);var s=Device[this.devName],i=s.getHumanFriendlyText(this.item);t.setTextContentRaw("#app-select_single-name",i),t.setTextContentRaw("#app-select_single-description","");var n=Device.getActiveItems(this.item);console.log("activeItems: ",n);var r=Device.overrideType(this.item,this.offset);if(console.log("choices: ",r),!r.length){var l=s.getType(this.item);r=s.getTypeMembers(l)}for(var c=s.getItem(this.item,{offset:this.offset}),u=0;u<r.length;u++){var d=r[u],h=document.importNode(this.template,!0);h.querySelector("span").textContent=d,h.querySelector("input").id="app-select_single__item"+u,h.querySelector("input").value=d,h.querySelector("input").checked=d===c,h.querySelector("label").setAttribute("for","app-select_single__item"+u),n.includes(d)&&h.querySelector("label").classList.add("mdl-color-text--primary"),this.list.appendChild(h)}a.showPage("select_single")}},{key:"back",value:function(){history.back()}},{key:"accept_choice",value:function(e){a.cancelBubble(e);var t=document.querySelector("#app-select_single-list"),s=t.querySelector('input[type="radio"]:checked').value;Device[this.devName].setItem(this.item,s,{offset:this.offset}),history.go(-1)}}]),e}();window.SelectSingle=new r},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=function(){function e(){i(this,e),this.restoreLog=document.querySelector("#settings-restore"),document.querySelector("#settings-restore__input").onchange=this.restore.bind(this)}return n(e,[{key:"init",value:function(){a.removeChildren(this.restoreLog),a.showPage("settings")}},{key:"back",value:function(){history.back()}},{key:"backup",value:function(e){function t(e){if(e){var t=e.value;t.data=Array.from(t.data),s.push(t),e["continue"]()}else{var i=JSON.stringify(s,null,2),n=new Blob([i],{type:"application/json"}),a=strftime("%Y%m%dT%H%M");window.saveAs.saveAs(n,"headless-tx-backup-"+a+".json")}}a.cancelBubble(e);var s=[];Database.listEntries(t)}},{key:"restore",value:function(e){var t=e.target;if(!(t.files.length<1)){a.removeChildren(this.restoreLog);var s=this,i=new FileReader;i.onload=function(e){var t=JSON.parse(e.target.result);t.forEach(function(e){"configVersion"in e&&"schemaName"in e&&"data"in e&&"lastChanged"in e&&"uuid"in e&&Database.getEntry(e.uuid,function(t){if(t&&t.lastChanged>e.lastChanged){var i=document.createElement("DIV");i.textContent="Existing entry for "+e.schemaName+" "+e.uuid+" is newer, not overwriting",s.restoreLog.appendChild(i)}else{var n=document.createElement("DIV");n.textContent="Adding "+e.schemaName+" "+e.uuid+" to database",s.restoreLog.appendChild(n),e.data=Uint8Array.from(e.data),Database.setEntry(e)}})})},i.readAsText(t.files[0])}}}]),e}();window.Settings=new o},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){for(var t=e.toString();t.length<4;)t="0"+t;return t}var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),o=s(20),r=s(35),l=function(){function e(){i(this,e)}return a(e,[{key:"init",value:function(e){var t=new r("TX");t.setTextfield("#app-transmitter_details-name","NAME"),t.setSlider("#app-transmitter_details-trim_range","TRIM_RANGE"),t.setSlider("#app-transmitter_details-trim_step_size","TRIM_STEP_SIZE"),t.setSlider("#app-transmitter_details-meter","METER_PWM_PERCENT"),t.formatter=n,t.setTextfield("#app-transmitter_details-passphrase","PASSPHRASE"),t.setDataURL("#app-transmitter_details-hardware",["hardware_inputs"]),t.setDataURL("#app-transmitter_details-logical",["logical_inputs"]),o.setVisibility("#app-transmitter_details-passphrase-card",e.model),o.showPage("transmitter_details")}},{key:"back",value:function(){history.back()}},{key:"delete",value:function(e){o.cancelBubble(e),TransmitterList.deleteTransmitter(Device.TX),Device.TX=void 0,history.back()}}]),e}();window.TransmitterDetails=new l},function(e,t,s){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a=s(20),o=s(35),r=s(31),l=function(){function e(){i(this,e),this.list=document.querySelector("#app-transmitter_list-list"),this.listLoading=document.querySelector("#app-transmitter_list-loading_list"),this.noTransmitter=document.querySelector("#app-transmitter_list-no_transmitter"),this.container=document.querySelector("#app-transmitter_list-list__container"),this.template=document.querySelector("#app-transmitter_list-list__template").content,this.snackbarMessage=document.querySelector("#app-transmitter_list-snackbar__message").content.textContent,this.snackbarActionText=document.querySelector("#app-transmitter_list-snackbar__action_text").content.textContent,this.transmitters=[]}return n(e,[{key:"init",value:function(e){this.transmitters=[],a.hide(this.noTransmitter),a.hide(this.list),a.show(this.listLoading),a.clearDynamicElements(this.list),Database.listEntries(this._databaseCallback.bind(this)),a.showPage("transmitter_list")}},{key:"back",value:function(){history.back()}},{key:"edit",value:function(e){var t=e.getAttribute("data-index");console.log("TransmitterList.edit()",t),Database.getEntry(this.transmitters[t].uuid,function(e){Device.TX=new r(e),location.hash=a.buildURL(["transmitter_details"])})}},{key:"deleteTransmitter",value:function(e){Device.UNDO=e,Database.deleteEntry(e);var t={message:this.snackbarMessage,timeout:5e3,actionHandler:this._undoDeleteTransmitter.bind(this),actionText:this.snackbarActionText};a.showSnackbar(t)}},{key:"_databaseCallback",value:function(e){if(e){var t=e.value;if("TX"===t.schemaName){var s=new r(t);this.transmitters.push({name:s.getItem("NAME"),uuid:t.uuid})}e["continue"]()}else this._updateTransmitterList()}},{key:"_updateTransmitterList",value:function(){a.clearDynamicElements(this.list),this.transmitters.sort(function(e,t){return e.name<t.name?-1:1});for(var e=new o("TX"),t=0;t<this.transmitters.length;t++){var s=document.importNode(this.template,!0);s.querySelector("button.app-transmitter_list--edit").setAttribute("data-index",t),e.setTextContentRaw(".app-transmitter_list-list__template-name",this.transmitters[t].name,s),this.container.appendChild(s)}var i=0===this.transmitters.length;a.hide(this.listLoading),a.setVisibility(this.list,!i),a.setVisibility(this.noTransmitter,i)}},{key:"_undoDeleteTransmitter",value:function(){Device.UNDO&&(Device.TX=Device.UNDO,Database.setEntry(Device.TX),a.cancelSnackbar(),location.hash=a.buildURL(["transmitter_details"]))}}]),e}();window.TransmitterList=new l},function(e,t,s){"use strict";function i(e){function t(){--s,s||(o.PubSub.removeTopic(i),r.listen())}console.log("Loading devices specified in URL",e);var s=0,i="routes.entryRetrieved";e.model&&(++s,Database.getEntry(e.model,function(t){t?Device.MODEL=new l(t):(console.error("Failed to load MODEL from URL "+e.model),
o.rollbackHistoryToRoot(),location.hash="#/"),o.PubSub.publish(i)})),e.tx&&(++s,Database.getEntry(e.tx,function(t){t?Device.TX=new l(t):(console.error("Failed to load TX from URL "+e.model),o.rollbackHistoryToRoot(),location.hash="#/"),o.PubSub.publish(i)})),o.PubSub.subscribe(i,t)}function n(){console.log("routes: Database ready");var e=r.match(location.hash,!0);return e&&(e.params.model||e.params.tx)?void(e.params.model&&e.params.tx?(o.rollbackHistoryToRoot(),history.pushState(null,"","#/device_list"),r.listen()):i(e.params)):void r.listen()}function a(e){return function(){"function"==typeof e?e():e.init(this.params)}}var o=s(20),r=s(57),l=s(31),c={"#/":Main,"#/about":About,"#/device_list":DeviceList,"#/edit_curve/:offset/m/:model(/t/:tx)":EditCurve,"#/edit_switch/:offset/m/:model(/t/:tx)":EditSwitch,"#/hardware_inputs/m/:model/t/:tx":HardwareInputs,"#/hardware_inputs/t/:tx":HardwareInputs,"#/hardware_inputs_order/:item/:offset/m/:model/t/:tx":HardwareInputsOrder,"#/hardware_inputs_order/:item/:offset/t/:tx":HardwareInputsOrder,"#/limits/:channel/m/:model(/t/:tx)":Limits,"#/logical_inputs/m/:model/t/:tx":LogicalInputs,"#/logical_inputs/t/:tx":LogicalInputs,"#/mixer/m/:model(/t/:tx)":Mixer,"#/mixer_unit/:index/m/:model(/t/:tx)":MixerUnit,"#/model_details/m/:model(/t/:tx)":ModelDetails,"#/model_list":ModelList,"#/model_list/m/:model(/t/:tx)":ModelList,"#/rf_protocol/m/:model(/t/:tx)":RFProtocol,"#/transmitter_details/m/:model/t/:tx":TransmitterDetails,"#/transmitter_details/t/:tx":TransmitterDetails,"#/transmitter_list":TransmitterList,"#/settings":Settings,"#/select_multiple/:devName/:item/:offset(/t/:tx)":SelectMultiple,"#/select_multiple/:devName/:item/:offset/m/:model(/t/:tx)":SelectMultiple,"#/select_single/:devName/:item/:offset(/t/:tx)":SelectSingle,"#/select_single/:devName/:item/:offset/m/:model(/t/:tx)":SelectSingle,"#/select_icon/:devName/:item/:offset(/t/:tx)":SelectIcon,"#/select_icon/:devName/:item/:offset/m/:model(/t/:tx)":SelectIcon};for(var u in c)c.hasOwnProperty(u)&&r.map(u).to(a(c[u]));console.log("ROUTE START: history.length="+history.length+", location.hash="+location.hash),""!==location.hash&&"#"!==location.hash||history.replaceState(null,"","#/"),Database.isReady()?n():o.PubSub.subscribe("databaseReady",n)},function(e,t){"use strict";var s={version:"0.8.4-LANEBOYSRC",map:function(e){return s.routes.defined.hasOwnProperty(e)?s.routes.defined[e]:new s.core.route(e)},root:function(e){s.routes.root=e},rescue:function(e){s.routes.rescue=e},history:{initial:{},pushState:function(e,t,i){s.history.supported?s.dispatch(i)&&history.pushState(e,t,i):s.history.fallback&&(window.location.hash="#"+i)},popState:function(e){var t=!s.history.initial.popped&&location.href==s.history.initial.URL;s.history.initial.popped=!0,t||s.dispatch(document.location.pathname)},listen:function(e){if(s.history.supported=!(!window.history||!window.history.pushState),s.history.fallback=e,s.history.supported)s.history.initial.popped="state"in window.history,s.history.initial.URL=location.href,window.onpopstate=s.history.popState;else if(s.history.fallback){for(route in s.routes.defined)"#"!=route.charAt(0)&&(s.routes.defined["#"+route]=s.routes.defined[route],s.routes.defined["#"+route].path="#"+route);s.listen()}}},match:function(e,t){var i,n,a,o,r,l={},c=null;for(c in s.routes.defined)if(null!==c&&void 0!==c)for(c=s.routes.defined[c],i=c.partition(),o=0;o<i.length;o++){if(l={},n=i[o],r=e,n.search(/:/)>0)for(a=0;a<n.split("/").length;a++)a<r.split("/").length&&":"===n.split("/")[a].charAt(0)&&(l[n.split("/")[a].replace(/:/,"")]=r.split("/")[a],r=r.replace(r.split("/")[a],n.split("/")[a]));if(n===r)return t&&(c.params=l),c}return null},dispatch:function(e){var t,i;if(s.routes.current!==e){if(s.routes.previous=s.routes.current,s.routes.current=e,i=s.match(e,!0),s.routes.previous&&(t=s.match(s.routes.previous),null!==t&&null!==t.do_exit&&t.do_exit()),null!==i)return i.run(),!0;null!==s.routes.rescue&&s.routes.rescue()}},listen:function(){var e=function(){s.dispatch(location.hash)};""===location.hash&&null!==s.routes.root&&(location.hash=s.routes.root),"onhashchange"in window&&(!document.documentMode||document.documentMode>=8)?window.onhashchange=e:setInterval(e,50),""!==location.hash&&s.dispatch(location.hash)},core:{route:function(e){this.path=e,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},s.routes.defined[e]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};s.core.route.prototype={to:function(e){return this.action=e,this},enter:function(e){return e instanceof Array?this.do_enter=this.do_enter.concat(e):this.do_enter.push(e),this},exit:function(e){return this.do_exit=e,this},partition:function(){for(var e,t,s=[],i=[],n=/\(([^}]+?)\)/g;e=n.exec(this.path);)s.push(e[1]);for(i.push(this.path.split("(")[0]),t=0;t<s.length;t++)i.push(i[i.length-1]+s[t]);return i},run:function(){var e,t,i=!1;if(s.routes.defined[this.path].hasOwnProperty("do_enter")&&s.routes.defined[this.path].do_enter.length>0)for(e=0;e<s.routes.defined[this.path].do_enter.length;e++)if(t=s.routes.defined[this.path].do_enter[e].apply(this,null),t===!1){i=!0;break}i||s.routes.defined[this.path].action()}},e.exports=s}]);